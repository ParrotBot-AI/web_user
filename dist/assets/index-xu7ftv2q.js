import{i as t,H as le,d as oe,q as re,r as v,J as ne,x as D,K as U,s as ie,c as x,e as w,f as s,j as a,F as ue,M as de,b as f,h as pe,u as c,l as S,N as ce,O as fe,C as me,t as o,p as _,y as be,G as ve}from"./index-VRJpYvlb.js";import{a as he}from"./avatat-TZWmZvAa.js";import{e as _e}from"./erweima-54vTubhK.js";import{u as ye}from"./file-nY7kymBf.js";import{u as xe}from"./user-G4iwrpca.js";import{u as ge}from"./useGetCode-xJhzzL9g.js";var we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};const $e=we;function G(b){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},d=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(n).filter(function(h){return Object.getOwnPropertyDescriptor(n,h).enumerable}))),d.forEach(function(h){ke(b,h,n[h])})}return b}function ke(b,i,n){return i in b?Object.defineProperty(b,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):b[i]=n,b}var z=function(i,n){var d=G({},i,n.attrs);return t(le,G({},d,{icon:$e}),null)};z.displayName="CameraOutlined";z.inheritAttrs=!1;const Ce=z,Ie="/assets/about-E5fWg_cm.svg",Oe={class:"flex w-full h-full overflow-y-auto"},je={class:"bg-white w-[200px] flex shrink-0 h-[fit-content] flex-col items-center justify-center border border-border-1 border-solid rounded-md ml-[100px] pb-4"},Ue={class:"w-[100px] h-[100px] relative rounded-full overflow-hidden my-4"},Se={key:0,class:"updateAvatar"},ze=["src"],Ae=["src"],Be={key:1,class:"w-full flex flex-col justify-center items-center mb-[-10px]"},Ve={class:"bg-white w-[740px] h-full flex flex-col border border-border-1 border-solid rounded-md p-[80px] ml-[50px]",style:{width:"50%"}},Ee={class:"text-[26px]"},Fe=s("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),He={class:"text-[26px]"},Ne={class:"bg-white w-[740px] h-[818px] flex border border-border-1 border-solid rounded-md flex-col p-[80px]",style:{width:"50%"}},Pe={class:"flex flex-col w-full items-center justify-center"},qe=["src"],Re=s("span",{class:"text-[20px] pt-3"},"Version 1.0.0",-1),De={class:"text-[26px] flex w-1/2 items-start justify-start pt-10"},Ge={class:"text-[26px] flex w-1/2 items-start justify-start pt-10"},Me={class:"flex items-center h-full justify-between"},Te={class:"flex flex-col mt-2",style:{width:"30%"}},We=["src"],Le={class:"w-[127px] flex justify-center items-center text-[16px] text-[#475467]"},Je={class:"text-[16px] mr-10"},Qe={class:"text-[#475467]"},Xe=s("a",{herf:"mailto:frank_fan@parrotbot.cn",class:"text-green-1 pl-2"},"frank_fan@parrotbot.cn",-1),Ye={class:"text-[26px] py-[30px] text-black-1"},Ze=s("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),Ke={class:"text-[26px] py-[30px] text-black-1"},et={class:"pb-[15px]"},tt=s("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),at={class:"pb-[15px]"},st={class:"text px-2 cursor-pointer text-green-1"},lt={class:"pb-[15px]"},pt=oe({__name:"index",setup(b){const i=xe(),n=re(),d=v(""),h=v(!1),A=v(!1),$=v(!1),C=v(!1),y=v(!0),I=v(!1),B=v(),{getCodeBtnText:M,getCode:T,resetCode:W}=ge(),{locale:L}=ne(),V=v(D("language")),g=U({name:"",password:"",mobile:""}),m=U({mobile:"",password:"",code:""}),O=U({mobile:[{required:!0,message:"请输入你的手机号！"},{pattern:de,message:"请输入正确的手机号！",trigger:"blur"}],code:[{required:!0,message:"请输入验证码！"}],password:[{required:!0,message:"请输入密码！"}]});ie(()=>{var e;return(e=n.userInfo)==null?void 0:e.name},()=>{g.name=n.userInfo.name},{immediate:!0});const J=async()=>{try{I.value=!0,await i.api_findPassword(m),$.value=!1}catch(e){console.log(e)}finally{I.value=!1}},Q=()=>{F({name:g.name})},X=()=>{B.value.validateFields("mobile").then(()=>{T(m.mobile,()=>{i.api_sms(m.mobile,W)})})},E=()=>{window.open("https://yingwuzhixue.com/legal.html","__blank")},Y=async e=>{if(e.target.files[0]){const l=await ye(e.target.files[0]);d.value=l.url}},F=async e=>{const{userId:l}=D("userinfo");ve.success("更新成功！"),await i.api_setUserInfo(l,e),await n.requestUserInfo(l),y.value=!0,d.value=""},Z=()=>{F({avatar:d.value})},K=()=>{$.value=!0},ee=()=>{C.value=!0},H=()=>{y.value=!y.value};return(e,l)=>{const te=f("a-avatar"),k=f("a-button"),p=f("a-input"),u=f("a-form-item"),N=f("a-switch"),j=f("a-select-option"),ae=f("a-select"),P=f("a-form"),q=f("a-tab-pane"),se=f("a-tabs"),R=f("a-modal");return x(),w(ue,null,[s("div",Oe,[t(se,{class:"w-full h-full page-tab-setting"},{default:a(()=>[t(q,{key:"1",tab:e.$t("个人账号"),class:"flex"},{default:a(()=>[s("div",je,[s("div",Ue,[y.value?S("",!0):(x(),w("div",Se,[d.value?S("",!0):(x(),pe(c(Ce),{key:0})),d.value?(x(),w("img",{key:1,src:d.value,class:"max-w-full max-h-full"},null,8,ze)):S("",!0),s("input",{type:"file",class:"opacity-0 absolute left-0 top-0 w-full h-full",accept:".jpg,.png,.gif,.jpeg,.svg",onChange:Y},null,32)])),ce(t(te,{class:me(["bg-green-1 overflow-hidden shadow-lg border border-border-1 border-solid",{avatarEdit:!y.value}]),style:{"font-size":"40px"},size:100,src:c(n).userInfo.avatar,alt:c(n).userInfo.name},{default:a(()=>[s("img",{src:c(he),width:"70%",class:"mt-[26px]"},null,8,Ae)]),_:1},8,["class","src","alt"]),[[fe,!d.value]])]),y.value?(x(),w("div",{key:0,class:"text-green-1 cursor-pointer decoration-solid decoration-green-1 underline",onClick:H},o(e.$t("编辑头像")),1)):(x(),w("div",Be,[t(k,{type:"primary","html-type":"submit",class:"shadow-none w-2/3 px-4 py-1.5 h-auto",onClick:Z},{default:a(()=>[_(o(e.$t("更新")),1)]),_:1}),s("div",{class:"text-green-1 py-1 cursor-pointer",onClick:H},o(e.$t("删除")),1)]))]),s("div",Ve,[s("h1",Ee,o(e.$t("账户信息")),1),t(P,{ref_key:"formRef",ref:B,layout:"vertical",name:"login",autocomplete:"off",class:"mt-8",model:g,onFinish:Q},{default:a(()=>[t(u,{label:e.$t("用户名"),name:"name"},{default:a(()=>[t(p,{class:"px-3.5 py-2.5",value:g.name,"onUpdate:value":l[0]||(l[0]=r=>g.name=r)},null,8,["value"])]),_:1},8,["label"]),t(u,{label:e.$t("密码"),name:"password"},{default:a(()=>[t(p,{class:"px-3.5 py-0",placeholder:e.$t("输入密码"),value:"password",type:"password"},{suffix:a(()=>[s("span",{class:"text h-full py-2.5 px-2 cursor-pointer text-green-1",onClick:l[1]||(l[1]=r=>K())},o(e.$t("修改密码")),1)]),_:1},8,["placeholder"])]),_:1},8,["label"]),t(u,{label:e.$t("手机号"),name:"mobile"},{default:a(()=>[t(p,{type:"tel",class:"py-2.5 px-3.5",placeholder:e.$t("您的手机号"),value:c(n).userInfo.mobile,"onUpdate:value":l[3]||(l[3]=r=>c(n).userInfo.mobile=r),disabled:"true"},{prefix:a(()=>[Fe]),suffix:a(()=>[s("span",{class:"text px-2 cursor-pointer text-green-1",onClick:l[2]||(l[2]=r=>ee())},o(e.$t("修改手机号")),1)]),_:1},8,["placeholder","value"])]),_:1},8,["label"]),s("h1",He,o(e.$t("通知提醒管理")),1),t(u,{name:"code"},{default:a(()=>[t(p,{class:"mt-8 setting-item",placeholder:e.$t("打开网站提醒"),disabled:""},{addonAfter:a(()=>[t(N,{checked:h.value,"onUpdate:checked":l[4]||(l[4]=r=>h.value=r)},null,8,["checked"])]),_:1},8,["placeholder"]),t(p,{class:"mt-8 setting-item",placeholder:e.$t("打开短信提醒"),disabled:""},{addonAfter:a(()=>[t(N,{checked:A.value,"onUpdate:checked":l[5]||(l[5]=r=>A.value=r)},null,8,["checked"])]),_:1},8,["placeholder"])]),_:1}),t(u,{class:"mb-6",label:e.$t("请选择语言模式")+":",name:"region"},{default:a(()=>[t(ae,{value:V.value,placeholder:"请选择语言模式",size:"large",onChange:l[6]||(l[6]=r=>{c(be)("language",r),V.value=r,L.value=r})},{default:a(()=>[t(j,{value:"cn"},{default:a(()=>[_(o(e.$t("汉语")),1)]),_:1}),t(j,{value:"en"},{default:a(()=>[_(o(e.$t("英语")),1)]),_:1}),t(j,{value:"hu"},{default:a(()=>[_(o(e.$t("匈牙利语")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),t(u,{class:"mb-0"},{default:a(()=>[t(k,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto"},{default:a(()=>[_(o(e.$t("更新账户信息")),1)]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1},8,["tab"]),t(q,{key:"2",tab:e.$t("关于鹦鹉智学"),class:"w-full h-full flex items-center justify-center"},{default:a(()=>[s("div",Ne,[s("div",Pe,[s("img",{src:c(Ie),alt:"about"},null,8,qe),Re]),s("h1",De,o(e.$t("隐私条款")),1),t(u,{name:"code"},{default:a(()=>[t(p,{class:"px-3.5 py-2.5 mt-8",placeholder:e.$t("《鹦鹉智学协议》"),disabled:"true"},{suffix:a(()=>[s("span",{class:"text px-2 cursor-pointer font-bold text-green-1",onClick:E},o(e.$t("查看")),1)]),_:1},8,["placeholder"]),t(p,{class:"px-3.5 py-2.5 mt-8",placeholder:e.$t("《隐私保护指引》"),disabled:"true"},{suffix:a(()=>[s("span",{class:"text px-2 cursor-pointer font-bold text-green-1",onClick:E},o(e.$t("查看")),1)]),_:1},8,["placeholder"]),s("h1",Ge,o(e.$t("反馈意见")),1),s("div",Me,[s("div",Te,[s("img",{src:c(_e),style:{width:"127px"}},null,8,We),s("div",Le,o(e.$t("添加企业微信")),1)]),s("div",Je,[s("span",Qe,o(e.$t("客服邮箱")),1),Xe])])]),_:1})])]),_:1},8,["tab"])]),_:1})]),t(R,{open:$.value,"onUpdate:open":l[10]||(l[10]=r=>$.value=r),closable:"false",footer:"",class:"mt-[100px] my-modal"},{default:a(()=>[s("div",Ye,o(e.$t("修改密码")),1),t(P,{ref:"formRef1",model:m,layout:"vertical",name:"login",autocomplete:"off",onFinish:J},{default:a(()=>[t(u,{label:"手机号",name:"mobile",rules:O.mobile},{default:a(()=>[t(p,{value:m.mobile,"onUpdate:value":l[7]||(l[7]=r=>m.mobile=r),type:"tel",class:"py-2.5 px-3.5",placeholder:"输入您的手机号"},{prefix:a(()=>[Ze]),_:1},8,["value"])]),_:1},8,["rules"]),t(u,{label:"验证码",name:"code",rules:O.code},{default:a(()=>[t(p,{value:m.code,"onUpdate:value":l[8]||(l[8]=r=>m.code=r),class:"px-3.5 py-0",placeholder:"输入验证码"},{suffix:a(()=>[s("span",{onClick:X,class:"text h-full py-2.5 px-2 cursor-pointer text-green-1"},o(e.$t(c(M))),1)]),_:1},8,["value"])]),_:1},8,["rules"]),t(u,{label:"设置新密码",name:"password",rules:O.password},{default:a(()=>[t(p,{value:m.password,"onUpdate:value":l[9]||(l[9]=r=>m.password=r),class:"py-2.5 px-3.5",placeholder:"输入新密码"},null,8,["value"])]),_:1},8,["rules"]),t(u,{class:"mb-0"},{default:a(()=>[t(k,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto",loading:I.value},{default:a(()=>[_(o(e.$t("确认")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),t(R,{open:C.value,"onUpdate:open":l[12]||(l[12]=r=>C.value=r),closable:"false",class:"w-[250px] mt-[100px] my-modal",footer:""},{default:a(()=>[s("div",Ke,o(e.$t("修改手机号")),1),t(u,{name:"mobile"},{default:a(()=>[s("div",et,o(e.$t("原手机号")),1),t(p,{type:"tel",class:"py-2 px-3.5",placeholder:e.$t("您的手机号"),value:c(n).userInfo.mobile,"onUpdate:value":l[11]||(l[11]=r=>c(n).userInfo.mobile=r),disabled:"true"},{prefix:a(()=>[tt]),_:1},8,["placeholder","value"])]),_:1}),t(u,{name:"mobile"},{default:a(()=>[s("div",at,o(e.$t("验证码")),1),t(p,{type:"tel",class:"py-2 px-3.5",placeholder:e.$t("请输入验证码")},{suffix:a(()=>[s("span",st,o(e.$t("获取验证码")),1)]),_:1},8,["placeholder"])]),_:1}),t(u,{name:"mobile"},{default:a(()=>[s("div",lt,o(e.$t("设置新手机号")),1),t(p,{type:"tel",class:"py-2 px-3.5",placeholder:e.$t("请输入新手机号")},null,8,["placeholder"])]),_:1}),t(k,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto"},{default:a(()=>[_(o(e.$t("确认")),1)]),_:1})]),_:1},8,["open"])],64)}}});export{pt as default};
