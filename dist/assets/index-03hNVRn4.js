import{i as e,H as K,d as ee,q as te,r as x,J as j,s as ae,c as v,e as y,f as a,j as t,F as se,K as le,b as m,h as oe,u as p,l as U,M as re,N as ne,C as ie,p as k,t as C,x as de,G as ce}from"./index-q-G8w-Di.js";import{a as pe}from"./avatat-TZWmZvAa.js";import{e as ue}from"./erweima-54vTubhK.js";import{u as fe}from"./file-L0npLpd1.js";import{u as me}from"./user-ScQmuhU2.js";import{u as xe}from"./useGetCode-Idhc7l-b.js";var be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};const he=be;function q(f){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(b){return Object.getOwnPropertyDescriptor(r,b).enumerable}))),i.forEach(function(b){ve(f,b,r[b])})}return f}function ve(f,n,r){return n in f?Object.defineProperty(f,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):f[n]=r,f}var S=function(n,r){var i=q({},n,r.attrs);return e(K,q({},i,{icon:he}),null)};S.displayName="CameraOutlined";S.inheritAttrs=!1;const _e=S,ye="/assets/about-kIfRBhJk.svg",ge={class:"flex w-full h-full overflow-y-auto"},we={class:"bg-white w-[200px] flex shrink-0 h-[fit-content] flex-col items-center justify-center border border-border-1 border-solid rounded-md ml-[100px] pb-4"},ke={class:"w-[100px] h-[100px] relative rounded-full overflow-hidden my-4"},Ce={key:0,class:"updateAvatar"},$e=["src"],Ie=["src"],Oe={key:1,class:"w-full flex flex-col justify-center items-center mb-[-10px]"},je={class:"bg-white w-[740px] h-full flex flex-col border border-border-1 border-solid rounded-md p-[80px] ml-[50px]",style:{width:"50%"}},Ue=a("h1",{class:"text-[26px]"},"账户信息",-1),Se=a("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),ze=a("h1",{class:"text-[26px]"},"通知提醒管理",-1),Ae={class:"bg-white w-[740px] h-[818px] flex border border-border-1 border-solid rounded-md flex-col p-[80px]",style:{width:"50%"}},Be={class:"flex flex-col w-full items-center justify-center"},Ve=["src"],Fe=a("span",{class:"text-[20px] pt-3"},"Version 1.0.0",-1),He=a("h1",{class:"text-[26px] flex w-1/2 items-start justify-start pt-10"},"隐私条款",-1),Ne=a("h1",{class:"text-[26px] flex w-1/2 items-start justify-start pt-10"},"反馈意见",-1),Pe={class:"flex items-center h-full justify-between"},Re={class:"flex flex-col mt-2",style:{width:"30%"}},qe=["src"],Ee=a("div",{class:"w-[127px] flex justify-center items-center text-[16px] text-[#475467]"},"添加企业微信",-1),De=a("div",{class:"text-[16px] mr-10"},[a("span",{class:"text-[#475467]"},"客服邮箱"),a("a",{herf:"mailto:frank_fan@parrotbot.cn",class:"text-green-1 pl-2"},"frank_fan@parrotbot.cn")],-1),Ge=a("div",{class:"text-[26px] py-[30px] text-black-1"},"修改密码",-1),Me=a("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),Te=a("div",{class:"text-[26px] py-[30px] text-black-1"},"修改手机号",-1),Je=a("div",{class:"pb-[15px]"},"原手机号",-1),Le=a("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),We=a("div",{class:"pb-[15px]"},"验证码",-1),Qe=a("span",{class:"text px-2 cursor-pointer text-green-1"}," 获取验证码 ",-1),Xe=a("div",{class:"pb-[15px]"},"设置新手机号",-1),st=ee({__name:"index",setup(f){const n=me(),r=te(),i=x(""),b=x(!1),z=x(!1),g=x(!1),$=x(!1),h=x(!0),I=x(!1),A=x(),{getCodeBtnText:E,getCode:D,resetCode:G}=xe(),_=j({name:"",password:"",mobile:""}),u=j({mobile:"",password:"",code:""}),O=j({mobile:[{required:!0,message:"请输入你的手机号！"},{pattern:le,message:"请输入正确的手机号！",trigger:"blur"}],code:[{required:!0,message:"请输入验证码！"}],password:[{required:!0,message:"请输入密码！"}]});ae(()=>{var l;return(l=r.userInfo)==null?void 0:l.name},()=>{_.name=r.userInfo.name},{immediate:!0});const M=async()=>{try{I.value=!0,await n.api_findPassword(u),g.value=!1}catch(l){console.log(l)}finally{I.value=!1}},T=()=>{V({name:_.name})},J=()=>{A.value.validateFields("mobile").then(()=>{D(u.mobile,()=>{n.api_sms(u.mobile,G)})})},B=()=>{window.open("https://yingwuzhixue.com/legal.html","__blank")},L=async l=>{if(l.target.files[0]){const s=await fe(l.target.files[0]);i.value=s.url}},V=async l=>{const{userId:s}=de("userinfo");ce.success("更新成功！"),await n.api_setUserInfo(s,l),await r.requestUserInfo(s),h.value=!0,i.value=""},W=()=>{V({avatar:i.value})},Q=()=>{g.value=!0},X=()=>{$.value=!0},F=()=>{h.value=!h.value};return(l,s)=>{const Y=m("a-avatar"),w=m("a-button"),d=m("a-input"),c=m("a-form-item"),H=m("a-switch"),N=m("a-form"),P=m("a-tab-pane"),Z=m("a-tabs"),R=m("a-modal");return v(),y(se,null,[a("div",ge,[e(Z,{class:"w-full h-full page-tab-setting"},{default:t(()=>[e(P,{key:"1",tab:"个人账号",class:"flex"},{default:t(()=>[a("div",we,[a("div",ke,[h.value?U("",!0):(v(),y("div",Ce,[i.value?U("",!0):(v(),oe(p(_e),{key:0})),i.value?(v(),y("img",{key:1,src:i.value,class:"max-w-full max-h-full"},null,8,$e)):U("",!0),a("input",{type:"file",class:"opacity-0 absolute left-0 top-0 w-full h-full",accept:".jpg,.png,.gif,.jpeg,.svg",onChange:L},null,32)])),re(e(Y,{class:ie(["bg-green-1 overflow-hidden shadow-lg border border-border-1 border-solid",{avatarEdit:!h.value}]),style:{"font-size":"40px"},size:100,src:p(r).userInfo.avatar,alt:p(r).userInfo.name},{default:t(()=>[a("img",{src:p(pe),width:"70%",class:"mt-[26px]"},null,8,Ie)]),_:1},8,["class","src","alt"]),[[ne,!i.value]])]),h.value?(v(),y("div",{key:0,class:"text-green-1 cursor-pointer decoration-solid decoration-green-1 underline",onClick:F},"编辑头像")):(v(),y("div",Oe,[e(w,{type:"primary","html-type":"submit",class:"shadow-none w-2/3 px-4 py-1.5 h-auto",onClick:W},{default:t(()=>[k(C(l.$t("更新")),1)]),_:1}),a("div",{class:"text-green-1 py-1 cursor-pointer",onClick:F},"删除")]))]),a("div",je,[Ue,e(N,{ref_key:"formRef",ref:A,layout:"vertical",name:"login",autocomplete:"off",class:"mt-8",model:_,onFinish:T},{default:t(()=>[e(c,{label:l.$t("用户名"),name:"name"},{default:t(()=>[e(d,{class:"px-3.5 py-2.5",value:_.name,"onUpdate:value":s[0]||(s[0]=o=>_.name=o)},null,8,["value"])]),_:1},8,["label"]),e(c,{label:l.$t("密码"),name:"password"},{default:t(()=>[e(d,{class:"px-3.5 py-0",placeholder:l.$t("输入密码"),value:"password",type:"password"},{suffix:t(()=>[a("span",{class:"text h-full py-2.5 px-2 cursor-pointer text-green-1",onClick:s[1]||(s[1]=o=>Q())}," 修改密码 ")]),_:1},8,["placeholder"])]),_:1},8,["label"]),e(c,{label:l.$t("手机号"),name:"mobile"},{default:t(()=>[e(d,{type:"tel",class:"py-2.5 px-3.5",placeholder:l.$t("您的手机号"),value:p(r).userInfo.mobile,"onUpdate:value":s[3]||(s[3]=o=>p(r).userInfo.mobile=o),disabled:"true"},{prefix:t(()=>[Se]),suffix:t(()=>[a("span",{class:"text px-2 cursor-pointer text-green-1",onClick:s[2]||(s[2]=o=>X())}," 修改手机号 ")]),_:1},8,["placeholder","value"])]),_:1},8,["label"]),ze,e(c,{name:"code"},{default:t(()=>[e(d,{class:"mt-8 setting-item",placeholder:l.$t("打开网站提醒"),disabled:""},{addonAfter:t(()=>[e(H,{checked:b.value,"onUpdate:checked":s[4]||(s[4]=o=>b.value=o)},null,8,["checked"])]),_:1},8,["placeholder"]),e(d,{class:"mt-8 setting-item",placeholder:l.$t("打开短信提醒"),disabled:""},{addonAfter:t(()=>[e(H,{checked:z.value,"onUpdate:checked":s[5]||(s[5]=o=>z.value=o)},null,8,["checked"])]),_:1},8,["placeholder"])]),_:1}),e(c,{class:"mb-0"},{default:t(()=>[e(w,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto"},{default:t(()=>[k(C(l.$t("更新账户信息")),1)]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),e(P,{key:"2",tab:"关于鹦鹉智学",class:"w-full h-full flex items-center justify-center"},{default:t(()=>[a("div",Ae,[a("div",Be,[a("img",{src:p(ye),alt:"about"},null,8,Ve),Fe]),He,e(c,{name:"code"},{default:t(()=>[e(d,{class:"px-3.5 py-2.5 mt-8",placeholder:l.$t("《鹦鹉智学协议》"),disabled:"true"},{suffix:t(()=>[a("span",{class:"text px-2 cursor-pointer font-bold text-green-1",onClick:B}," 查看 ")]),_:1},8,["placeholder"]),e(d,{class:"px-3.5 py-2.5 mt-8",placeholder:l.$t("《隐私保护指引》"),disabled:"true"},{suffix:t(()=>[a("span",{class:"text px-2 cursor-pointer font-bold text-green-1",onClick:B}," 查看 ")]),_:1},8,["placeholder"]),Ne,a("div",Pe,[a("div",Re,[a("img",{src:p(ue),style:{width:"127px"}},null,8,qe),Ee]),De])]),_:1})])]),_:1})]),_:1})]),e(R,{open:g.value,"onUpdate:open":s[9]||(s[9]=o=>g.value=o),closable:"false",footer:"",class:"mt-[100px] my-modal"},{default:t(()=>[Ge,e(N,{ref:"formRef1",model:u,layout:"vertical",name:"login",autocomplete:"off",onFinish:M},{default:t(()=>[e(c,{label:"手机号",name:"mobile",rules:O.mobile},{default:t(()=>[e(d,{value:u.mobile,"onUpdate:value":s[6]||(s[6]=o=>u.mobile=o),type:"tel",class:"py-2.5 px-3.5",placeholder:"输入您的手机号"},{prefix:t(()=>[Me]),_:1},8,["value"])]),_:1},8,["rules"]),e(c,{label:"验证码",name:"code",rules:O.code},{default:t(()=>[e(d,{value:u.code,"onUpdate:value":s[7]||(s[7]=o=>u.code=o),class:"px-3.5 py-0",placeholder:"输入验证码"},{suffix:t(()=>[a("span",{onClick:J,class:"text h-full py-2.5 px-2 cursor-pointer text-green-1"},C(p(E)),1)]),_:1},8,["value"])]),_:1},8,["rules"]),e(c,{label:"设置新密码",name:"password",rules:O.password},{default:t(()=>[e(d,{value:u.password,"onUpdate:value":s[8]||(s[8]=o=>u.password=o),class:"py-2.5 px-3.5",placeholder:"输入新密码"},null,8,["value"])]),_:1},8,["rules"]),e(c,{class:"mb-0"},{default:t(()=>[e(w,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto",loading:I.value},{default:t(()=>[k("确认")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),e(R,{open:$.value,"onUpdate:open":s[11]||(s[11]=o=>$.value=o),closable:"false",class:"w-[250px] mt-[100px] my-modal",footer:""},{default:t(()=>[Te,e(c,{name:"mobile"},{default:t(()=>[Je,e(d,{type:"tel",class:"py-2 px-3.5",placeholder:l.$t("您的手机号"),value:p(r).userInfo.mobile,"onUpdate:value":s[10]||(s[10]=o=>p(r).userInfo.mobile=o),disabled:"true"},{prefix:t(()=>[Le]),_:1},8,["placeholder","value"])]),_:1}),e(c,{name:"mobile"},{default:t(()=>[We,e(d,{type:"tel",class:"py-2 px-3.5",placeholder:l.$t("请输入验证码")},{suffix:t(()=>[Qe]),_:1},8,["placeholder"])]),_:1}),e(c,{name:"mobile"},{default:t(()=>[Xe,e(d,{type:"tel",class:"py-2 px-3.5",placeholder:l.$t("请输入新手机号")},null,8,["placeholder"])]),_:1}),e(w,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto"},{default:t(()=>[k(C(l.$t("确认")),1)]),_:1})]),_:1},8,["open"])],64)}}});export{st as default};
