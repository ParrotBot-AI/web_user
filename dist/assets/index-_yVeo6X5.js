import{i as R,K as je,M as Ie,r as F,N as oe,C as de,v as X,O as Oe,d as J,c as n,e as i,f as e,t as $,u as D,y as Z,k as U,F as j,g as O,n as te,z as ce,A as ue,P as ie,q as pe,a as Se,b as P,Q as se,S as ne,T as Ee,h as K,m as Le,j as H,l as G,w as He,I as ze,U as ge,V as Ve,W as Ge,R as Te,X as Qe,Y as Pe,G as Ne,L as We}from"./index-nx37jhkW.js";import{r as be,a as Ye,b as Xe}from"./exam-gC5EqtFZ.js";import{_ as le}from"./_plugin-vue_export-helper-x3n3nnut.js";import{a as we,_ as Ue,s as Ke}from"./item.vue_vue_type_script_setup_true_lang-zawBCrKI.js";import{t as ee,i as Ae,a as Je,n as Ze,b as et,c as tt}from"./index-FwOvAzEf.js";import{C as st,P as nt,_ as ot}from"./index.vue_vue_type_script_setup_true_lang-INGG8nyR.js";import{M as lt,_ as ke,a as at,b as rt}from"./man-2-z7vLpeEe.js";import"./children.vue_vue_type_script_setup_true_lang-ZyUylKnd.js";var it={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"};const ct=it;function $e(p){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?Object(arguments[t]):{},f=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(f=f.concat(Object.getOwnPropertySymbols(s).filter(function(h){return Object.getOwnPropertyDescriptor(s,h).enumerable}))),f.forEach(function(h){ut(p,h,s[h])})}return p}function ut(p,t,s){return t in p?Object.defineProperty(p,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):p[t]=s,p}var me=function(t,s){var f=$e({},t,s.attrs);return R(je,$e({},f,{icon:ct}),null)};me.displayName="AuditOutlined";me.inheritAttrs=!1;const _e=me,De={27:"A+",25:"A",23:"A-",21:"B+",19:"B",17:"B-",15:"C+",13:"C",10:"C-",0:"F"},Ce={10:"A+",9:"A",8:"A-","7.5":"B+",7:"B",6:"B-","5.5":"C+",5:"C",4:"C-",0:"F"},dt={"Integrated Writing":[{key:"Content & Details Given",title:"内容与细节"},{key:"Grammar",title:"语法"},{key:"Structure/Flow",title:"结构与流畅度"}],"Academic discussion":[{key:"Contribution",title:"内容贡献"},{key:"Relevance",title:"相关性"},{key:"Structure/Flow",title:"结构与流畅度"},{key:"Grammar",title:"语法"}]},pt=[{key:["Fluency","Pronunciation"],title:"流利度"},{key:["Grammar","Vocabulary Usage"],title:"语法与词汇"},{key:"Content",title:"内容"},{key:"Coherence",title:"连贯性"}],qe=[{type:"内容",id:"Content",style:{color:"#667085",background:"rgba(253, 212, 78, 0.3)"}},{type:"连贯性",id:"Coherence",style:{color:"#667085","text-decoration-line":"underline","text-decoration-color":"#667085"}},{type:"语法",id:"Grammar and Language Use",style:{color:"#667085","text-decoration-line":"underline","text-decoration-style":"dashed","text-decoration-color":"#C33473"}},{type:"优秀用句",id:"Good",style:{color:"#667085",background:"rgba(183, 217, 114, 0.3)"}}],_t=[{type:"内容与细节",id:"Content & Details Given",style:{color:"#667085",background:"rgba(253, 212, 78, 0.3)"}},{type:"结构与流畅度",id:"Structure/Flow",style:{color:"#667085","text-decoration-line":"underline","text-decoration-color":"#667085"}},{type:"语法",id:"Grammar",style:{color:"#667085","text-decoration-line":"underline","text-decoration-style":"dashed","text-decoration-color":"#C33473"}},{type:"优秀用句",id:"Good",style:{color:"#667085",background:"rgba(183, 217, 114, 0.3)"}}],xt=[{type:"贡献度与相关性",id:["Contribution","Relevance"],style:{color:"#667085",background:"rgba(253, 212, 78, 0.3)"}},{type:"结构与流畅度",id:"Structure/Flow",style:{color:"#667085","text-decoration-line":"underline","text-decoration-color":"#667085"}},{type:"语法",id:"Grammar",style:{color:"#667085","text-decoration-line":"underline","text-decoration-style":"dashed","text-decoration-color":"#C33473"}},{type:"优秀用句",id:"Good",style:{color:"#667085",background:"rgba(183, 217, 114, 0.3)"}}],ae=Ie("result",()=>{const p=F(!1),{query:t}=oe(),s=de({loading:!0,title:"",level:"",footerActiveIndex:0,allData:[],aiComment:"",questions_r:{},format_question:[],score_d:[]}),f=de([]),h=o=>o.replace(/TPO\s?\d+/g,""),m=()=>{p.value=!p.value},q=async o=>{await Oe(5e3),await be(o);const d=await Xe(o);d.score===null?q(o):C(d)},S=o=>{const d=o==null?void 0:o.model_answer;if(!d)return{model_answer_content:{},model_answer:""};const r=typeof d=="string"?JSON.parse(d):d;if(r["General Feedback"]){const c=r["General Feedback"].split(/\n?(.+):\s/i).slice(1);r.format_G_F=new Array(c.length/2).fill(0).reduce((l,w,a)=>(l[c[a*2]]=c[a*2+1],l),{})}return r["Mind-Map"]&&(r.format_M_M=r["Mind-Map"].split(/\n/)),{model_answer_content:r,model_answer:d}},y=(o,d)=>(o.forEach(r=>{var c,l;r.total=(c=d.filter(w=>r.include.includes(w.name)))==null?void 0:c.reduce((w,a)=>w+a.count||0,0),r.count=(l=d.filter(w=>r.include.includes(w.name)))==null?void 0:l.reduce((w,a)=>w+a.sum||0,0),r.isComputed=!0}),{list:o,tags:d.map(r=>({...r,name:r.name.replace(/^(阅读|听力)/g,"")}))}),b=o=>{const d=Object.values(o.score_d);if(t.type==="hearing"){const r=[{title:"基础题",include:["听力目的主旨题","听力内容主旨题","听力细节题"]},{title:"强化题",include:["听力推理题","听力句子功能题","听力连结内容题","听力组织结构题"]}],c=d.map(l=>{const w=l.find(a=>a.name.endsWith("Conversation2")||a.name.endsWith("Lecture3")||a.name.endsWith("Lecture4"))?2:1;return{title:"Section "+w,id:w}});return s.allData[0]={layout:"col",name:"听力得分",mockScore:o.score,mockScoreTotal:o.max_score,aiComment:"",list:d.map((l,w)=>({...c[w],children:l.map((a,A)=>({title:a.name.split(/\s/).slice(-1)[0],id:`${w}-${A}`,count:a.count,total:a.total,isComputed:l.score!==null}))}))},s.allData.push(...c.map((l,w)=>{var a,A;return{subtitle:l.title,layout:"row",name:"Raw Score",mockScore:(a=d[w])==null?void 0:a.reduce((v,g)=>v+g.count,0),mockScoreTotal:(A=d[w])==null?void 0:A.reduce((v,g)=>v+g.total,0),...y(r,o.tag_d[l.id]),aiComment:""}})),c}else if(t.type==="spoken"){const r=d[0].map((c,l)=>({title:"Task "+c.name.split(/\s/).slice(-1)[0],id:`${l}`}));return s.allData[0]={layout:"col",name:"口语得分",mockScore:o.questions_r.questions.reduce((c,l)=>c+l.score,0),mockScoreTotal:o.max_score,list:o.questions_r.questions.map((c,l)=>({title:"Task "+c.order,id:l,isComputed:c.score!==null,count:c.score,total:c.max_score}))},s.allData.push(...r.map((c,l)=>{const{model_answer:w,model_answer_content:a}=S(o.questions_r.questions[l]),A=a==null?void 0:a.Content.filter(g=>Object.keys(g).length>0),v=qe;return{layout:"col",name:c.title,mockScore:o.questions_r.questions[l].score,mockScoreTotal:o.questions_r.questions[l].max_score,aiComment:"",model_answer:w,model_answer_content:{...a,sent_back:A.map(g=>Object.keys(g).reduce((B,M)=>{var E;const I=(E=a["Sentence Feedback"][M].Type)==null?void 0:E.reduce((N,W)=>{var z;return{...(z=v.find(u=>u.id===W||u.id.includes(W)))==null?void 0:z.style}},{});return B[M]={...a["Sentence Feedback"][M],original:g[M],style:I,curStyle:{...I},aiStyle:{...I}},B},{}))},question:o.questions_r.questions[l],curIndex:l+1,length:o.questions_r.questions.length,ques_mark:qe,list:pt.map(g=>{var M,I;const B=Array.isArray(g.key)?g.key.reduce((E,N)=>{var W;return Number((W=a==null?void 0:a.Grades)==null?void 0:W[N])+E},0):(M=a==null?void 0:a.Grades)==null?void 0:M[g.key];return{title:g.title,count:a?(B/2).toFixed(1):(I=a==null?void 0:a.Grades)==null?void 0:I[c.key],isComputed:(a==null?void 0:a.Status)==="OK",total:4}})}})),r}else if(t.type==="writing"){const r=d.map((c,l)=>({title:Number(c[0].name.slice(-1))===1?"Integrated Writing":"Academic discussion",id:`${l}`}));return s.allData[0]={layout:"col",name:"写作得分",mockScore:o.questions_r.questions.reduce((c,l)=>c+l.score,0),mockScoreTotal:o.max_score,list:o.questions_r.questions.map((c,l)=>({title:c.keywords.r===1200?"Integrated Writing":"Academic discussion",id:l,isComputed:c.score!==null,count:c.score,total:c.max_score})),aiComment:""},s.allData.push(...r.map((c,l)=>{const{model_answer:w,model_answer_content:a}=S(o.questions_r.questions[l]),A=a==null?void 0:a.Content.filter(g=>Object.keys(g).length>0),v=c.title==="Integrated Writing"?_t:xt;return{layout:"col",name:c.title,ques_mark:v,mockScore:o.questions_r.questions[l].score,mockScoreTotal:o.questions_r.questions[l].max_score,aiComment:"",model_answer:w,model_answer_content:{...a,sent_back:A.map(g=>Object.keys(g).reduce((B,M)=>{var E;const I=(E=a["Sentence Feedback"][M].Type)==null?void 0:E.reduce((N,W)=>{var z;return{...(z=v.find(u=>u.id===W||u.id.includes(W)))==null?void 0:z.style}},{});return B[M]={...a["Sentence Feedback"][M],original:g[M],style:I,curStyle:{...I},aiStyle:{...I}},B},{}))},question:o.questions_r.questions[l],curIndex:l+1,length:o.questions_r.questions.length,list:dt[c.title].map(g=>({title:g.title,count:(a==null?void 0:a.Grades[g.key])||0,isComputed:(a==null?void 0:a.Grades[g.key])!==null,total:5}))}})),r}else{const r=[{title:"基础题",include:["阅读词汇题","阅读指代题","句子简化题","阅读细节题","阅读排除题"]},{title:"强化题",include:["阅读修辞目的题","阅读插入句子题","阅读推断题"]},{title:"文章小结题",include:["阅读文章内容小结题","阅读表格题"]}],c=d.map((l,w)=>({title:h(l[0].name),id:`${w}`}));return s.allData[0]={layout:"row",name:"阅读得分",mockScore:o.score,mockScoreTotal:o.max_score,aiComment:"",...y(r,o.tag_d.all)},s.allData.push(...c.map((l,w)=>{var a,A;return{layout:"row",name:"模考得分",subtitle:l.title,mockScore:(a=d[w])==null?void 0:a.reduce((v,g)=>v+g.count,0),mockScoreTotal:(A=d[w])==null?void 0:A.reduce((v,g)=>v+g.total,0),aiComment:"",...y(r,o.tag_d[l.id*1+1])}})),c}},x=(o,d)=>{const r=Object.keys(o===1?De:Ce).find(c=>d>=Number(c));return o===1?De[r]:Ce[r]},C=o=>{s.questions_r=o.questions_r,s.score_d=Object.values(o.score_d),s.format_question=o.questions_r.questions.reduce((d,r)=>(d.push(...Array.isArray(r.children)&&r.children.length?r.children.map(c=>{var w;const l=(w=r.question_content)==null?void 0:w.split(/\\n/);return{...c,question_parent:{...r,original_question_content:l,question_content:l==null?void 0:l.map(a=>a.replaceAll(r.keywords.k,"")),question_title:r.question_title?r.question_title:"听力原文",children:null}}}):[]),d),[]),f.length=0,f.push({title:"报告",id:"all"},...b(o)),s.title=`${s.score_d[0][0].name.match(/^(TPO\s?\d+)/)[1]} 成绩单`,s.level=x(o.type,o.score),s.loading=!1},k=async o=>{s.title="",s.level="",s.footerActiveIndex=0,s.allData=[],s.aiComment="",s.questions_r={},s.format_question=[],s.score_d=[],s.loading=!0,await be(o);const d=await Ye(o);d.score!==null?C(d):q(o)},_=X(()=>s.allData[s.footerActiveIndex]);return{getExamResult:k,showHoverMark:(o,d,r,c)=>{var w;((w=s.allData.slice(1)[r])==null?void 0:w.model_answer_content.sent_back).map(a=>{Object.keys(a).map(A=>{c==="hover"?o===A?a[A].curStyle={...a[o].style,"font-weight":"700"}:a[A].curStyle={}:a[A].curStyle=a[A].style})})},curData:_,resultData:s,setShowAnswerHistoryDialog:m,showAnswerHistoryDialog:p,footerData:f}}),ft=p=>(ce("data-v-2d260523"),p=p(),ue(),p),mt={class:"relative bg-wrap"},ht={class:"w-[190px] h-[137px] result-icon absolute -top-[70px] left-1/2 -translate-x-1/2"},yt={class:"absolute w-[46px] h-[46px] flex justify-center items-center text-white right-[40px] text-2xl"},vt={class:"w-[56vw] h-full flex flex-col items-center"},gt={key:0,class:"absolute left-8 top-7 text-base"},bt={class:"flex items-center justify-center flex-col"},wt={class:"text-gray-600 font-normal text-[16px]"},kt={class:"font-bold text-gray-600 pt-2"},$t={class:"text-[36px]"},Dt={class:"text-[24px]"},Ct={class:"flex"},qt={class:"text-black font-semibold text-base mb-2"},St={class:"flex"},Tt={class:"font-normal text-[#475467] text-nowrap"},At={class:"font-bold text-gray-600"},Bt={class:"text-[36px] text-[#C33473]"},Mt={class:"text-[24px]"},Rt={class:"text-[#475467] font-normal text-base mb-2"},Ft={key:0,class:"font-bold text-gray-600"},jt={class:"text-[36px]"},It={class:"text-[24px]"},Ot={key:1},Et=ft(()=>e("span",{class:"text-xs text-gray-600 opacity-90"},"正在打分中...",-1)),Lt=[Et],Ht={key:0,class:"flex flex-wrap mt-2 justify-center"},zt=J({__name:"Card",setup(p){const t=ae(),{query:s}=oe();return X(()=>t.customData[s.type]),(f,h)=>{var m,q,S,y,b,x,C,k,_,T,o,d;return n(),i("div",mt,[e("div",{class:"bg-white rounded-md relative z-10 px-14 pb-14 pt-20",style:te({boxShadow:"0px 4px 20px 0px rgba(27, 139, 140, 0.20)"})},[e("div",ht,[e("span",yt,$(D(t).resultData.level),1)]),e("div",vt,[e("div",{class:Z(["summary-wrap",(m=D(t).curData)==null?void 0:m.layout])},[(q=D(t).curData)!=null&&q.subtitle?(n(),i("h5",gt,$((S=D(t).curData)==null?void 0:S.subtitle),1)):U("",!0),e("div",bt,[e("h2",wt,$((y=D(t).curData)==null?void 0:y.name),1),e("p",kt,[e("span",$t,$((b=D(t).curData)==null?void 0:b.mockScore),1),e("span",Dt," / "+$((x=D(t).curData)==null?void 0:x.mockScoreTotal),1)])]),e("ul",Ct,[(n(!0),i(j,null,O((C=D(t).curData)==null?void 0:C.list,(r,c)=>(n(),i("li",{key:c,class:"list-none flex items-center justify-center flex-col"},[r.children?(n(),i(j,{key:0},[e("h2",qt,$(r.title),1),e("ul",St,[(n(!0),i(j,null,O(r.children,(l,w)=>(n(),i("li",{key:w,class:"flex flex-col items-center px-2"},[e("h4",Tt,$(l.title)+" 错题",1),e("p",At,[e("span",Bt,$(l.count),1),e("span",Mt," / "+$(l.total),1)])]))),128))])],64)):(n(),i(j,{key:1},[e("h2",Rt,$(r.title),1),r.isComputed?(n(),i("p",Ft,[e("span",jt,$(r.count),1),e("span",It," / "+$(r.total),1)])):(n(),i("p",Ot,Lt))],64))]))),128))])],2),(_=(k=D(t).curData)==null?void 0:k.tags)!=null&&_.length?(n(),i("div",Ht,[(n(!0),i(j,null,O((T=D(t).curData)==null?void 0:T.tags,(r,c)=>(n(),i("span",{key:c,class:"px-4 py-1.5 rounded-full text-gray-600 bg-[#E7EAEE] text-[16px] mx-2 mt-4"},$(r.name)+": "+$(r.sum)+"/"+$(r.count),1))),128))])):U("",!0),(o=D(t).curData)!=null&&o.aiComment?(n(),i("div",{key:1,style:te({background:"rgba(208, 240, 230, 0.50)"}),class:"rounded-md p-5 pt-6 mt-12 ai-comment relative text-gray-500 text-[16px] leading-6"},$((d=D(t).curData)==null?void 0:d.aiComment),5)):U("",!0)])],4)])}}}),Vt=le(zt,[["__scopeId","data-v-2d260523"]]);function Gt(p){var t;const s=ee(p);return(t=s==null?void 0:s.$el)!=null?t:s}const Be=Ae?window:void 0;function fe(...p){let t,s,f,h;if(typeof p[0]=="string"||Array.isArray(p[0])?([s,f,h]=p,t=Be):[t,s,f,h]=p,!t)return Ze;Array.isArray(s)||(s=[s]),Array.isArray(f)||(f=[f]);const m=[],q=()=>{m.forEach(x=>x()),m.length=0},S=(x,C,k,_)=>(x.addEventListener(C,k,_),()=>x.removeEventListener(C,k,_)),y=ie(()=>[Gt(t),ee(h)],([x,C])=>{if(q(),!x)return;const k=et(C)?{...C}:C;m.push(...s.flatMap(_=>f.map(T=>S(x,_,T,k))))},{immediate:!0,flush:"post"}),b=()=>{y(),q()};return tt(b),b}function Me(p,t={}){var s,f;const{pointerTypes:h,preventDefault:m,stopPropagation:q,exact:S,onMove:y,onEnd:b,onStart:x,initialValue:C,axis:k="both",draggingElement:_=Be,containerElement:T,handle:o=p}=t,d=F((s=ee(C))!=null?s:{x:0,y:0}),r=F(),c=v=>h?h.includes(v.pointerType):!0,l=v=>{ee(m)&&v.preventDefault(),ee(q)&&v.stopPropagation()},w=v=>{var g;if(!c(v)||ee(S)&&v.target!==ee(p))return;const B=ee(T),M=(g=B==null?void 0:B.getBoundingClientRect)==null?void 0:g.call(B),I=ee(p).getBoundingClientRect(),E={x:v.clientX-(B?I.left-M.left+B.scrollLeft:I.left),y:v.clientY-(B?I.top-M.top+B.scrollTop:I.top)};(x==null?void 0:x(E,v))!==!1&&(r.value=E,l(v))},a=v=>{var g;if(!c(v)||!r.value)return;const B=ee(T),M=(g=B==null?void 0:B.getBoundingClientRect)==null?void 0:g.call(B),I=ee(p).getBoundingClientRect();let{x:E,y:N}=d.value;(k==="x"||k==="both")&&(E=v.clientX-r.value.x,B&&(E=Math.min(Math.max(0,E),M.width+B.scrollLeft-I.width))),(k==="y"||k==="both")&&(N=v.clientY-r.value.y,B&&(N=Math.min(Math.max(0,N),M.height+B.scrollTop-I.height))),d.value={x:E,y:N},y==null||y(d.value,v),l(v)},A=v=>{c(v)&&r.value&&(r.value=void 0,b==null||b(d.value,v),l(v))};if(Ae){const v={capture:(f=t.capture)!=null?f:!0};fe(o,"pointerdown",w,v),fe(_,"pointermove",a,v),fe(_,"pointerup",A,v)}return{...Je(d),position:d,isDragging:X(()=>!!r.value),style:X(()=>`left:${d.value.x}px;top:${d.value.y}px;`)}}const Re=p=>(ce("data-v-0a7f7a66"),p=p(),ue(),p),Qt=["src"],Pt={class:"talk-box flex flex-col"},Nt={class:"w-full flex pl-[34px] pr-4 items-center justify-between h-[42px] bg-white"},Wt={class:"w-[68px] h-[68px] absolute -left-[34px]"},Yt=["src"],Xt={class:"text-[#475467] text-base font-semibold"},Ut=Re(()=>e("b",{class:"w-[14px] h-[3px] bg-[#1B8B8C] rounded-md"},null,-1)),Kt=[Ut],Jt={class:"flex-1 overflow-auto px-6 pt-4 tellList bg-[#F0F7F7]",ref:"messageContainer"},Zt={key:0,class:"bg-[#F0F7F7] h-[36px] overflow-x-auto overflow-y-hidden flex flex-nowrap items-center over-x px-2"},es={class:"flex h-[56px] items-center px-2"},ts=Re(()=>e("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("g",{id:"send-01"},[e("path",{id:"Icon",d:"M9.24537 11.25L17.9954 2.50002M9.35169 11.5234L11.5418 17.1551C11.7347 17.6512 11.8312 17.8993 11.9702 17.9717C12.0907 18.0345 12.2342 18.0345 12.3548 17.9719C12.4939 17.8997 12.5906 17.6517 12.7842 17.1558L18.2761 3.08269C18.4508 2.63504 18.5382 2.41121 18.4904 2.26819C18.4489 2.14398 18.3514 2.04651 18.2272 2.00501C18.0842 1.95723 17.8604 2.04458 17.4127 2.21927L3.33958 7.71122C2.84369 7.90474 2.59574 8.0015 2.52348 8.14059C2.46084 8.26116 2.46093 8.4047 2.52371 8.5252C2.59613 8.66421 2.84419 8.76067 3.34031 8.95361L8.97198 11.1437C9.07269 11.1829 9.12304 11.2024 9.16544 11.2327C9.20302 11.2595 9.23589 11.2924 9.2627 11.3299C9.29294 11.3723 9.31252 11.4227 9.35169 11.5234Z",stroke:"white","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),ss=J({__name:"float",props:{data:{}},setup(p){const t=F(null),s=F(null),f=p,h={toeflType:"",queryType:"",chatbotQuery:"","Main Content":"",mcq:"",problemMethod:""},m=F({left:0,right:0,top:0,bottom:0}),q=F(),{query:S}=oe(),{x:y,y:b,isDragging:x}=Me(q),C=F(0),k=F(0),_=F(!1),T=F(0),o=F(0),d=F(0),r=F(0),c=F(!1),l=F("");let w=0;const a=F([]),A=X(()=>{switch(S.type){case"read":return h.toeflType="Reading",[{title:"错题解析"},{title:"解题思路"},{title:"重点信息"},{title:"段落逻辑"}];case"hearing":return h.toeflType="Listening",[{title:"错题解析"},{title:"解题思路"},{title:"重点信息"},{title:"听力逻辑"}];case"spoken":return h.toeflType="Speaking",[];case"writing":return h.toeflType="Writing",[]}return[]});ie([y,b],()=>{if(!_.value){C.value=y.value,k.value=b.value;const u=document.body.getBoundingClientRect(),L=q.value.getBoundingClientRect();m.value.right=u.width-L.width,m.value.bottom=u.height-L.height,d.value=T.value,r.value=o.value}_.value=!0}),pe(()=>{_.value&&(T.value=d.value+Math.min(Math.max(m.value.left,y.value),m.value.right)-C.value,o.value=r.value+Math.min(Math.max(m.value.top,b.value),m.value.bottom)-k.value)}),ie(x,()=>{x||(_.value=!1)});const v=X(()=>({transform:`translate(${T.value}px, ${o.value}px)`})),g=()=>{c.value=!c.value},B=()=>{clearInterval(t.value),t.value=setInterval(()=>{s.value.scrollIntoView({behavior:"smooth"})},100)},M=()=>{clearInterval(t.value)};Se(()=>{clearInterval(t.value)});const I=u=>{var L,Q,Y,V,xe,ve;switch(S.type){case"read":return`${(L=u==null?void 0:u.question_parent)==null?void 0:L.question_content.join(`
`)} 

 ${u==null?void 0:u.detail.join(`
`)}`;case"hearing":return`${u==null?void 0:u.question_parent.voice_content} 

 ${u==null?void 0:u.question_content} 

 ${u==null?void 0:u.detail.join(`
`)}`;case"spoken":return`${((Q=u==null?void 0:u.question)==null?void 0:Q.question_content)||""} 

 ${((Y=u==null?void 0:u.question)==null?void 0:Y.title)||""} 

 ${((V=u==null?void 0:u.question)==null?void 0:V.voice_content)||""}`;case"writing":return`${(xe=u==null?void 0:u.question)==null?void 0:xe.question_content} 

 ${(ve=u==null?void 0:u.question)==null?void 0:ve.answer} `}},E=u=>{var L;switch(S.type){case"read":return u==null?void 0:u.question_content;case"hearing":return`${u==null?void 0:u.question_content}`;case"spoken":return"";case"writing":return(L=u==null?void 0:u.question)==null?void 0:L.question_title}},N=async u=>{B();const{clientId:L}=await Ke(u),Q=[],Y=new EventSource(`http://18.136.105.171:57875/v1/modelapi/assistantChatbot/${L}/`);Y.onmessage=function(V){Q.push(V.data.replace(/\[DONE!\]/,"")),V.data.match(/\[DONE!\]/)&&(a.value.push({type:"receive",id:w++,isEnd:!1,content:Q}),Y.close())}},W=()=>{if(!l.value)return;a.value.push({type:"send",id:w++,name:"",content:l.value});const u={...h,queryType:"其他问题",chatbotQuery:l.value,"Main Content":I(f.data)};N(u),l.value=""},z=u=>{const L=["错题解析","解题思路","重点信息"];a.value.push({type:"send",id:w++,name:"",content:u});const Q={...h,queryType:u,"Main Content":I(f.data),mcq:L.includes(u)?E(f.data):""};N(Q)};return(u,L)=>{const Q=P("a-button"),Y=P("a-input");return n(),i("div",{class:"fixed right-8 bottom-8 z-50",style:te(v.value)},[se(e("div",{class:"w-[60px] h-[60px]",onClick:Ee(g,["stop"]),ref_key:"modalTitleRef",ref:q},[e("img",{src:D(we),alt:"logo",class:"w-full h-full select-none",draggable:!1},null,8,Qt)],512),[[ne,!c.value]]),se(e("div",Pt,[e("header",Nt,[e("span",Wt,[e("img",{src:D(we),alt:"aiassistant",class:"w-full"},null,8,Yt)]),e("h2",Xt,$(u.$t("鹦鹉AI助教")),1),e("span",{class:"w-[18px] h-full cursor-pointer flex justify-center items-center",onClick:g},Kt)]),e("section",Jt,[(n(!0),i(j,null,O(a.value,V=>(n(),K(Ue,Le({key:V.id},V,{onAllEnd:M}),null,16))),128)),e("div",{ref_key:"bottom",ref:s},null,512)],512),A.value.length?(n(),i("section",Zt,[(n(!0),i(j,null,O(A.value,V=>(n(),K(Q,{class:"h-[24px] shrink-0 text-xs mx-[4px] border-[#B2DAC8] rounded-full",key:V.title,onClick:xe=>z(V.title)},{default:H(()=>[G($(V.title),1)]),_:2},1032,["onClick"]))),128))])):U("",!0),e("footer",es,[R(Y,{class:"flex-1 mr-3 h-[36px]",placeholder:"输入你想问的问题",value:l.value,"onUpdate:value":L[0]||(L[0]=V=>l.value=V),onKeyup:He(W,["enter"])},null,8,["value"]),R(Q,{type:"primary",class:"h-[36px] flex justify-center items-center",onClick:W},{default:H(()=>[R(D(ze),null,{component:H(()=>[ts]),_:1})]),_:1})])],512),[[ne,c.value]])],4)}}}),he=le(ss,[["__scopeId","data-v-0a7f7a66"]]),ns=["src"],os={class:"mt-3 overflow-hidden w-[300px] audio-bar"},ls={class:"h-2 bg-[#F2F2F2] rounded-full relative"},as={class:"flex justify-between mt-2 times"},rs={class:"text-xs text-[#1B8B8C]"},is={class:"text-xs text-[#BDBDBD]"},ye=J({__name:"index",props:{src:{},class:{}},setup(p){const t=F(!1),s=F(null),f=F(0),h=F(0),m=p,q=()=>{var _;f.value=((_=s.value)==null?void 0:_.duration)||0,t.value=!1},S=()=>{var _;t.value=!0,(_=m.ended)==null||_.call(m)},y=()=>{var _;h.value=s.value?(_=s.value)==null?void 0:_.currentTime:0},b=X(()=>ge(f.value||0)),x=X(()=>ge(h.value||0)),C=X(()=>`${h.value/f.value*100}%`),k=()=>{var _,T;t.value=!t.value,t.value?(_=s.value)==null||_.pause():(T=s.value)==null||T.play()};return Se(()=>{var _,T;(_=s.value)==null||_.pause(),(T=s.value)==null||T.remove(),s.value=null}),(_,T)=>(n(),i("div",{class:Z(["flex mt-6",m.class])},[e("audio",{controls:"false",class:"opacity-0 w-0 h-0",autoplay:"",onTimeupdate:y,onLoadedmetadata:q,onEnded:S,ref_key:"audioElement",ref:s},[e("source",{src:m.src,type:"audio/mpeg"},null,8,ns),G(" Your browser does not support the audio element. ")],544),e("span",{class:"w-[35px] h-[35px] rounded-full mr-4 flex justify-center items-center cursor-pointer overflow-hidden bg-[#F0F7F7]",style:{border:"1px solid #1B8B8C"},onClick:k},[se(R(D(st),{class:"text-[24px] text-[#1B8B8C] ml-[4px] mt-0"},null,512),[[ne,t.value]]),se(R(D(nt),{class:"text-[18px] text-[#1B8B8C]"},null,512),[[ne,!t.value]])]),e("div",os,[e("div",ls,[e("div",{class:"absolute left-0 top-0 h-full rounded-full bg-[#1B8B8C]",style:te({width:C.value})},null,4)]),e("p",as,[e("span",rs,$(x.value),1),e("span",is,$(b.value),1)])])],2))}}),cs=p=>(ce("data-v-e6c446d4"),p=p(),ue(),p),us={class:"flex flex-1 overflow-hidden bg-white"},ds={class:"flex-1 h-full overflow-hidden pt-2",style:{borderRight:"1px solid #D0D5DD"}},ps={ref:"contentDiv",id:"content",class:"content-box h-[70%] overflow-y-auto w-full"},_s=["innerHTML"],xs={class:"mt-4 mx-8"},fs=cs(()=>e("h4",{class:"text-[#667085] font-normal text-base mb-4"},"播放听力材料",-1)),ms={class:"flex-1 h-full overflow-h-auto overflow-x-hidden px-12 py-7"},hs={class:"text-gray-500 text-[18px] pb-10 font-bold"},ys=["innerHTML"],vs=["value"],gs={class:"flex-1"},bs=J({__name:"HearingReview",props:{answerData:{}},setup(p){const t=p;return(s,f)=>{var h,m,q,S;return n(),i(j,null,[e("div",us,[e("div",ds,[e("div",ps,[(n(!0),i(j,null,O((h=t.answerData)==null?void 0:h.question_parent.voice_content.split(/\n/),(y,b)=>(n(),i("p",{class:Z(["px-8 text-gray-500 text-[18px] leading-7 pb-4 indent-8","read-mock-content-"+(b+1)]),innerHTML:y,key:b},null,10,_s))),128))],512),e("div",xs,[fs,R(ye,{src:(m=t.answerData)==null?void 0:m.question_parent.voice_link},null,8,["src"])])]),e("div",ms,[e("h1",hs,[e("p",{innerHTML:(q=t.answerData)==null?void 0:q.question_content},null,8,ys)]),e("div",null,[(n(!0),i(j,null,O((S=t.answerData)==null?void 0:S.detail,(y,b)=>{var x,C,k,_,T;return n(),i("div",{key:b,value:b,class:"flex pb-7 text-gray-500"},[e("span",{class:Z(["w-5 h-5 rounded-full mr-4 opt-status",{error:((x=t.answerData)==null?void 0:x.answer[b])!==((C=t.answerData)==null?void 0:C.answer_weight[b])&&((k=t.answerData)==null?void 0:k.answer[b])===1,default:(_=t.answerData)==null?void 0:_.answer[b],success:((T=t.answerData)==null?void 0:T.answer_weight[b])===1}])},null,2),e("p",gs,$(y),1)],8,vs)}),128))])])]),R(he,{data:t.answerData},null,8,["data"])],64)}}}),ws=le(bs,[["__scopeId","data-v-e6c446d4"]]),ks=p=>(ce("data-v-04e78ccf"),p=p(),ue(),p),$s=ks(()=>e("span",{class:"text-[#475467]"},"快速导航",-1)),Ds={class:"flex flex-col"},Cs={class:"text-[#667085] text-base font-normal"},qs={class:"flex pl-3"},Ss=["onClick"],Ts={class:"text-[#333333] font-normal text-base h-full absolute left-0 w-[100px] flex justify-center items-center",style:{borderRight:"1px solid #B2DAC8"}},As={class:"text-[#667085] text-base font-normal w-[120px]"},Bs={class:"flex pl-3"},Ms=["onClick"],Rs={class:"h-10 flex justify-between items-center px-2"},Fs=J({__name:"QuestionNav",props:{onChangeQues:{type:Function}},setup(p){const t=p,{query:s}=oe(),f=ae(),h=F(),{x:m,y:q,isDragging:S}=Me(h),y=F(0),b=F(0),x=F(!1),C=F(0),k=F(0),_=F(0),T=F(0),o=F(!1),d=F({left:0,right:0,top:0,bottom:0});ie([m,q],()=>{if(!x.value){y.value=m.value,b.value=q.value;const c=document.body.getBoundingClientRect(),l=h.value.getBoundingClientRect();d.value.right=c.width-l.width,d.value.bottom=c.height-l.height,_.value=C.value,T.value=k.value}x.value=!0}),ie(S,()=>{S||(x.value=!1)}),pe(()=>{x.value&&(C.value=_.value+Math.min(Math.max(d.value.left,m.value),d.value.right)-y.value,k.value=T.value+Math.min(Math.max(d.value.top,q.value),d.value.bottom)-b.value)});const r=X(()=>({transform:`translate(${C.value}px, ${k.value}px)`}));return(c,l)=>{var w,a;return n(),i("div",{class:"absolute right-40 bottom-20 z-40 flex flex-col bg-white shadow-[0px_2px_20px_10px_rgba(0,0,0,0.1)] min-w-52 rounded-xl",style:te(r.value)},[e("header",{class:"h-10 flex justify-between items-center pl-4 pr-2 cursor-move border-solid border-[#B2DAC8] border-x-0 border-t-0 border-[1px]",ref_key:"modalTitleRef",ref:h},[$s,e("span",{class:Z(["size-icon cursor-pointer",{min:!o.value,max:o.value}]),onClick:l[0]||(l[0]=A=>o.value=!o.value)},null,2)],512),e("main",{class:Z(["flex-1 flex flex-col before:content-[''] border-solid border-[#B2DAC8] border-x-0 border-t-0 border-[1px]",{hidden:o.value}])},[e("section",Ds,[D(s).type==="read"?(n(!0),i(j,{key:0},O((w=D(f).resultData.questions_r)==null?void 0:w.questions,(A,v)=>(n(),i("div",{key:c.i,class:"p-2 flex items-center"},[e("h4",Cs,"Passage "+$(A==null?void 0:A.order),1),e("div",qs,[(n(!0),i(j,null,O(A.children,(g,B)=>(n(),i("span",{key:g.question_id,onClick:M=>t.onChangeQues(2,v,B),class:Z(["w-5 h-5 mx-1 rounded-full shrink-0 text-[11px] flex justify-center items-center text-[#475467] cursor-pointer border border-solid border-[#475467]",{"bg-[#c22c66] text-[#fff] border-[#c22c66]":!(g.score>0)}])},$(B+1),11,Ss))),128))])]))),128)):U("",!0),D(s).type==="hearing"?(n(!0),i(j,{key:1},O((a=D(f).resultData)==null?void 0:a.allData[0].list,(A,v)=>{var g;return n(),i("div",{class:"b-b-1 pl-[100px] relative",key:v},[e("h3",Ts,$(A.title),1),e("div",null,[(n(!0),i(j,null,O((g=D(f).resultData.questions_r)==null?void 0:g.questions.slice(v*3,v*3+3),(B,M)=>{var I;return n(),i("div",{key:M,class:"p-2 flex items-center"},[e("h4",As,$((I=A.children[M])==null?void 0:I.title),1),e("div",Bs,[(n(!0),i(j,null,O(B.children,(E,N)=>(n(),i("span",{key:E.question_id,onClick:W=>t.onChangeQues(2,M,N),class:Z(["w-5 h-5 mx-1 rounded-full shrink-0 text-[11px] flex justify-center items-center text-[#475467] cursor-pointer border border-solid border-[#475467]",{"bg-[#c22c66] text-[#fff] border-[#c22c66]":!(E.score>0)}])},$(N+1),11,Ms))),128))])])}),128))])])}),128)):U("",!0)])],2),e("footer",Rs,[e("span",{class:"before:content-['<'] before:mr-2 block text-[#1B8B8C] cursor-pointer",onClick:l[1]||(l[1]=A=>t.onChangeQues(-1))},"上一题"),e("span",{class:"after:content-['>'] after:ml-2 block text-[#1B8B8C] cursor-pointer",onClick:l[2]||(l[2]=A=>t.onChangeQues(1))},"下一题")])],4)}}}),js=le(Fs,[["__scopeId","data-v-04e78ccf"]]),Is={class:"flex flex-1 overflow-hidden bg-white"},Os={class:"w-1/2 h-full overflow-h-auto overflow-x-hidden pt-2",style:{borderRight:"1px solid #D0D5DD"}},Es=["innerHTML"],Ls={class:"w-1/2 h-full overflow-h-auto overflow-x-hidden px-12 py-7"},Hs={class:"text-gray-500 text-[18px] pb-10 font-bold"},zs=["innerHTML"],Vs={key:0,class:"text-green-1 text-[18px]"},Gs=["value"],Qs={class:"flex-1"},Ps=J({__name:"ReadReview",props:{answerData:{}},setup(p){const t=F(null),s=p;return pe(()=>{var S,y,b,x,C,k,_,T,o,d,r,c,l,w,a;const f=(y=(S=s.answerData)==null?void 0:S.keywords)==null?void 0:y.p,h=(x=(b=s.answerData)==null?void 0:b.keywords)==null?void 0:x.k,m=(k=(C=s.answerData)==null?void 0:C.keywords)==null?void 0:k.s,q=Array.isArray(f)?f[0]:f;if(q){const A=(T=(_=s.answerData)==null?void 0:_.question_parent)==null?void 0:T.question_content[q-1],v=(o=t.value)==null?void 0:o.querySelectorAll("p"),g=(d=t.value)==null?void 0:d.querySelector(".read-mock-content-"+q);if(v==null||v.forEach((B,M)=>{var I,E;B.innerHTML=(E=(I=s.answerData)==null?void 0:I.question_parent)==null?void 0:E.question_content[M]}),h&&h!=="$$"&&g&&(g.innerHTML=A.replace(new RegExp(h,"g"),`<b class="bg-[rgba(253,212,78,0.3)]">${h}</b>`)),m&&f&&h!=="$$"&&g&&(g.innerHTML=A.replace(new RegExp(m,"g"),`<b class="bg-[rgba(253,212,78,0.3)]">${m}</b>`)),h==="$$"&&m&&f&&g){const B=(c=(r=s.answerData)==null?void 0:r.answer)==null?void 0:c.findIndex(I=>I===1);let M=-1;g.innerHTML=(w=(l=s.answerData)==null?void 0:l.question_parent)==null?void 0:w.original_question_content[q-1].replace(/\$\$/g,(I,E)=>(M++,M===B?`<span class="fill-item" data-index="${M}">【 <em>${m}</em> 】</span>`:`<span class="fill-item" data-index="${M}">【 <b></b> 】</span>`))}g==null||g.scrollIntoView({behavior:"smooth",block:"start"})}else(a=t.value)==null||a.scrollTo(0,0)},{flush:"post"}),(f,h)=>{var m,q,S,y;return n(),i(j,null,[e("div",Is,[e("div",Os,[e("div",{ref_key:"contentDiv",ref:t,id:"content",class:"content-box"},[(n(!0),i(j,null,O((m=s.answerData)==null?void 0:m.question_parent.question_content,(b,x)=>{var C,k,_,T,o,d,r;return n(),i("p",{class:Z(["px-8 text-gray-500 text-[18px] leading-7 pb-4 indent-8",["read-mock-content-"+(x+1),{active:typeof((k=(C=s.answerData)==null?void 0:C.keywords)==null?void 0:k.p)=="number"?((T=(_=s.answerData)==null?void 0:_.keywords)==null?void 0:T.p)===x+1:((r=(d=(o=s.answerData)==null?void 0:o.keywords)==null?void 0:d.p)==null?void 0:r[0])===x+1}]]),innerHTML:b,key:x},null,10,Es)}),128))],512)]),e("div",Ls,[e("h1",Hs,[e("p",{innerHTML:(S=(q=s.answerData)==null?void 0:q.question_content)==null?void 0:S.replace(/\[▇\]/g,"<span class='fill-item'>【<b></b>】</span>")},null,8,zs)]),s.answerData.keywords.k==="$$"?(n(),i("h2",Vs,$(s.answerData.keywords.s||"keywords.s is not defined"),1)):U("",!0),e("div",null,[(n(!0),i(j,null,O((y=s.answerData)==null?void 0:y.detail,(b,x)=>{var C,k,_,T,o;return n(),i("div",{key:x,value:x,class:"flex pb-7 text-gray-500"},[e("span",{class:Z(["w-5 h-5 rounded-full mr-4 opt-status",{error:((C=s.answerData)==null?void 0:C.answer[x])!==((k=s.answerData)==null?void 0:k.answer_weight[x])&&((_=s.answerData)==null?void 0:_.answer[x])===1,default:(T=s.answerData)==null?void 0:T.answer[x],success:((o=s.answerData)==null?void 0:o.answer_weight[x])===1}])},null,2),e("p",Qs,$(b),1)],8,Gs)}),128))])])]),R(he,{data:s.answerData},null,8,["data"])],64)}}}),Ns=le(Ps,[["__scopeId","data-v-e315bb72"]]),Ws="/assets/result-icon-424tIPlS.png",re=p=>(ce("data-v-59d6571a"),p=p(),ue(),p),Ys={class:"flex-1 w-full h-full overflow-hidden relative z-20 flex flex-col"},Xs=["src"],Us={class:"flex"},Ks={class:"h-[50px] bg-[#F0F7F7] w-full pl-[128px] pr-[100px]"},Js={key:0,class:"text-[#475467] truncate mt-1"},Zs=re(()=>e("b",null,"Question: ",-1)),en=re(()=>e("span",{class:"text-xs text-[rgba(0,0,0,0.50)]"},"评分",-1)),tn={class:"text-[#475467] text-[14px]"},sn={class:"text-[20px]"},nn=re(()=>e("span",{class:"text-xs text-[rgba(0,0,0,0.50)]"},"评分",-1)),on={class:"text-[#475467] text-[14px]"},ln={class:"text-[20px]"},an={class:"flex-1 overflow-hidden bg-white w-full flex"},rn={class:"w-1/2 relative flex flex-col relative",style:{borderRight:"1px solid #D0D5DD"}},cn={key:0,class:"text-[#667085] font-base py-4 pl-[128px] text-base"},un={key:1,class:"text-[#667085] font-base py-4 pl-[128px] text-base flex items-center overflow-hidden"},dn=re(()=>e("span",{class:"mr-4 mt-4"},"原版录音与文字转换",-1)),pn=["onMouseover","onMouseleave"],_n={class:"absolute top-[2px] -ml-[34px] text-[#1B8B8C] w-[20px] h-[20px] text-xs border border-[#1B8B8C] border-solid rounded-full flex justify-center items-center"},xn={class:"w-1/2 relative"},fn={class:"absolute top-[2px] -ml-[34px] text-[#1B8B8C] w-[20px] h-[20px] text-xs border border-[#1B8B8C] border-solid rounded-full flex justify-center items-center"},mn=re(()=>e("h4",{class:"text-base text-[#667085]"},"Mind Map",-1)),hn={class:"bg-[#F0F7F7] h-[124px] flex justify-between items-center px-10"},yn=re(()=>e("h2",{class:"text-[#667085] text-base pb-2"},"问题标注",-1)),vn={class:"flex"},gn={class:"mx-2 font-normal text-[#667085]"},bn={class:"h-[70px] bg-white shadow-[0px_4.4px_22px_0px_rgba(0,0,0,0.10)] flex px-5 py-2 rounded-xl"},wn=["onClick"],kn=J({__name:"AnnotationView",props:{data:{},onViewOrigin:{type:Function},onBack:{type:Function}},setup(p){const t=F(!0),s=ae(),f=F(null),h=p,m=F(0),q=F(0),{query:S}=oe(),y=X(()=>h.data[m.value]),b=()=>{t.value=!t.value},x=(C,k,_)=>{t.value&&s.showHoverMark(C,k,m.value,_)};return(C,k)=>{var c,l,w,a,A,v,g,B,M,I,E,N,W;const _=P("a-button"),T=P("b-header"),o=P("a-tooltip"),d=P("a-tab-pane"),r=P("a-tabs");return n(),i(j,null,[e("div",Ys,[R(T,{title:y.value.name},{center:H(()=>[e("img",{src:D(Ws),alt:"logo",width:"184px",class:"-top-2 fixed left-1/2 -translate-x-1/2"},null,8,Xs)]),right:H(()=>[e("div",Us,[R(_,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center"},{default:H(()=>[e("span",{onClick:b},[se(R(D(Ve),{class:"mr-1.5"},null,512),[[ne,t.value]]),G(),se(R(D(Ge),{class:"mr-1.5"},null,512),[[ne,!t.value]]),G(" "+$(t.value?"隐藏批注":"查看批注"),1)])]),_:1}),R(_,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:k[0]||(k[0]=()=>h.onViewOrigin(y.value))},{default:H(()=>[e("span",null,[G("查看原题"),R(D(Te),{class:"ml-1.5"})])]),_:1}),R(_,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:h.onBack},{default:H(()=>[e("span",null,[R(D(_e),{class:"mr-1.5"}),G("查看报告")])]),_:1},8,["onClick"])])]),_:1},8,["title"]),e("div",Ks,[D(S).type==="spoken"?(n(),i("p",Js,[Zs,G($((l=(c=y.value)==null?void 0:c.question)==null?void 0:l.question_title),1)])):U("",!0)]),e("div",{class:"w-[80px] h-[80px] bg-white fixed right-[calc(50vw+20px)] z-100 rounded-full flex flex-col justify-center items-center",style:te({border:"10px solid #F0F7F7",top:D(S).type==="spoken"?"95px":"82px"})},[en,e("p",tn,[e("span",sn,$((a=(w=y.value)==null?void 0:w.model_answer_content)==null?void 0:a.Overall),1),G(" / "+$((A=y.value)==null?void 0:A.mockScoreTotal),1)])],4),e("div",{class:"w-[80px] h-[80px] bg-white fixed right-[20px] z-100 rounded-full flex flex-col justify-center items-center",style:te({border:"10px solid #F0F7F7",top:D(S).type==="spoken"?"95px":"82px"})},[nn,e("p",on,[e("span",ln,$(((g=(v=y.value)==null?void 0:v.model_answer_content)==null?void 0:g["Edited Overall"])||((B=y.value)==null?void 0:B.mockScoreTotal)),1),G(" / "+$((M=y.value)==null?void 0:M.mockScoreTotal),1)])],4),e("div",an,[e("div",rn,[D(S).type==="writing"?(n(),i("h2",cn,"原版")):(n(),i("h2",un,[dn,R(ye,{src:(I=y.value)==null?void 0:I.question.answer_voice_link,class:"my-audio"},null,8,["src"])])),e("div",{class:"overflow-y-auto flex-1 w-full pl-[128px] pr-[68px]",ref_key:"all_p",ref:f},[(n(!0),i(j,null,O((N=(E=y.value)==null?void 0:E.model_answer_content)==null?void 0:N.sent_back,(z,u)=>(n(),i("div",{key:u,class:"mb-5 text-base relative all-ps"},[(n(!0),i(j,null,O(z,(L,Q)=>(n(),i("p",{key:Q,class:"relative text-base",style:te(t.value?L.curStyle:{}),onMouseover:()=>x(Q,u,"hover"),onMouseleave:()=>x(Q,u,"leave")},[e("span",_n,$(Q),1),R(o,{placement:"bottomRight",overlayInnerStyle:{"margin-top":"-10px",background:"#D0F0E6",color:"#0A3F64",fontSize:"12px",borderRadius:"15px",borderTopLeftRadius:"0",border:"1px solid #0A3F64",marginTop:"-20px",marginLeft:"3px",padding:"10px"}},{title:H(()=>[e("div",null,$(L.Feedback),1)]),default:H(()=>[G(" "+$(L.original),1)]),_:2},1024)],44,pn))),128))]))),128))],512)]),e("div",xn,[R(r,{activeKey:q.value,"onUpdate:activeKey":k[1]||(k[1]=z=>q.value=z),class:"my-table"},{default:H(()=>[(n(),K(d,{key:0,tab:"AI 批改"},{default:H(()=>{var z,u;return[(n(!0),i(j,null,O((u=(z=y.value)==null?void 0:z.model_answer_content)==null?void 0:u.sent_back,(L,Q)=>(n(),i("div",{key:Q,class:"text-base relative mb-5"},[(n(!0),i(j,null,O(L,(Y,V)=>(n(),i("p",{key:V,class:"relative text-base",style:te(t.value?Y.curStyle:{})},[e("span",fn,$(V),1),G(" "+$(Y.Edited),1)],4))),128))]))),128))]}),_:1})),(n(),K(d,{key:1,tab:"AI 点评"},{default:H(()=>{var z,u,L,Q;return[(n(!0),i(j,null,O((u=(z=y.value)==null?void 0:z.model_answer_content)==null?void 0:u.format_G_F,(Y,V)=>(n(),i("div",{key:V,class:"text-base mb-4 text-[#667085]"},[e("h4",null,$(V),1),e("p",null,$(Y),1)]))),128)),mn,(n(!0),i(j,null,O((Q=(L=y.value)==null?void 0:L.model_answer_content)==null?void 0:Q.format_M_M,(Y,V)=>(n(),i("p",{key:V,class:"text-base mb-4 text-[#667085]"},$(Y),1))),128))]}),_:1}))]),_:1},8,["activeKey"])])]),e("footer",hn,[e("div",null,[yn,e("div",vn,[(n(!0),i(j,null,O((W=y.value)==null?void 0:W.ques_mark,z=>(n(),i("div",{key:z.id,class:"flex text-base"},[e("p",{style:te(z.style)},"Aa",4),e("b",gn,$(z.type),1)]))),128))])]),e("div",bn,[(n(!0),i(j,null,O(h.data,(z,u)=>(n(),i("div",{onClick:L=>m.value=u,key:u,class:Z(["h-full flex items-center justify-center px-8 cursor-pointer text-[#2C285B] rounded-xl",{"bg-[rgba(208,240,230,0.50)] font-medium":m.value===u}])},$(z.name),11,wn))),128))])])]),R(he,{data:y.value},null,8,["data"])],64)}}}),Fe=le(kn,[["__scopeId","data-v-59d6571a"]]),$n={class:"w-full h-full overflow-hidden fixed top-0 left-0 z-30 flex flex-col bg-white"},Dn={class:"flex"},Cn={class:"flex flex-1 overflow-hidden"},qn={class:"w-1/2 text-base h-full overflow-y-auto px-10 pt-10",style:{borderRight:"1px solid #D0D5DD"}},Sn={key:0},Tn={class:"text-base mb-4 text-[#475467]"},An=e("h4",{class:"text-[#667085] font-normal text-base mb-4"},"播放听力材料",-1),Bn={class:"w-1/2 flex flex-col overflow-y-auto px-[80px] pt-[20px] text-[#475467] text-base"},Mn={class:"my-6"},Rn=e("b",null,"Question：",-1),Fn={key:0},jn=e("b",{class:"mb-2 block"},"口语阅读原文",-1),In=J({__name:"SpokenOriginView",props:{data:{},onExit:{type:Function}},setup(p){const t=p;return console.log(t.data),(s,f)=>{var S,y,b,x,C,k,_,T,o,d,r,c,l,w,a;const h=P("a-button"),m=P("b-header"),q=P("BQuesTitle");return n(),i("div",$n,[R(m,{title:(S=t.data)==null?void 0:S.name},{right:H(()=>[e("div",Dn,[R(h,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:t.onExit},{default:H(()=>[e("span",null,[R(D(_e),{class:"mr-1.5"}),G("查看批注")])]),_:1},8,["onClick"])])]),_:1},8,["title"]),R(q,{title:"口语听力原文",index:(y=t.data)==null?void 0:y.curIndex,length:(b=t.data)==null?void 0:b.length},null,8,["index","length"]),e("div",Cn,[e("div",qn,[(C=(x=t.data)==null?void 0:x.question)!=null&&C.voice_content?(n(),i("div",Sn,[(n(!0),i(j,null,O((T=(_=(k=t.data)==null?void 0:k.question)==null?void 0:_.voice_content)==null?void 0:T.split(`
`),A=>(n(),i("p",Tn,$(A),1))),256))])):U("",!0),An,R(ye,{src:(o=t.data)==null?void 0:o.question.answer_voice_link},null,8,["src"])]),e("div",Bn,[e("p",Mn,[Rn,G(" "+$((d=t.data)==null?void 0:d.question.question_title),1)]),(c=(r=t.data)==null?void 0:r.question)!=null&&c.question_content?(n(),i("div",Fn,[jn,(n(!0),i(j,null,O((a=(w=(l=t.data)==null?void 0:l.question)==null?void 0:w.question_content)==null?void 0:a.split(`
`),(A,v)=>(n(),i("p",{class:"mb-4",key:v},$(A),1))),128))])):U("",!0)])])])}}}),On=J({__name:"SpokenReview",setup(p){const t=ae(),s=de({open:!1,data:{}}),f=q=>{s.open=!0,s.data=q},h=()=>{t.setShowAnswerHistoryDialog()},m=()=>{s.open=!1,s.data={}};return(q,S)=>s.open?(n(),K(In,{key:0,data:s.data,onExit:m},null,8,["data"])):(n(),K(Fe,{key:1,data:D(t).resultData.allData.slice(1),onViewOrigin:f,onBack:h},null,8,["data"]))}}),En={class:"w-full h-full overflow-hidden fixed top-0 left-0 z-30 flex flex-col bg-white"},Ln={class:"flex"},Hn=e("div",{class:"h-[100px]"},[e("div",{class:"text-base"},[e("p",{class:"bg-[#F6F6F6] px-10 py-2"},[e("b",null,"Directions:"),G(" You have 20 minutes to plan and write your response. Your response will be judged on the basis of the quality of your writing and on how well your response presents the points in the lecture and their relationship to the reading passage. Typically, an effective response will be 150 to 225 words. ")]),e("p",{class:"px-10 py-1"},[e("b",null,"Question: "),G("Summarize the points made in the lecture, being sure to explain how they cast doubt on the specific points made in the reading passage. ")])])],-1),zn={class:"flex flex-1 overflow-hidden",style:{borderTop:"1px solid #D0D5DD"}},Vn={class:"w-1/2 text-base h-full overflow-y-auto px-10 pt-10",style:{borderRight:"1px solid #D0D5DD"}},Gn={class:"w-1/2 flex flex-col overflow-hidden"},Qn={key:1,class:"flex text-base flex-1"},Pn={class:"flex w-1/2 flex-col py-10 px-10 text-[#475467]"},Nn={class:"flex w-1/2 flex-col py-4",style:{borderLeft:"1px solid #D0D5DD"}},Wn=J({__name:"WritingOriginView",props:{data:{},onExit:{type:Function}},setup(p){const t=p;console.log(t.data);const s=X(()=>{var m,q,S,y,b,x;const f=/\n?[a-zA-z\s]+:/g,h=(S=(q=(m=t.data)==null?void 0:m.question)==null?void 0:q.question_content)==null?void 0:S.match(f);return(x=(b=(y=t.data)==null?void 0:y.question)==null?void 0:b.question_content)==null?void 0:x.split(f).slice(1).map((C,k)=>({name:h[k].replace(/:/g,"").replace(/\n/g,""),content:C.split(/\n/g)}))});return(f,h)=>{var y,b,x,C,k,_,T,o,d,r,c,l,w,a,A,v,g;const m=P("a-button"),q=P("b-header"),S=P("BQuesTitle");return n(),i("div",En,[R(q,{title:(y=t.data)==null?void 0:y.name},{right:H(()=>[e("div",Ln,[R(m,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:t.onExit},{default:H(()=>[e("span",null,[R(D(_e),{class:"mr-1.5"}),G("查看批注")])]),_:1},8,["onClick"])])]),_:1},8,["title"]),R(S,{title:(b=t.data)==null?void 0:b.name,index:(x=t.data)==null?void 0:x.curIndex,length:(C=t.data)==null?void 0:C.length},null,8,["title","index","length"]),((k=t.data)==null?void 0:k.name)==="Integrated Writing"?(n(),i(j,{key:0},[Hn,e("div",zn,[e("div",Vn,[(n(!0),i(j,null,O((o=(T=(_=t.data)==null?void 0:_.question)==null?void 0:T.question_content)==null?void 0:o.split(`
`),(B,M)=>(n(),i("p",{class:"text-[#475467] text-base pb-4 indent-8",key:M},$(B),1))),128))]),e("div",Gn,[R(ot,{title:"Please listen carefully.",url:(r=(d=t.data)==null?void 0:d.question)==null?void 0:r.voice_link,img:"1",class:"mt-20",ended:()=>{}},null,8,["url"])])])],64)):U("",!0),((c=t.data)==null?void 0:c.name)==="Academic discussion"?(n(),i("div",Qn,[e("div",Pn,[(n(!0),i(j,null,O((a=(w=(l=t.data)==null?void 0:l.question)==null?void 0:w.question_title)==null?void 0:a.split(`
`),(B,M)=>(n(),i("div",{key:M},$(B),1))),128)),R(ke,{src:D(lt),class:"my-10",name:(A=s.value[0])==null?void 0:A.name,size:80},null,8,["src","name"]),e("div",null,[(n(!0),i(j,null,O((v=s.value[0])==null?void 0:v.content,(B,M)=>(n(),i("p",{key:M},$(B),1))),128))])]),e("div",Nn,[(n(!0),i(j,null,O((g=s.value)==null?void 0:g.slice(1),(B,M)=>(n(),i("div",{key:M,class:"text-[#475467] text-base flex mb-4 items-start"},[R(ke,{src:M==0?D(at):D(rt),class:"mx-10",name:B.name,size:80},null,8,["src","name"]),e("div",null,[(n(!0),i(j,null,O(B.content,(I,E)=>(n(),i("p",{key:E},$(I),1))),128))])]))),128))])])):U("",!0)])}}}),Yn=J({__name:"WritingReview",setup(p){const t=ae(),s=de({open:!1,data:{}}),f=q=>{s.open=!0,s.data=q},h=()=>{t.setShowAnswerHistoryDialog()},m=()=>{s.open=!1,s.data={}};return(q,S)=>s.open?(n(),K(Wn,{key:0,data:s.data,onExit:m},null,8,["data"])):(n(),K(Fe,{key:1,data:D(t).resultData.allData.slice(1),onViewOrigin:f,onBack:h},null,8,["data"]))}}),Xn={class:"bg-green-2 px-6 py-4 flex justify-between items-center"},Un={class:"font-normal text-xl text-gray-900"},Kn={class:"flex-1 overflow-hidden flex flex-col"},Jn=J({__name:"AnswerReview",setup(p){const t=ae(),s=F(0),f=oe(),h={read:Ns,hearing:ws,writing:Yn,spoken:On},m=X(()=>(console.log(t.resultData.format_question),t.resultData.format_question[s.value])),q=X(()=>h[f.query.type]||null),S=()=>{t.setShowAnswerHistoryDialog()},y=(b,x,C)=>{b===1||b===-1?(s.value+=b,s.value<0&&(s.value=0),s.value>=t.resultData.format_question.length&&(s.value=t.resultData.format_question.length-1)):s.value=t.resultData.questions_r.questions[x].children.length*x+C};return(b,x)=>{const C=P("a-button"),k=P("BQuesTitle"),_=P("a-layout");return n(),K(_,{class:"w-full h-full flex flex-col absolute top-0 left-0 bg-green-2 z-50"},{default:H(()=>{var T,o,d,r;return[se(e("header",Xn,[e("div",Un,[R(D(Qe),{class:"pr-2",onClick:S}),G(" 返回 ")]),R(C,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:S},{default:H(()=>[e("span",null,[R(D(_e)),G($(" ")+$(" ")+"查看报告")])]),_:1})],512),[[ne,D(f).query.type==="read"||D(f).query.type==="hearing"]]),e("div",Kn,[se(R(k,{title:(o=(T=m.value)==null?void 0:T.question_parent)==null?void 0:o.question_title,index:s.value+1,length:(r=(d=D(t).resultData)==null?void 0:d.format_question)==null?void 0:r.length},null,8,["title","index","length"]),[[ne,D(f).query.type==="read"||D(f).query.type==="hearing"]]),(n(),K(Pe(q.value),{answerData:m.value},null,8,["answerData"]))]),D(f).query.type==="read"||D(f).query.type==="hearing"?(n(),K(js,{key:0,onChangeQues:y})):U("",!0)]}),_:1})}}}),Zn=le(Jn,[["__scopeId","data-v-19fd66c4"]]),eo={class:"flex"},to={class:"flex-1 bg-green-2"},so={class:"flex items-center justify-center pt-28"},no={class:"flex items-center justify-center mt-10 gap-6"},_o=J({__name:"index",setup(p){const t=ae(),s=oe(),f=Ne();pe(async()=>{await t.getExamResult(s.params.sheetId)});const h=()=>{f.replace("/")},m=()=>{t.setShowAnswerHistoryDialog()},q=S=>{t.resultData.footerActiveIndex=S};return(S,y)=>{const b=P("a-spin"),x=P("a-button"),C=P("b-header"),k=P("a-layout");return D(t).resultData.loading?(n(),K(b,{key:0,size:"large",tip:"成绩计算中...",class:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50"})):(n(),i(j,{key:1},[D(t).showAnswerHistoryDialog?(n(),K(Zn,{key:0})):U("",!0),R(k,{class:"w-full h-full flex flex-col relative z-40"},{default:H(()=>[R(C,{title:D(t).resultData.title},{right:H(()=>[e("div",eo,[R(x,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center bg-[#B2DAC8] text-[#1B8B8C]",onClick:h},{default:H(()=>[e("span",null,[R(D(We)),G("返回主页")])]),_:1}),R(x,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:m},{default:H(()=>[e("span",null,[G("回顾答案"),R(D(Te))])]),_:1})])]),_:1},8,["title"]),e("div",to,[e("div",so,[R(Vt)]),e("footer",no,[(n(!0),i(j,null,O(D(t).footerData,(_,T)=>(n(),K(x,{onClick:o=>q(T),key:_.id,class:Z(["h-10 min-w-[130px] text-[#A6AAB3] border-[#EAECF0]",{"!border-[#1B8B8C] shadow-lg !text-[#1B8B8C]":T===D(t).resultData.footerActiveIndex}])},{default:H(()=>[G($(_.title),1)]),_:2},1032,["onClick","class"]))),128))])])]),_:1})],64))}}});export{_o as default};
