import{u as N}from"./exam-PI_qIqRJ.js";import{d as Z,r as q,G as X,N as Y,v as w,b as y,c as e,e as a,f as l,u as f,t,i as b,j as v,l as c,O as R,P as T,y as I,h as L,k as M,F as C,g as V,n as F,af as e2,al as t2,B as a2,z as s2,A as o2,o as n2,m as l2}from"./index-n7EdvtcO.js";import{h as z}from"./hint-osXcIIjs.js";import{_ as K}from"./_plugin-vue_export-helper-x3n3nnut.js";const r2="data:image/svg+xml,%3csvg%20width='17'%20height='17'%20viewBox='0%200%2017%2017'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.3958%203.00652L13.1599%204.77069M12.5299%201.45236L7.75742%206.22486C7.51083%206.4711%207.34265%206.78484%207.27409%207.12652L6.83325%209.33319L9.03992%208.89152C9.38159%208.82319%209.69492%208.65569%209.94159%208.40902L14.7141%203.63652C14.8575%203.49311%2014.9713%203.32285%2015.0489%203.13547C15.1265%202.94809%2015.1664%202.74726%2015.1664%202.54444C15.1664%202.34162%2015.1265%202.14079%2015.0489%201.95341C14.9713%201.76603%2014.8575%201.59577%2014.7141%201.45236C14.5707%201.30894%2014.4004%201.19518%2014.213%201.11756C14.0257%201.03995%2013.8248%201%2013.622%201C13.4192%201%2013.2184%201.03995%2013.031%201.11756C12.8436%201.19518%2012.6733%201.30894%2012.5299%201.45236Z'%20stroke='%231B8B8C'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M13.5%2010.9998V13.4998C13.5%2013.9419%2013.3244%2014.3658%2013.0118%2014.6783C12.6993%2014.9909%2012.2754%2015.1665%2011.8333%2015.1665H2.66667C2.22464%2015.1665%201.80072%2014.9909%201.48816%2014.6783C1.17559%2014.3658%201%2013.9419%201%2013.4998V4.33317C1%203.89114%201.17559%203.46722%201.48816%203.15466C1.80072%202.8421%202.22464%202.6665%202.66667%202.6665H5.16667'%20stroke='%231B8B8C'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",i2="data:image/svg+xml,%3csvg%20width='21'%20height='22'%20viewBox='0%200%2021%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.21053%203.10547H3.10526C2.54691%203.10547%202.01143%203.32727%201.61662%203.72209C1.2218%204.1169%201%204.65238%201%205.21073V17.8423C1%2018.4007%201.2218%2018.9361%201.61662%2019.331C2.01143%2019.7258%202.54691%2019.9476%203.10526%2019.9476H9.10211M15.7368%2012.5792V16.7897H19.9474M15.7368%209.42126V5.21073C15.7368%204.65238%2015.515%204.1169%2015.1202%203.72209C14.7254%203.32727%2014.1899%203.10547%2013.6316%203.10547H11.5263'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M5.21045%209.42105H9.42098M5.21045%2013.6316H8.36834M5.21045%203.10526C5.21045%202.54691%205.43225%202.01143%205.82707%201.61662C6.22188%201.2218%206.75736%201%207.31571%201H9.42098C9.97933%201%2010.5148%201.2218%2010.9096%201.61662C11.3044%202.01143%2011.5262%202.54691%2011.5262%203.10526C11.5262%203.66361%2011.3044%204.1991%2010.9096%204.59391C10.5148%204.98872%209.97933%205.21053%209.42098%205.21053H7.31571C6.75736%205.21053%206.22188%204.98872%205.82707%204.59391C5.43225%204.1991%205.21045%203.66361%205.21045%203.10526ZM11.5262%2016.7895C11.5262%2017.9062%2011.9698%2018.9771%2012.7595%2019.7668C13.5491%2020.5564%2014.6201%2021%2015.7368%2021C16.8535%2021%2017.9244%2020.5564%2018.7141%2019.7668C19.5037%2018.9771%2019.9473%2017.9062%2019.9473%2016.7895C19.9473%2015.6728%2019.5037%2014.6018%2018.7141%2013.8122C17.9244%2013.0226%2016.8535%2012.5789%2015.7368%2012.5789C14.6201%2012.5789%2013.5491%2013.0226%2012.7595%2013.8122C11.9698%2014.6018%2011.5262%2015.6728%2011.5262%2016.7895Z'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",c2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='17'%20height='17'%20viewBox='0%200%2017%2017'%20fill='none'%3e%3cpath%20d='M11.7279%203.50652L13.4921%205.27069M12.8621%201.95236L8.08957%206.72486C7.84298%206.9711%207.6748%207.28484%207.60624%207.62652L7.16541%209.83319L9.37207%209.39152C9.71374%209.32319%2010.0271%209.15569%2010.2737%208.90902L15.0462%204.13652C15.1897%203.99311%2015.3034%203.82285%2015.381%203.63547C15.4586%203.44809%2015.4986%203.24726%2015.4986%203.04444C15.4986%202.84162%2015.4586%202.64079%2015.381%202.45341C15.3034%202.26603%2015.1897%202.09577%2015.0462%201.95236C14.9028%201.80894%2014.7326%201.69518%2014.5452%201.61756C14.3578%201.53995%2014.157%201.5%2013.9542%201.5C13.7513%201.5%2013.5505%201.53995%2013.3631%201.61756C13.1757%201.69518%2013.0055%201.80894%2012.8621%201.95236Z'%20stroke='%23475467'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20/%3e%3cpath%20d='M13.832%2011.4998V13.9998C13.832%2014.4419%2013.6564%2014.8658%2013.3439%2015.1783C13.0313%2015.4909%2012.6074%2015.6665%2012.1654%2015.6665H2.9987C2.55667%2015.6665%202.13275%2015.4909%201.82019%2015.1783C1.50763%2014.8658%201.33203%2014.4419%201.33203%2013.9998V4.83317C1.33203%204.39114%201.50763%203.96722%201.82019%203.65466C2.13275%203.3421%202.55667%203.1665%202.9987%203.1665H5.4987'%20stroke='%23475467'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20/%3e%3c/svg%3e",u2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='19'%20viewBox='0%200%2016%2019'%20fill='none'%3e%3cpath%20d='M13.8322%204.83333L12.713%205.9525M12.713%205.9525C11.4628%204.70223%209.76702%203.99983%207.99887%203.99983C6.23071%203.99983%204.53498%204.70223%203.2847%205.9525C2.03443%207.20277%201.33203%208.89851%201.33203%2010.6667C1.33203%2012.4348%202.03443%2014.1306%203.2847%2015.3808C4.53498%2016.6311%206.23071%2017.3335%207.99887%2017.3335C9.76702%2017.3335%2011.4628%2016.6311%2012.713%2015.3808C13.9633%2014.1306%2014.6657%2012.4348%2014.6657%2010.6667C14.6657%208.89851%2013.9633%207.20277%2012.713%205.9525ZM7.99887%207.33333V10.6667M5.49887%201.5H10.4989'%20stroke='%23475467'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20/%3e%3c/svg%3e",d2=E=>(s2("data-v-afc76969"),E=E(),o2(),E),m2={class:"flex px-3 pb-5 xl:w-1/3 w-1/2"},p2={class:"left relative overflow-hidden h-full flex flex-col items-start text-white text-center"},x2=["src"],_2={class:"text-[30px] pl-6 flex-1 flex items-center w-full"},v2={key:0,class:"flex justify-around items-center w-full gap-3 px-3 mb-5"},h2=["src"],f2=["src"],k2={class:"pb-2"},C2=["src"],g2={class:"pb-6"},y2={key:0,class:"flex flex-col flex-1 overflow-hidden"},w2={key:0,class:"text-gray-500 break-word w-24 font-semibold text-base"},b2=d2(()=>l("span",null,[c("小啾预测题是AI自动生成的写作题目，"),l("br"),c("帮您更好地迎战新的写作考核模式")],-1)),E2={class:"!font-normal text-[#B2DAC8] text-xs flex items-center"},S2=["src"],$2=["src","onClick"],M2={key:1,class:"flex flex-col flex-1 overflow-hidden py-2.5 justify-between"},q2={key:0,class:"pt-2 pb-1 text-[#333] text-base font-medium"},L2={key:0,class:"text-gray-500 break-word w-24 font-bold text-base"},B2={key:1,class:"font-bold pl-2 text-gray-500"},j2={class:"flex justify-end"},A2=Z({__name:"QuestionCard",props:{resource_id:{},id:{},resource_name:{},section:{},children:{}},setup(E){const _=q(!0),s=E,u=N(),S=X(),m=Y(),k=q("mock_exam"),D=w(()=>s.section.slice(m.name!=="hearing"?0:4)),p=q([]),B=q(!1),r=w(()=>m.name==="hearing"),j=w(()=>s.section||s.children),H=w(()=>m.name==="mock"),o=w(()=>u.customData[m.name]),h=w(()=>n=>{var i,g,A;return(i=n.questions[0])!=null&&i.last_record?{color:"#F7A705",text:`${(g=n.questions[0])==null?void 0:g.last_record} / ${(A=n.questions[0])==null?void 0:A.total}`}:n.xxx?{color:"#1B8B8C",text:"继续考试"}:{color:"rgba(107, 114, 128, 0.60)",text:"未完成"}}),$=async n=>{if(m.name==="mock"){const i=await u.startMixedExam(k.value);e2(`mixedExam-${i.sheet_id}`,{id:s.id,father_sheet:i.sheet_id,resource_name:s.resource_name,curStep:"read",curIndex:0,quesid:s.children.map(g=>g.questions)}),await u.startExam(k.value,t2(s.children[0].questions,2),i.sheet_id),await S.push({name:"readExam",query:{type:"mixedExam",mid:i.sheet_id,name:s.resource_name,id:u.examing_data.sheet_id}});return}o.value.maxSelectCount===o.value.minSelectCount&&s.section.length===o.value.maxSelectCount||r.value&&s.section.length===5?(p.value=s.section.map(i=>i.questions[0].question_id),k.value=n,await u.startExam(k.value,p.value),await S.push({name:`${m.name}Exam`,query:{id:u.examing_data.sheet_id,name:s.resource_name.split("-")[0]}})):(_.value=!_.value,k.value=n)},Q=async()=>{if(p.value.length!==0)try{B.value=!0,await u.startExam(k.value,r.value?[...s.section.slice(0,4).map(n=>n.questions[0].question_id),...p.value]:p.value),S.push({name:`${m.name}Exam`,query:{id:u.examing_data.sheet_id,name:s.resource_name.split("-")[0]}})}finally{B.value=!1}else a2.info("请选择Passage")},P=async n=>{await u.startExam("practice",[n.questions[0].question_id]),S.push({name:`${m.name}Exam`,query:{id:u.examing_data.sheet_id,name:s.resource_name.split("-")[0]}})},U=w(()=>(p.value.length>o.value.maxSelectCount&&p.value.shift(),p.value)),G=()=>{_.value=!_.value,p.value=[]},O=()=>{console.log("暂不支持该功能")};return(n,i)=>{const g=y("a-button"),A=y("a-tooltip"),W=y("a-checkbox"),J=y("a-checkbox-group");return e(),a("div",m2,[l("div",{class:"flex bg-white exam-card w-full",style:F({height:o.value.height+"px"||"auto"})},[l("div",p2,[l("img",{class:"absolute top-4 right-4 cursor-pointer",src:f(i2),alt:"examEdit",onClick:O},null,8,x2),l("span",_2,t(n.$t(s.resource_name.split("-")[0])),1),_.value?(e(),a("div",v2,[b(g,{onClick:i[0]||(i[0]=d=>$("mock_exam")),class:"flex w-1/2 justify-between items-center h-8 overflow-hidden"},{default:v(()=>[l("img",{src:f(u2),alt:"time"},null,8,h2),c(" "+t(n.$t("模考")),1)]),_:1}),R(b(g,{onClick:i[1]||(i[1]=d=>$("practice")),class:"flex w-1/2 justify-between items-center h-8 overflow-hidden"},{default:v(()=>[l("img",{src:f(c2),alt:"practice"},null,8,f2),c(" "+t(n.$t("练习")),1)]),_:1},512),[[T,f(m).name!=="mock"]])])):(e(),a("div",{key:1,class:I(["h-10 mb-1 -translate-y-8 flex flex-col items-start pl-3.5",{"mb-1":!r.value,"mb-4":r.value}])},[l("span",k2,[c(t(n.$t("请选择此次"+(k.value==="mock_exam"?"模考":"练习")+"文章"))+" ",1),o.value.promptText?(e(),L(A,{key:0,placement:"bottomLeft",color:"#D0F0E6",overlayInnerStyle:{color:"#0A3F64",fontSize:"12px",borderRadius:"15px",borderTopLeftRadius:"0",border:"1px solid #0A3F64",marginTop:"-20px",marginLeft:"3px",padding:"10px"}},{title:v(()=>[l("span",null,t(o.value.promptText),1)]),default:v(()=>[l("img",{src:f(z),alt:"hint"},null,8,C2)]),_:1})):M("",!0)]),l("span",g2,t(U.value.length)+"/"+t(o.value.maxSelectCount),1)],2))]),_.value?(e(),a("div",y2,[(e(!0),a(C,null,V(j.value,(d,x)=>(e(),a(C,{key:d.section_id},[r.value&&x%3===0?(e(),a("h2",{key:0,class:"pl-2 pt-2 text-[#333] text-base font-medium",style:F({borderTop:x===3?"1px solid #D0D5DD":"1px solid transparent"})},"Section "+t(x===0?1:2),5)):M("",!0),l("div",{class:I(["flex justify-between items-center flex-1 px-3",{separator:!r.value}])},[Array.isArray(o.value.remark)?(e(),a("span",w2,[c(t(o.value.remark[x])+" ",1),x===j.value.length-1&&f(m).name!=="mock"?(e(),L(A,{key:0,placement:"bottomLeft",color:"#D0F0E6",overlayInnerStyle:{color:"#0A3F64",fontSize:"12px",borderRadius:"15px",borderTopLeftRadius:"0",border:"1px solid #0A3F64",marginTop:"-20px",marginLeft:"3px",padding:"10px"}},{title:v(()=>[b2]),default:v(()=>[l("span",E2,[l("img",{src:f(z),alt:"hint",class:"mr-1"},null,8,S2),c("小啾预测题")])]),_:1})):M("",!0)])):(e(),a("span",{key:1,class:I(["text-gray-500 text-base",{"w-[110px]":r.value}])},[r.value?r.value&&x===4?(e(),a(C,{key:1},[c(t(o.value.remark)+t(" ")+"3",1)],64)):r.value&&x===5?(e(),a(C,{key:2},[c(t(o.value.remark)+t(" ")+"4",1)],64)):r.value&&x%3!==0?(e(),a(C,{key:3},[c(t(o.value.remark)+t(" ")+t(d.questions[0].order-1),1)],64)):r.value&&x%3===0?(e(),a(C,{key:4},[c("Conversation"+t(" ")+"1")],64)):M("",!0):(e(),a(C,{key:0},[c(t(o.value.remark)+t(" ")+t(d.questions[0].order),1)],64))],2)),l("span",{class:"flex flex-col justify-center text-xs min-w-[50px]",style:F({color:h.value(d).color})},[R(l("span",null,t(n.$t("完成得分")),513),[[T,h.value(d).color==="#F7A705"]]),c(" "+t(n.$t(h.value(d).text)),1)],4),H.value?M("",!0):(e(),a("img",{key:2,src:f(r2),alt:"edit",onClick:R2=>P(d),class:"cursor-pointer"},null,8,$2))],2)],64))),128))])):(e(),a("div",M2,[b(J,{value:p.value,"onUpdate:value":i[2]||(i[2]=d=>p.value=d),class:"w-full pl-2 flex flex-col"},{default:v(()=>[r.value?(e(),a("h2",q2,"Section "+t(2))):M("",!0),(e(!0),a(C,null,V(D.value,(d,x)=>(e(),a("p",{key:d.section_id,class:"py-1.5"},[b(W,{class:"radius",value:d.questions[0].question_id},{default:v(()=>[Array.isArray(o.value.remark)?(e(),a("span",L2,t(o.value.remark[x]),1)):(e(),a("span",B2,t(o.value.remark)+t(" ")+t(r.value?x+3:x+1),1))]),_:2},1032,["value"])]))),128))]),_:1},8,["value"]),l("div",j2,[b(g,{class:"mr-4 text-green-1 border-green-1",onClick:G},{default:v(()=>[c(t(n.$t("取消")),1)]),_:1}),b(g,{type:"primary",class:"mr-4",onClick:Q,loading:B.value},{default:v(()=>[c(t(n.$t("确定")),1)]),_:1},8,["loading"])])]))],4)])}}}),H2=K(A2,[["__scopeId","data-v-afc76969"]]),V2={class:"bg-green-2 pt-4 flex flex-col"},D2={class:"flex content-start flex-wrap flex-1 overflow-y-auto py-5 px-3 bg-green-2"},I2={key:0},F2=Z({__name:"index",setup(E){const _=N(),s=q(0),u=q(!1),S=async m=>{await _.getExamResource(m)};return n2(async()=>{try{u.value=!0,await _.getExamResource(s.value,!0)}finally{u.value=!1}}),(m,k)=>{const D=y("a-spin"),p=y("a-tab-pane"),B=y("a-tabs"),r=y("a-layout");return u.value?(e(),L(D,{key:0,size:"large",tip:"题库加载中...",class:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 ml-[100px]"})):(e(),L(r,{key:1,class:"w-full h-full overflow-hidden"},{default:v(()=>{var j,H,o;return[l("header",V2,[b(B,{activeKey:s.value,"onUpdate:activeKey":k[0]||(k[0]=h=>s.value=h),onChange:S,class:"page-tab"},{default:v(()=>{var h;return[(e(!0),a(C,null,V((h=f(_).exam_data)==null?void 0:h.pageArr,$=>(e(),L(p,{tab:`${$.start}-${$.end}`,key:$.id},null,8,["tab"]))),128))]}),_:1},8,["activeKey"])]),l("div",D2,[(H=(j=f(_).exam_data)==null?void 0:j.list)!=null&&H.length?(e(!0),a(C,{key:1},V((o=f(_).exam_data)==null?void 0:o.list,h=>(e(),L(H2,l2({key:h.resource_id},h),null,16))),128)):(e(),a("div",I2," 暂无数据 "))])]}),_:1}))}}}),K2=K(F2,[["__scopeId","data-v-6c6c1546"]]);export{K2 as Q};
