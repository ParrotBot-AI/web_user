import{u as ce}from"./result-OsIgUfDH.js";import{i as D,H as Ue,r as A,z as Q,s as ie,d as U,T as be,K as ge,A as ve,o as Ze,a as ze,b as H,c as n,e as o,N as te,O as se,f as e,u as g,n as J,U as fe,t as l,F as B,g as E,h as P,m as Ge,j as F,p as O,l as L,w as Je,I as et,D as Ye,E as Xe,V as Oe,C as Z,k as Pe,W as tt,X as st,R as Qe,Y as nt,Z as ot,L as at}from"./index-VRJpYvlb.js";import{a as je,_ as lt}from"./item.vue_vue_type_script_setup_true_lang-paKxeu4E.js";import{s as rt}from"./ai-7XA0R86N.js";import{t as G,i as Ve,a as it,n as ct,b as ut,c as dt}from"./index-JHpAytmm.js";import{_ as ue}from"./_plugin-vue_export-helper-x3n3nnut.js";import{C as pt,P as ft,_ as _t}from"./index.vue_vue_type_script_setup_true_lang-J3ye-WTD.js";import{M as xt,_ as He,a as mt,b as ht}from"./Avatar.vue_vue_type_script_setup_true_lang-d4YD4YWB.js";import"./children.vue_vue_type_script_setup_true_lang-FQL1-XRe.js";var vt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"};const yt=vt;function Le(b){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?Object(arguments[t]):{},d=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(s).filter(function(p){return Object.getOwnPropertyDescriptor(s,p).enumerable}))),d.forEach(function(p){gt(b,p,s[p])})}return b}function gt(b,t,s){return t in b?Object.defineProperty(b,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):b[t]=s,b}var Ce=function(t,s){var d=Le({},t,s.attrs);return D(Ue,Le({},d,{icon:yt}),null)};Ce.displayName="AuditOutlined";Ce.inheritAttrs=!1;const we=Ce;function bt(b){var t;const s=G(b);return(t=s==null?void 0:s.$el)!=null?t:s}const Ne=Ve?window:void 0;function ke(...b){let t,s,d,p;if(typeof b[0]=="string"||Array.isArray(b[0])?([s,d,p]=b,t=Ne):[t,s,d,p]=b,!t)return ct;Array.isArray(s)||(s=[s]),Array.isArray(d)||(d=[d]);const x=[],f=()=>{x.forEach(h=>h()),x.length=0},$=(h,c,i,r)=>(h.addEventListener(c,i,r),()=>h.removeEventListener(c,i,r)),w=ie(()=>[bt(t),G(p)],([h,c])=>{if(f(),!h)return;const i=ut(c)?{...c}:c;x.push(...s.flatMap(r=>d.map(_=>$(h,r,_,i))))},{immediate:!0,flush:"post"}),a=()=>{w(),f()};return dt(a),a}function De(b,t={}){var s,d;const{pointerTypes:p,preventDefault:x,stopPropagation:f,exact:$,onMove:w,onEnd:a,onStart:h,initialValue:c,axis:i="both",draggingElement:r=Ne,containerElement:_,handle:v=b}=t,y=A((s=G(c))!=null?s:{x:0,y:0}),C=A(),m=k=>p?p.includes(k.pointerType):!0,T=k=>{G(x)&&k.preventDefault(),G(f)&&k.stopPropagation()},R=k=>{var z;if(!m(k)||G($)&&k.target!==G(b))return;const q=G(_),j=(z=q==null?void 0:q.getBoundingClientRect)==null?void 0:z.call(q),V=G(b).getBoundingClientRect(),N={x:k.clientX-(q?V.left-j.left+q.scrollLeft:V.left),y:k.clientY-(q?V.top-j.top+q.scrollTop:V.top)};(h==null?void 0:h(N,k))!==!1&&(C.value=N,T(k))},M=k=>{var z;if(!m(k)||!C.value)return;const q=G(_),j=(z=q==null?void 0:q.getBoundingClientRect)==null?void 0:z.call(q),V=G(b).getBoundingClientRect();let{x:N,y:ne}=y.value;(i==="x"||i==="both")&&(N=k.clientX-C.value.x,q&&(N=Math.min(Math.max(0,N),j.width+q.scrollLeft-V.width))),(i==="y"||i==="both")&&(ne=k.clientY-C.value.y,q&&(ne=Math.min(Math.max(0,ne),j.height+q.scrollTop-V.height))),y.value={x:N,y:ne},w==null||w(y.value,k),T(k)},I=k=>{m(k)&&C.value&&(C.value=void 0,a==null||a(y.value,k),T(k))};if(Ve){const k={capture:(d=t.capture)!=null?d:!0};ke(v,"pointerdown",R,k),ke(r,"pointermove",M,k),ke(r,"pointerup",I,k)}return{...it(y),position:y,isDragging:Q(()=>!!C.value),style:Q(()=>`left:${y.value.x}px;top:${y.value.y}px;`)}}const We=b=>(Ye("data-v-b6b1ba9d"),b=b(),Xe(),b),wt=["src"],$t={class:"talk-box flex flex-col"},kt={class:"w-[68px] h-[68px] absolute -left-[34px]"},Dt=["src"],Ct={class:"text-[#475467] text-base font-semibold"},Bt=We(()=>e("b",{class:"w-[14px] h-[3px] bg-[#1B8B8C] rounded-md"},null,-1)),qt=[Bt],Tt={class:"flex-1 overflow-auto px-6 pt-4 tellList bg-[#F0F7F7]"},Mt={key:0,class:"bg-[#F0F7F7] h-[36px] overflow-x-auto overflow-y-hidden flex flex-nowrap items-center over-x px-2"},At={class:"flex h-[56px] items-center px-2"},Rt=We(()=>e("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("g",{id:"send-01"},[e("path",{id:"Icon",d:"M9.24537 11.25L17.9954 2.50002M9.35169 11.5234L11.5418 17.1551C11.7347 17.6512 11.8312 17.8993 11.9702 17.9717C12.0907 18.0345 12.2342 18.0345 12.3548 17.9719C12.4939 17.8997 12.5906 17.6517 12.7842 17.1558L18.2761 3.08269C18.4508 2.63504 18.5382 2.41121 18.4904 2.26819C18.4489 2.14398 18.3514 2.04651 18.2272 2.00501C18.0842 1.95723 17.8604 2.04458 17.4127 2.21927L3.33958 7.71122C2.84369 7.90474 2.59574 8.0015 2.52348 8.14059C2.46084 8.26116 2.46093 8.4047 2.52371 8.5252C2.59613 8.66421 2.84419 8.76067 3.34031 8.95361L8.97198 11.1437C9.07269 11.1829 9.12304 11.2024 9.16544 11.2327C9.20302 11.2595 9.23589 11.2924 9.2627 11.3299C9.29294 11.3723 9.31252 11.4227 9.35169 11.5234Z",stroke:"white","stroke-width":"1.66667","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),St=U({__name:"float",props:{data:{},type:{}},setup(b){const t=A(null),s=A(null),d=b,p={toeflType:"",queryType:"",chatbotQuery:"","Main Content":"",mcq:"",problemMethod:""},x=A({left:0,right:0,top:0,bottom:0}),f=A({left:0,right:0,top:0,bottom:0}),$=A(),w=A();be();const{x:a,y:h,isDragging:c}=De($),{x:i,y:r,isDragging:_}=De(w),v=ge({startX:0,startY:0,startedDrag:!1,transformX:0,transformY:0,preTransformX:0,preTransformY:0}),y=ge({startX:0,startY:0,startedDrag:!1,transformX:0,transformY:0,preTransformX:0,preTransformY:0}),C=A(!1),m=A("");let T=0;const R=A([]),M={read:"阅读",hearing:"听力",spoken:"口语",writing:"写作"};ie([a,h],()=>{if(!v.startedDrag&&!C.value){v.startX=a.value,v.startY=h.value;const u=document.body.getBoundingClientRect(),S=$.value.getBoundingClientRect();x.value.right=u.width-S.width,x.value.bottom=u.height-S.height,v.preTransformX=v.transformX,v.preTransformY=v.transformY}v.startedDrag=!0}),ve(()=>{if(v.startedDrag&&!C.value){const u=v.preTransformX+Math.min(Math.max(x.value.left,a.value),x.value.right)-v.startX,S=v.preTransformY+Math.min(Math.max(x.value.top,h.value),x.value.bottom)-v.startY;v.transformX=u,v.transformY=S}}),ie([i,r],()=>{if(!y.startedDrag&&C.value){y.startX=i.value,y.startY=r.value;const u=document.body.getBoundingClientRect(),S=w.value.getBoundingClientRect();f.value.right=u.width-S.width,f.value.bottom=u.height-356,y.preTransformX=y.transformX,y.preTransformY=y.transformY}y.startedDrag=!0}),ve(()=>{y.startedDrag&&C.value&&(y.transformX=y.preTransformX+Math.min(Math.max(f.value.left,i.value),f.value.right)-y.startX,y.transformY=y.preTransformY+Math.min(Math.max(f.value.top,r.value),f.value.bottom)-y.startY)}),ie([c],()=>{c||(v.startedDrag=!1)}),ie([_],()=>{_||(y.startedDrag=!1)});const I=()=>{C.value=!C.value},k=Q(()=>({transform:`translate(${v.transformX}px, ${v.transformY}px)`})),z=Q(()=>({transform:`translate(${y.transformX}px, ${y.transformY}px)`})),q=Q(()=>{switch(d.type){case"read":return p.toeflType="Reading",[{title:"错题解析"},{title:"解题思路"},{title:"重点信息"},{title:"段落逻辑"}];case"hearing":return p.toeflType="Listening",[{title:"错题解析"},{title:"解题思路"},{title:"重点信息"},{title:"听力逻辑"}];case"spoken":return p.toeflType="Speaking",[];case"writing":return p.toeflType="Writing",[]}return[]}),j=()=>{clearInterval(t.value),t.value=setInterval(()=>{s.value.scrollIntoView({behavior:"smooth"})},100)},V=()=>{console.log("onAllEnd"),clearInterval(t.value)};Ze(()=>{R.value[0]={type:"receive",id:T++,name:"",content:[`有关于此篇${M[d.type]||"文章"}的任何问题您都可以提问哦！AI助教会基于您所在的题目页面来回答您提出的问题。`]}}),ze(()=>{clearInterval(t.value)});const N=u=>{var S,W,ee,Y,de,me;switch(d.type){case"read":return`${(S=u==null?void 0:u.question_parent)==null?void 0:S.question_content.join(`
`)} 

 ${u==null?void 0:u.detail.join(`
`)}`;case"hearing":return`${u==null?void 0:u.question_parent.voice_content} 

 ${u==null?void 0:u.question_content} 

 ${u==null?void 0:u.detail.join(`
`)}`;case"spoken":return`${((W=u==null?void 0:u.question)==null?void 0:W.question_content)||""} 

 ${((ee=u==null?void 0:u.question)==null?void 0:ee.title)||""} 

 ${((Y=u==null?void 0:u.question)==null?void 0:Y.voice_content)||""}`;case"writing":return`${(de=u==null?void 0:u.question)==null?void 0:de.question_content} 

 ${(me=u==null?void 0:u.question)==null?void 0:me.answer} `}},ne=u=>{var S;switch(d.type){case"read":return u==null?void 0:u.question_content;case"hearing":return`${u==null?void 0:u.question_content}`;case"spoken":return"";case"writing":return(S=u==null?void 0:u.question)==null?void 0:S.question_title}},_e=async u=>{j();const{clientId:S}=await rt(u),W=[],ee=new EventSource(`/ai-api/v1/modelapi/assistantChatbot/${S}/`);ee.onmessage=function(Y){W.push(Y.data.replace(/\[DONE!\]/,"")),Y.data.match(/\[DONE!\]/)&&(R.value.push({type:"receive",id:T++,isEnd:!1,content:W}),ee.close())}},xe=()=>{if(!m.value)return;R.value.push({type:"send",id:T++,name:"",content:m.value});const u={...p,queryType:"其他问题",chatbotQuery:m.value,"Main Content":N(d.data)};_e(u),m.value=""},ye=u=>{const S=["错题解析","解题思路","重点信息"];R.value.push({type:"send",id:T++,name:"",content:u});const W={...p,queryType:u,"Main Content":N(d.data),mcq:S.includes(u)?ne(d.data):""};console.log(W),_e(W)};return(u,S)=>{const W=H("a-button"),ee=H("a-input");return n(),o(B,null,[te(e("div",{class:"fixed right-8 bottom-8 z-50 w-[68px] h-[68px]",style:J(k.value),onClick:fe(I,["stop"]),onMouseenter:S[0]||(S[0]=fe(()=>{},["stop"])),onMousemove:S[1]||(S[1]=fe(()=>{},["stop"])),ref_key:"modalTitleRef",ref:$},[e("img",{src:g(je),alt:"logo",class:"w-full h-full select-none",draggable:!1},null,8,wt)],36),[[se,!C.value]]),e("div",{class:"fixed right-8 bottom-8 z-50",style:J(z.value)},[te(e("div",$t,[e("header",{class:"w-full flex pl-[34px] pr-4 items-center justify-between h-[42px] bg-white",ref_key:"modalHeaderRef",ref:w},[e("span",kt,[e("img",{src:g(je),alt:"aiassistant",class:"w-full"},null,8,Dt)]),e("h2",Ct,l(u.$t("鹦鹉AI助教")),1),e("span",{class:"w-[18px] h-full cursor-pointer flex justify-center items-center",onClick:fe(I,["stop"]),onMouseenter:S[2]||(S[2]=fe(()=>{},["stop"])),onMousemove:S[3]||(S[3]=fe(()=>{},["stop"]))},qt,32)],512),e("section",Tt,[(n(!0),o(B,null,E(R.value,Y=>(n(),P(lt,Ge({key:Y.id},Y,{onAllEnd:V}),null,16))),128)),e("div",{ref_key:"bottom",ref:s},null,512)]),q.value.length?(n(),o("section",Mt,[(n(!0),o(B,null,E(q.value,Y=>(n(),P(W,{class:"h-[24px] shrink-0 text-xs mx-[4px] border-[#B2DAC8] rounded-full",key:Y.title,onClick:de=>ye(Y.title)},{default:F(()=>[O(l(Y.title),1)]),_:2},1032,["onClick"]))),128))])):L("",!0),e("footer",At,[D(ee,{class:"flex-1 mr-3 h-[36px]",placeholder:u.$t("输入你想问的问题"),value:m.value,"onUpdate:value":S[4]||(S[4]=Y=>m.value=Y),onKeyup:Je(xe,["enter"])},null,8,["placeholder","value"]),D(W,{type:"primary",class:"h-[36px] flex justify-center items-center",onClick:xe},{default:F(()=>[D(g(et),null,{component:F(()=>[Rt]),_:1})]),_:1})])],512),[[se,C.value]])],4)],64)}}}),Be=ue(St,[["__scopeId","data-v-b6b1ba9d"]]),Et=["src"],Ft={class:"mt-3 overflow-hidden w-[300px] audio-bar"},It={class:"h-2 bg-[#F2F2F2] rounded-full relative"},Ot={class:"flex justify-between mt-2 times"},jt={class:"text-xs text-[#1B8B8C]"},Ht={class:"text-xs text-[#BDBDBD]"},qe=U({__name:"index",props:{src:{},class:{}},setup(b){const t=A(!0),s=A(null),d=A(0),p=A(0),x=b,f=()=>{var r;d.value=((r=s.value)==null?void 0:r.duration)||0,t.value=!0},$=()=>{var r;t.value=!0,(r=x.ended)==null||r.call(x)},w=()=>{var r;p.value=s.value?(r=s.value)==null?void 0:r.currentTime:0},a=Q(()=>Oe(d.value||0)),h=Q(()=>Oe(p.value||0)),c=Q(()=>`${p.value/d.value*100}%`),i=()=>{var r,_;t.value=!t.value,t.value?(r=s.value)==null||r.pause():(_=s.value)==null||_.play()};return ze(()=>{var r,_;(r=s.value)==null||r.pause(),(_=s.value)==null||_.remove(),s.value=null}),(r,_)=>(n(),o("div",{class:Z(["flex mt-6",x.class])},[e("audio",{controls:"false",class:"opacity-0 w-0 h-0",onTimeupdate:w,onLoadedmetadata:f,onEnded:$,ref_key:"audioElement",ref:s},[e("source",{src:x.src,type:"audio/mpeg"},null,8,Et),O(" "+l(r.$t("Your browser does not support the audio element")),1)],544),e("span",{class:"w-[35px] h-[35px] rounded-full mr-4 flex justify-center items-center cursor-pointer overflow-hidden bg-[#F0F7F7]",style:{border:"1px solid #1B8B8C"},onClick:i},[te(D(g(pt),{class:"text-[24px] text-[#1B8B8C] ml-[4px] mt-0"},null,512),[[se,t.value]]),te(D(g(ft),{class:"text-[18px] text-[#1B8B8C]"},null,512),[[se,!t.value]])]),e("div",Ft,[e("div",It,[e("div",{class:"absolute left-0 top-0 h-full rounded-full bg-[#1B8B8C]",style:J({width:c.value})},null,4)]),e("p",Ot,[e("span",jt,l(h.value),1),e("span",Ht,l(a.value),1)])])],2))}}),Lt={class:"flex flex-1 overflow-hidden bg-white"},zt={class:"flex-1 h-full overflow-hidden pt-2",style:{borderRight:"1px solid #D0D5DD"}},Yt={ref:"contentDiv",id:"content",class:"content-box h-[70%] overflow-y-auto w-full"},Xt=["innerHTML"],Pt={class:"mt-4 mx-8"},Qt={class:"text-[#667085] font-normal text-base mb-4"},Vt={class:"flex-1 h-full overflow-h-auto overflow-x-hidden px-12 py-7"},Nt={class:"text-gray-500 text-[18px] pb-10 font-bold"},Wt=["innerHTML"],Kt=["value"],Ut={class:"flex-1"},Zt=U({__name:"HearingReview",props:{answerData:{}},setup(b){const t=b;return(s,d)=>{var p,x,f,$;return n(),o(B,null,[e("div",Lt,[e("div",zt,[e("div",Yt,[(n(!0),o(B,null,E((p=t.answerData)==null?void 0:p.question_parent.voice_content.split(/\n/),(w,a)=>(n(),o("p",{class:Z(["px-8 text-gray-500 text-[18px] leading-7 pb-4 indent-8","read-mock-content-"+(a+1)]),innerHTML:w,key:a},null,10,Xt))),128))],512),e("div",Pt,[e("h4",Qt,l(s.$t("播放听力材料")),1),D(qe,{src:(x=t.answerData)==null?void 0:x.question_parent.voice_link},null,8,["src"])])]),e("div",Vt,[e("h1",Nt,[e("p",{innerHTML:(f=t.answerData)==null?void 0:f.question_content},null,8,Wt)]),e("div",null,[(n(!0),o(B,null,E(($=t.answerData)==null?void 0:$.detail,(w,a)=>{var h,c,i,r,_;return n(),o("div",{key:a,value:a,class:"flex pb-7 text-gray-500"},[e("span",{class:Z(["w-5 h-5 rounded-full mr-4 opt-status",{error:((h=t.answerData)==null?void 0:h.answer[a])!==((c=t.answerData)==null?void 0:c.answer_weight[a])&&((i=t.answerData)==null?void 0:i.answer[a])===1,default:(r=t.answerData)==null?void 0:r.answer[a],success:((_=t.answerData)==null?void 0:_.answer_weight[a])===1}])},null,2),e("p",Ut,l(w),1)],8,Kt)}),128))])])]),D(Be,{data:t.answerData,type:"hearing"},null,8,["data"])],64)}}}),Gt=ue(Zt,[["__scopeId","data-v-0093b642"]]),Jt={class:"text-[#475467]"},es={class:"flex flex-col"},ts={class:"text-[#667085] text-base font-normal"},ss={class:"flex pl-3"},ns=["onClick"],os={class:"text-[#333333] font-normal text-base h-full absolute left-0 w-[100px] flex justify-center items-center",style:{borderRight:"1px solid #B2DAC8"}},as={class:"text-[#667085] text-base font-normal w-[120px]"},ls={class:"flex pl-3"},rs=["onClick"],is={class:"h-10 flex justify-between items-center px-2"},cs=U({__name:"QuestionNav",props:{onChangeQues:{type:Function}},setup(b){const t=b,s=ce(),d=A(),{x:p,y:x,isDragging:f}=De(d),$=A(0),w=A(0),a=A(!1),h=A(0),c=A(0),i=A(0),r=A(0),_=A(!1),v=A({left:0,right:0,top:0,bottom:0});ie([p,x],()=>{if(!a.value){$.value=p.value,w.value=x.value;const m=document.body.getBoundingClientRect(),T=d.value.getBoundingClientRect();v.value.right=m.width-T.width,v.value.bottom=m.height-T.height,i.value=h.value,r.value=c.value}a.value=!0}),ie(f,()=>{f||(a.value=!1)}),ve(()=>{a.value&&(h.value=i.value+Math.min(Math.max(v.value.left,p.value),v.value.right)-$.value,c.value=r.value+Math.min(Math.max(v.value.top,x.value),v.value.bottom)-w.value)});const y=Q(()=>({transform:`translate(${h.value}px, ${c.value}px)`})),C=Q(()=>{var m;return((m=s.resultData)==null?void 0:m.navData)||[]});return(m,T)=>{var R;return n(),o("div",{class:"absolute right-40 bottom-20 z-40 flex flex-col bg-white shadow-[0px_2px_20px_10px_rgba(0,0,0,0.1)] min-w-52 rounded-xl",style:J(y.value)},[e("header",{class:"h-10 flex justify-between items-center pl-4 pr-2 cursor-move border-solid border-[#B2DAC8] border-x-0 border-t-0 border-[1px]",ref_key:"modalTitleRef",ref:d},[e("span",Jt,l(m.$t("快速导航")),1),e("span",{class:Z(["size-icon cursor-pointer",{min:!_.value,max:_.value}]),onClick:T[0]||(T[0]=M=>_.value=!_.value)},null,2)],512),e("main",{class:Z(["flex-1 flex flex-col before:content-[''] border-solid border-[#B2DAC8] border-x-0 border-t-0 border-[1px]",{hidden:_.value}])},[e("section",es,[g(s).resultData.type==="read"?(n(!0),o(B,{key:0},E((R=g(s).resultData.questions_r)==null?void 0:R.questions,(M,I)=>(n(),o("div",{key:m.i,class:"p-2 flex items-center"},[e("h4",ts,"Passage "+l(M==null?void 0:M.order),1),e("div",ss,[(n(!0),o(B,null,E(M.children,(k,z)=>(n(),o("span",{key:k.question_id,onClick:q=>t.onChangeQues(2,I,z),class:Z(["w-5 h-5 mx-1 rounded-full shrink-0 text-[11px] flex justify-center items-center text-[#475467] cursor-pointer border border-solid border-[#475467]",{"bg-[#c22c66] text-[#fff] border-[#c22c66]":!(k.score>0)}])},l(z+1+I*10),11,ns))),128))])]))),128)):L("",!0),g(s).resultData.type==="hearing"?(n(!0),o(B,{key:1},E(C.value,(M,I)=>(n(),o("div",{class:"b-b-1 pl-[100px] relative",key:I},[e("h3",os,l(M.title),1),e("div",null,[(n(!0),o(B,null,E(M==null?void 0:M.children,(k,z)=>(n(),o("div",{key:z,class:"p-2 flex items-center"},[e("h4",as,l(k==null?void 0:k.title),1),e("div",ls,[(n(!0),o(B,null,E(k==null?void 0:k.navNum,(q,j)=>(n(),o("span",{key:q.question_id,onClick:V=>t.onChangeQues(2,k.index,j),class:Z(["w-5 h-5 mx-1 rounded-full shrink-0 text-[11px] flex justify-center items-center text-[#475467] cursor-pointer border border-solid border-[#475467]",{"bg-[#c22c66] text-[#fff] border-[#c22c66]":!(q.score>0)}])},l(q+1),11,rs))),128))])]))),128))])]))),128)):L("",!0)])],2),e("footer",is,[e("span",{class:"before:content-['<'] before:mr-2 block text-[#1B8B8C] cursor-pointer",onClick:T[1]||(T[1]=M=>t.onChangeQues(-1))},l(m.$t("上一题")),1),e("span",{class:"after:content-['>'] after:ml-2 block text-[#1B8B8C] cursor-pointer",onClick:T[2]||(T[2]=M=>t.onChangeQues(1))},l(m.$t("下一题")),1)])],4)}}}),us=ue(cs,[["__scopeId","data-v-05652c5e"]]),ds={class:"flex flex-1 overflow-hidden bg-white"},ps={class:"w-1/2 h-full overflow-h-auto overflow-x-hidden pt-2",style:{borderRight:"1px solid #D0D5DD"}},fs=["innerHTML"],_s={class:"w-1/2 h-full overflow-h-auto overflow-x-hidden px-12 py-7"},xs={class:"text-gray-500 text-[18px] pb-10 font-bold"},ms=["innerHTML"],hs={key:0,class:"text-green-1 text-[18px]"},vs=["value"],ys={class:"flex-1"},gs=U({__name:"ReadReview",props:{answerData:{}},setup(b){const t=A(null),s=b,d=(p,x,f)=>{var $,w,a,h,c,i,r,_,v;if(p){const y=(w=($=s.answerData)==null?void 0:$.question_parent)==null?void 0:w.question_content[p-1],C=(a=t.value)==null?void 0:a.querySelectorAll("p"),m=(h=t.value)==null?void 0:h.querySelector(".read-mock-content-"+p);if(C==null||C.forEach((T,R)=>{var M,I;T.innerHTML=(I=(M=s.answerData)==null?void 0:M.question_parent)==null?void 0:I.question_content[R]}),x&&x!=="$$"&&m&&(m.innerHTML=y.replace(new RegExp(x,"g"),`<b class="bg-[rgba(253,212,78,0.3)]">${x}</b>`)),f&&p&&x!=="$$"&&m&&(m.innerHTML=y.replace(new RegExp(f,"g"),`<b class="bg-[rgba(253,212,78,0.3)]">${f}</b>`)),x==="$$"&&f&&p&&m){const T=(i=(c=s.answerData)==null?void 0:c.answer)==null?void 0:i.findIndex(M=>M===1);let R=-1;m.innerHTML=(_=(r=s.answerData)==null?void 0:r.question_parent)==null?void 0:_.original_question_content[p-1].replace(/\$\$/g,(M,I)=>(R++,R===T?`<span class="fill-item" data-index="${R}">【 <em>${f}</em> 】</span>`:`<span class="fill-item" data-index="${R}">【 <b></b> 】</span>`))}m==null||m.scrollIntoView({behavior:"smooth",block:"start"})}else(v=t.value)==null||v.scrollTo(0,0)};return ve(()=>{var $,w,a,h,c,i;const p=(w=($=s.answerData)==null?void 0:$.keywords)==null?void 0:w.p,x=(h=(a=s.answerData)==null?void 0:a.keywords)==null?void 0:h.k,f=(i=(c=s.answerData)==null?void 0:c.keywords)==null?void 0:i.s;Array.isArray(p)?p.forEach(r=>{d(r,x,f)}):d(p,x,f)},{flush:"post"}),(p,x)=>{var f,$,w,a;return n(),o(B,null,[e("div",ds,[e("div",ps,[e("div",{ref_key:"contentDiv",ref:t,id:"content",class:"content-box"},[(n(!0),o(B,null,E((f=s.answerData)==null?void 0:f.question_parent.question_content,(h,c)=>{var i,r,_,v,y,C,m;return n(),o("p",{class:Z(["px-8 text-gray-500 text-[18px] leading-7 pb-4 indent-8",["read-mock-content-"+(c+1),{active:typeof((r=(i=s.answerData)==null?void 0:i.keywords)==null?void 0:r.p)=="number"?((v=(_=s.answerData)==null?void 0:_.keywords)==null?void 0:v.p)===c+1:((m=(C=(y=s.answerData)==null?void 0:y.keywords)==null?void 0:C.p)==null?void 0:m[0])===c+1}]]),innerHTML:h,key:c},null,10,fs)}),128))],512)]),e("div",_s,[e("h1",xs,[e("p",{innerHTML:(w=($=s.answerData)==null?void 0:$.question_content)==null?void 0:w.replace(/\[▇\]/g,"<span class='fill-item'>【<b></b>】</span>")},null,8,ms)]),s.answerData.keywords.k==="$$"?(n(),o("h2",hs,l(s.answerData.keywords.s||"keywords.s is not defined"),1)):L("",!0),e("div",null,[(n(!0),o(B,null,E((a=s.answerData)==null?void 0:a.detail,(h,c)=>{var i,r,_,v,y,C;return n(),o("div",{key:c,value:c,class:"flex pb-7 text-gray-500"},[e("span",{class:Z(["w-5 h-5 rounded-full mr-4 opt-status",{default:((i=s.answerData)==null?void 0:i.answer_weight[c])===1,error:((r=s.answerData)==null?void 0:r.answer[c])!==((_=s.answerData)==null?void 0:_.answer_weight[c])&&((v=s.answerData)==null?void 0:v.answer[c])===1,success:((y=s.answerData)==null?void 0:y.answer_weight[c])===1&&((C=s.answerData)==null?void 0:C.answer[c])===1}])},null,2),e("p",ys,l(h),1)],8,vs)}),128))])])]),D(Be,{data:s.answerData,type:"read"},null,8,["data"])],64)}}}),bs=ue(gs,[["__scopeId","data-v-f3039f98"]]),ws="/assets/result-icon-424tIPlS.png",$e=b=>(Ye("data-v-61a39652"),b=b(),Xe(),b),$s={class:"flex-1 w-full h-full overflow-hidden relative z-20 flex flex-col"},ks=["src"],Ds={class:"flex"},Cs={class:"h-[50px] bg-[#F0F7F7] w-full pl-[128px] pr-[100px]"},Bs={key:0,class:"text-[#475467] truncate mt-1"},qs=$e(()=>e("b",null,"Question: ",-1)),Ts={class:"text-xs text-[rgba(0,0,0,0.50)]"},Ms={class:"text-[#475467] text-[14px]"},As={class:"text-[20px]"},Rs={class:"text-xs text-[rgba(0,0,0,0.50)]"},Ss={class:"text-[#475467] text-[14px]"},Es={class:"text-[20px]"},Fs={class:"flex-1 overflow-hidden bg-white w-full flex"},Is={class:"w-1/2 relative flex flex-col",style:{borderRight:"1px solid #D0D5DD"}},Os={key:0,class:"text-[#667085] font-base py-4 pl-[128px] text-base"},js={key:1,class:"text-[#667085] font-base py-4 pl-[128px] text-base flex items-center overflow-hidden"},Hs={class:"mr-4 mt-4"},Ls=["onMouseover","onMouseleave"],zs={key:1,class:"text-[#667085] text-base"},Ys={class:"w-1/2 relative"},Xs={key:0,class:"content-mask"},Ps={class:"text-center pb-4"},Qs=$e(()=>e("br",null,null,-1)),Vs=$e(()=>e("h4",{class:"text-base text-[#667085]"},"Bad Pronunciation Scores",-1)),Ns=$e(()=>e("h4",{class:"text-base text-[#667085]"},"Mind Map",-1)),Ws={class:"bg-[#F0F7F7] h-[124px] flex justify-between items-center px-10"},Ks={class:"text-[#667085] text-base pb-2"},Us={class:"flex"},Zs={class:"mx-2 font-normal text-[#667085]"},Gs={key:0,class:"h-[70px] bg-white shadow-[0px_4.4px_22px_0px_rgba(0,0,0,0.10)] flex px-5 py-2 rounded-xl scale-80"},Js=["onClick"],en=U({__name:"AnnotationView",props:{data:{},onViewOrigin:{type:Function},onBack:{type:Function}},setup(b){const t=A(!0),s=Pe(),d=ce(),p=A(null),x=[{title:"问题单词",dataIndex:"word",key:"word"},{title:"发音得分",dataIndex:"score",key:"score"}],f=b,$=A(0),w=A(0),a=Q(()=>f.data[$.value]),h=()=>{t.value=!t.value},c=(i,r,_)=>{t.value&&d.showHoverMark(i,r,$.value,_)};return(i,r)=>{var R,M,I,k,z,q,j,V,N,ne,_e,xe,ye,u,S,W,ee,Y,de,me,Te,Me,Ae,Re,Se;const _=H("a-button"),v=H("b-header"),y=H("a-tooltip"),C=H("a-tab-pane"),m=H("a-table"),T=H("a-tabs");return n(),o(B,null,[e("div",$s,[D(v,{title:a.value.name,onClickBack:f.onBack},{center:F(()=>[e("img",{src:g(ws),alt:"logo",width:"184px",class:"-top-2 fixed left-1/2 -translate-x-1/2"},null,8,ks)]),right:F(()=>[e("div",Ds,[D(_,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center"},{default:F(()=>[e("span",{onClick:h},[te(D(g(tt),{class:"mr-1.5"},null,512),[[se,t.value]]),O(),te(D(g(st),{class:"mr-1.5"},null,512),[[se,!t.value]]),O(" "+l(t.value?"隐藏批注":"查看批注"),1)])]),_:1}),D(_,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:r[0]||(r[0]=()=>f.onViewOrigin(a.value))},{default:F(()=>[e("span",null,[O(l(i.$t("查看原题")),1),D(g(Qe),{class:"ml-1.5"})])]),_:1}),D(_,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:f.onBack},{default:F(()=>[e("span",null,[D(g(we),{class:"mr-1.5"}),O(l(i.$t("查看报告")),1)])]),_:1},8,["onClick"])])]),_:1},8,["title","onClickBack"]),e("div",Cs,[g(d).resultData.type==="spoken"?(n(),o("p",Bs,[qs,O(l((M=(R=a.value)==null?void 0:R.question)==null?void 0:M.question_title),1)])):L("",!0)]),e("div",{class:"w-[80px] h-[80px] bg-white fixed right-[calc(50vw+20px)] z-100 rounded-full flex flex-col justify-center items-center",style:J({border:"10px solid #F0F7F7",top:g(d).resultData.type==="spoken"?"95px":"82px"})},[e("span",Ts,l(i.$t("评分")),1),e("p",Ms,[e("span",As,l(((k=(I=a.value)==null?void 0:I.model_answer_content)==null?void 0:k.Overall)||"Na"),1),O(" / "+l((z=a.value)==null?void 0:z.mockScoreTotal),1)])],4),e("div",{class:"w-[80px] h-[80px] bg-white fixed right-[20px] z-100 rounded-full flex flex-col justify-center items-center",style:J({border:"10px solid #F0F7F7",top:g(d).resultData.type==="spoken"?"95px":"82px"})},[e("span",Rs,l(i.$t("评分")),1),e("p",Ss,[e("span",Es,l(((j=(q=a.value)==null?void 0:q.model_answer_content)==null?void 0:j["Edited Overall"])||((V=a.value)==null?void 0:V.mockScoreTotal)||"Na"),1),O(" / "+l((N=a.value)==null?void 0:N.mockScoreTotal),1)])],4),e("div",Fs,[e("div",Is,[g(d).resultData.type==="writing"?(n(),o("h2",Os,l(i.$t("原版")),1)):(n(),o("h2",js,[e("span",Hs,l(i.$t("原版录音与文字转换")),1),D(qe,{src:(ne=a.value)==null?void 0:ne.question.answer_voice_link,class:"my-audio"},null,8,["src"])])),e("div",{class:"overflow-y-auto flex-1 w-full pl-[128px] pr-[68px]",ref_key:"all_p",ref:p},[((xe=(_e=a.value)==null?void 0:_e.model_answer_content)==null?void 0:xe.Status)==="OK"&&((u=(ye=a.value)==null?void 0:ye.model_answer_content)!=null&&u.sent_back)?(n(!0),o(B,{key:0},E((W=(S=a.value)==null?void 0:S.model_answer_content)==null?void 0:W.sent_back,(X,K)=>(n(),o("div",{key:K,class:"mb-4 text-base relative all-ps"},[(n(!0),o(B,null,E(X,(oe,ae)=>(n(),o("p",{key:ae,class:"relative text-base inline",onMouseover:()=>c(ae,K,"hover"),onMouseleave:()=>c(ae,K,"leave")},[te(e("span",{class:"bg-[#1B8B8C] text-[#fff] w-[20px] h-[20px] text-xs border border-[#1B8B8C] border-solid rounded-full inline-block text-center mx-1",style:{lineHeight:"20px"}},l(ae),513),[[se,t.value]]),D(y,{placement:"bottomRight",overlayInnerStyle:{"margin-top":"-10px",background:"#D0F0E6",color:"#0A3F64",fontSize:"12px",borderRadius:"15px",borderTopLeftRadius:"0",border:"1px solid #0A3F64",marginTop:"-20px",marginLeft:"3px",padding:"10px"}},{title:F(()=>[e("div",null,l(oe.Feedback),1)]),default:F(()=>[e("span",{style:J(t.value?oe.curStyle:{})},l(oe.original),5)]),_:2},1024)],40,Ls))),128))]))),128)):(n(),o("div",zs,l((Y=(ee=a.value)==null?void 0:ee.question)==null?void 0:Y.answer),1))],512)]),e("div",Ys,[((de=a.value)==null?void 0:de.model_answer_content.Status)!=="OK"&&((Me=(Te=(me=a.value)==null?void 0:me.model_answer_content)==null?void 0:Te.msg)!=null&&Me.includes("用量已超使用上限制"))?(n(),o("div",Xs,[e("div",null,[e("p",Ps,[O(l(i.$t("🔒您的今日免费批改次数已用尽")),1),Qs,O(l(i.$t("如需批改，请购买会员")),1)]),D(_,{type:"primary",class:"!text-[14px] mx-auto block",onClick:r[1]||(r[1]=X=>g(s).replace("/price"))},{default:F(()=>[O(l(i.$t("购买会员")),1)]),_:1})])])):L("",!0),D(T,{activeKey:w.value,"onUpdate:activeKey":r[2]||(r[2]=X=>w.value=X),class:"result-table"},{default:F(()=>[(n(),P(C,{key:0,tab:"AI 批改"},{default:F(()=>{var X,K;return[(n(!0),o(B,null,E((K=(X=a.value)==null?void 0:X.model_answer_content)==null?void 0:K.sent_back,(oe,ae)=>(n(),o("div",{key:ae,class:"text-base relative mb-5"},[(n(!0),o(B,null,E(oe,(le,he)=>(n(),o("p",{key:he,class:"relative text-base inline"},[te(e("span",{style:{lineHeight:"20px"},class:"text-[#fff] bg-[#1B8B8C] w-[20px] h-[20px] text-xs border border-[#1B8B8C] border-solid rounded-full inline-block text-center mx-1"},l(he),513),[[se,t.value]]),e("span",{style:J(t.value?le.curStyle:{})},l(le.Edited==="No Change"?le.original:le.Edited),5)]))),128))]))),128))]}),_:1})),(n(),P(C,{key:1,tab:"AI 点评"},{default:F(()=>{var X,K,oe,ae,le,he,Ee,Fe;return[(n(!0),o(B,null,E((K=(X=a.value)==null?void 0:X.model_answer_content)==null?void 0:K.format_G_F,(pe,re)=>(n(),o("div",{key:re,class:"text-base mb-4 text-[#667085]"},[e("h4",null,l(re),1),e("p",null,l(pe),1)]))),128)),(ae=(oe=a.value)==null?void 0:oe.model_answer_content)!=null&&ae["Bad Pronunciation Scores"]?(n(),o(B,{key:0},[Vs,D(m,{class:"mb-4 mr-6 mt-2",pagination:!1,columns:x,size:"small",dataSource:Object.keys((he=(le=a.value)==null?void 0:le.model_answer_content)==null?void 0:he["Bad Pronunciation Scores"]).map(pe=>{var re,Ie;return{word:pe,score:(Ie=(re=a.value)==null?void 0:re.model_answer_content)==null?void 0:Ie["Bad Pronunciation Scores"][pe]}})},null,8,["dataSource"])],64)):L("",!0),Ns,(n(!0),o(B,null,E((Fe=(Ee=a.value)==null?void 0:Ee.model_answer_content)==null?void 0:Fe.format_M_M,(pe,re)=>(n(),o("p",{key:re,class:"text-base mb-4 text-[#667085]"},l(pe),1))),128))]}),_:1}))]),_:1},8,["activeKey"])])]),e("footer",Ws,[e("div",null,[e("h2",Ks,l(i.$t("问题标注")),1),e("div",Us,[(n(!0),o(B,null,E((Ae=a.value)==null?void 0:Ae.ques_mark,X=>(n(),o("div",{key:X.id,class:"flex text-base"},[e("p",{style:J(X.style)},"Aa",4),e("b",Zs,l(X.type),1)]))),128))])]),f.data.length>1?(n(),o("div",Gs,[(n(!0),o(B,null,E(f.data,(X,K)=>(n(),o("div",{onClick:oe=>$.value=K,key:K,class:Z(["h-full flex items-center justify-center px-8 cursor-pointer text-[#2C285B] rounded-xl",{"bg-[rgba(208,240,230,0.50)] font-medium":$.value===K}])},l(X.name),11,Js))),128))])):L("",!0)])]),((Se=(Re=a.value)==null?void 0:Re.model_answer_content)==null?void 0:Se.Status)==="OK"?(n(),P(Be,{key:0,data:a.value,type:g(d).resultData.type},null,8,["data","type"])):L("",!0)],64)}}}),Ke=ue(en,[["__scopeId","data-v-61a39652"]]),tn={class:"w-full h-full overflow-hidden fixed top-0 left-0 z-30 flex flex-col bg-white"},sn={class:"flex"},nn={class:"flex flex-1 overflow-hidden"},on={class:"w-1/2 text-base h-full overflow-y-auto px-10 pt-10",style:{borderRight:"1px solid #D0D5DD"}},an={key:0},ln={class:"text-base mb-4 text-[#475467]"},rn={class:"text-[#667085] font-normal text-base mb-4"},cn={class:"w-1/2 flex flex-col overflow-y-auto px-[80px] pt-[20px] text-[#475467] text-base"},un={class:"my-6"},dn=e("b",null,"Question：",-1),pn={key:0},fn={class:"mb-2 block"},_n=U({__name:"SpokenOriginView",props:{data:{},onBack:{type:Function},onExit:{type:Function}},setup(b){const t=b;return console.log(t.data),(s,d)=>{var $,w,a,h,c,i,r,_,v,y,C,m,T,R,M;const p=H("a-button"),x=H("b-header"),f=H("BQuesTitle");return n(),o("div",tn,[D(x,{title:($=t.data)==null?void 0:$.name,onClickBack:t.onBack},{right:F(()=>[e("div",sn,[D(p,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:t.onExit},{default:F(()=>[e("span",null,[D(g(we),{class:"mr-1.5"}),O(l(s.$t("查看批注")),1)])]),_:1},8,["onClick"])])]),_:1},8,["title","onClickBack"]),D(f,{title:"口语听力原文",index:(w=t.data)==null?void 0:w.curIndex,length:(a=t.data)==null?void 0:a.length},null,8,["index","length"]),e("div",nn,[e("div",on,[(c=(h=t.data)==null?void 0:h.question)!=null&&c.voice_content?(n(),o("div",an,[(n(!0),o(B,null,E((_=(r=(i=t.data)==null?void 0:i.question)==null?void 0:r.voice_content)==null?void 0:_.split(`
`),I=>(n(),o("p",ln,l(I),1))),256))])):L("",!0),e("h4",rn,l(s.$t("播放听力材料")),1),D(qe,{src:(v=t.data)==null?void 0:v.question.answer_voice_link},null,8,["src"])]),e("div",cn,[e("p",un,[dn,O(" "+l((y=t.data)==null?void 0:y.question.question_title),1)]),(m=(C=t.data)==null?void 0:C.question)!=null&&m.question_content?(n(),o("div",pn,[e("b",fn,l(s.$t("口语阅读原文")),1),(n(!0),o(B,null,E((M=(R=(T=t.data)==null?void 0:T.question)==null?void 0:R.question_content)==null?void 0:M.split(`
`),(I,k)=>(n(),o("p",{class:"mb-4",key:k},l(I),1))),128))])):L("",!0)])])])}}}),xn=U({__name:"SpokenReview",setup(b){const t=ce(),s=ge({open:!1,data:{}}),d=f=>{s.open=!0,s.data=f},p=()=>{t.setShowAnswerHistoryDialog()},x=()=>{s.open=!1,s.data={}};return(f,$)=>s.open?(n(),P(_n,{key:0,data:s.data,onExit:x,onBack:p},null,8,["data"])):(n(),P(Ke,{key:1,data:g(t).resultData.AnnotationData,onViewOrigin:d,onBack:p},null,8,["data"]))}}),mn={class:"w-full h-full overflow-hidden fixed top-0 left-0 z-30 flex flex-col bg-white"},hn={class:"flex"},vn=e("div",{class:"h-[100px]"},[e("div",{class:"text-base"},[e("p",{class:"bg-[#F6F6F6] px-10 py-2"},[e("b",null,"Directions:"),O(" You have 20 minutes to plan and write your response. Your response will be judged on the basis of the quality of your writing and on how well your response presents the points in the lecture and their relationship to the reading passage. Typically, an effective response will be 150 to 225 words. ")]),e("p",{class:"px-10 py-1"},[e("b",null,"Question: "),O("Summarize the points made in the lecture, being sure to explain how they cast doubt on the specific points made in the reading passage. ")])])],-1),yn={class:"flex flex-1 overflow-hidden",style:{borderTop:"1px solid #D0D5DD"}},gn={class:"w-1/2 text-base h-full overflow-y-auto px-10 pt-10",style:{borderRight:"1px solid #D0D5DD"}},bn={class:"w-1/2 flex flex-col overflow-hidden"},wn={key:1,class:"flex text-base flex-1"},$n={class:"flex w-1/2 flex-col py-10 px-10 text-[#475467]"},kn={class:"flex w-1/2 flex-col py-4",style:{borderLeft:"1px solid #D0D5DD"}},Dn=U({__name:"WritingOriginView",props:{data:{},onBack:{type:Function},onExit:{type:Function}},setup(b){const t=b;console.log(t.data);const s=Q(()=>{var x,f,$,w,a,h;const d=/\n?[a-zA-z\s]+:/g,p=($=(f=(x=t.data)==null?void 0:x.question)==null?void 0:f.question_content)==null?void 0:$.match(d);return(h=(a=(w=t.data)==null?void 0:w.question)==null?void 0:a.question_content)==null?void 0:h.split(d).slice(1).map((c,i)=>({name:p[i].replace(/:/g,"").replace(/\n/g,""),content:c.split(/\n/g)}))});return(d,p)=>{var w,a,h,c,i,r,_,v,y,C,m,T,R,M,I,k,z;const x=H("a-button"),f=H("b-header"),$=H("BQuesTitle");return n(),o("div",mn,[D(f,{title:(w=t.data)==null?void 0:w.name,onClickBack:t.onBack},{right:F(()=>[e("div",hn,[D(x,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:t.onExit},{default:F(()=>[e("span",null,[D(g(we),{class:"mr-1.5"}),O(l(d.$t("查看批注")),1)])]),_:1},8,["onClick"])])]),_:1},8,["title","onClickBack"]),D($,{title:(a=t.data)==null?void 0:a.name,index:(h=t.data)==null?void 0:h.curIndex,length:(c=t.data)==null?void 0:c.length},null,8,["title","index","length"]),((i=t.data)==null?void 0:i.name)==="Integrated Writing"?(n(),o(B,{key:0},[vn,e("div",yn,[e("div",gn,[(n(!0),o(B,null,E((v=(_=(r=t.data)==null?void 0:r.question)==null?void 0:_.question_content)==null?void 0:v.split(`
`),(q,j)=>(n(),o("p",{class:"text-[#475467] text-base pb-4 indent-8",key:j},l(q),1))),128))]),e("div",bn,[D(_t,{title:"Please listen carefully.",url:(C=(y=t.data)==null?void 0:y.question)==null?void 0:C.voice_link,img:"1",class:"mt-20",ended:()=>{}},null,8,["url"])])])],64)):L("",!0),((m=t.data)==null?void 0:m.name)==="Academic discussion"?(n(),o("div",wn,[e("div",$n,[(n(!0),o(B,null,E((M=(R=(T=t.data)==null?void 0:T.question)==null?void 0:R.question_title)==null?void 0:M.split(`
`),(q,j)=>(n(),o("div",{key:j},l(q),1))),128)),D(He,{src:g(xt),class:"my-10",name:(I=s.value[0])==null?void 0:I.name,size:80},null,8,["src","name"]),e("div",null,[(n(!0),o(B,null,E((k=s.value[0])==null?void 0:k.content,(q,j)=>(n(),o("p",{key:j},l(q),1))),128))])]),e("div",kn,[(n(!0),o(B,null,E((z=s.value)==null?void 0:z.slice(1),(q,j)=>(n(),o("div",{key:j,class:"text-[#475467] text-base flex mb-4 items-start"},[D(He,{src:j==0?g(mt):g(ht),class:"mx-10",name:q.name,size:80},null,8,["src","name"]),e("div",null,[(n(!0),o(B,null,E(q.content,(V,N)=>(n(),o("p",{key:N},l(V),1))),128))])]))),128))])])):L("",!0)])}}}),Cn=U({__name:"WritingReview",setup(b){const t=ce(),s=ge({open:!1,data:{}}),d=f=>{s.open=!0,s.data=f},p=()=>{t.setShowAnswerHistoryDialog()},x=()=>{s.open=!1,s.data={}};return(f,$)=>s.open?(n(),P(Dn,{key:0,data:s.data,onExit:x,onBack:p},null,8,["data"])):(n(),P(Ke,{key:1,data:g(t).resultData.AnnotationData,onViewOrigin:d,onBack:p},null,8,["data"]))}}),Bn={class:"bg-green-2 px-6 py-4 flex justify-between items-center"},qn={class:"font-normal text-xl text-gray-900"},Tn={class:"flex-1 overflow-hidden flex flex-col"},Mn=U({__name:"AnswerReview",setup(b){const t=ce(),s=A(0);be();const d={read:bs,hearing:Gt,writing:Cn,spoken:xn},p=Q(()=>t.resultData.format_question[s.value]),x=Q(()=>d[t.resultData.type]||null),f=Q(()=>t.resultData.type==="read"||t.resultData.type==="hearing"),$=()=>{t.setShowAnswerHistoryDialog()},w=(a,h,c)=>{a===1||a===-1?(s.value+=a,s.value<0&&(s.value=0),s.value>=t.resultData.format_question.length&&(s.value=t.resultData.format_question.length-1)):s.value=t.resultData.questions_r.questions.reduce((i,r,_)=>(_<h?i+=r.children.length:_===h&&(i+=c),i),0)};return(a,h)=>{const c=H("a-button"),i=H("BQuesTitle"),r=H("a-layout");return n(),P(r,{class:"w-full h-full flex flex-col absolute top-0 left-0 bg-green-2 z-50"},{default:F(()=>{var _,v,y,C;return[te(e("header",Bn,[e("div",qn,[D(g(nt),{class:"pr-2",onClick:$}),O(" "+l(a.$t("返回")),1)]),D(c,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:$},{default:F(()=>[e("span",null,[D(g(we)),O(l(" ")+l(" ")+l(a.$t("查看报告")),1)])]),_:1})],512),[[se,f.value]]),e("div",Tn,[te(D(i,{title:(v=(_=p.value)==null?void 0:_.question_parent)==null?void 0:v.question_title,index:s.value+1,length:(C=(y=g(t).resultData)==null?void 0:y.format_question)==null?void 0:C.length},null,8,["title","index","length"]),[[se,f.value]]),(n(),P(ot(x.value),{answerData:p.value},null,8,["answerData"]))]),f.value?(n(),P(us,{key:0,onChangeQues:w})):L("",!0)]}),_:1})}}}),An=ue(Mn,[["__scopeId","data-v-8ee18169"]]),Rn={class:"relative bg-wrap"},Sn={class:"w-[190px] h-[137px] result-icon absolute -top-[70px] left-1/2 -translate-x-1/2"},En={class:"absolute w-[46px] h-[46px] flex justify-center items-center text-white right-[40px] text-2xl"},Fn={class:"w-[56vw] h-full flex flex-col items-center"},In={key:0,class:"absolute left-8 top-7 text-base"},On={class:"flex items-center justify-center flex-col"},jn={class:"text-gray-600 font-normal text-[16px]"},Hn={class:"font-bold text-gray-600 pt-2"},Ln={class:"text-[36px]"},zn={class:"text-[24px]"},Yn={class:"flex"},Xn={class:"text-black font-semibold text-base mb-2"},Pn={class:"flex"},Qn={class:"font-normal text-[#475467] text-nowrap"},Vn={class:"font-bold text-gray-600"},Nn={class:"text-[36px] text-[#C33473]"},Wn={class:"text-[24px]"},Kn={class:"text-[#475467] font-normal text-base mb-2"},Un={key:0,class:"font-bold text-gray-600"},Zn={class:"text-[36px]"},Gn={class:"text-[24px]"},Jn={key:1},eo={class:"text-xs text-gray-600 opacity-90"},to={key:0,class:"flex flex-wrap mt-2 justify-center"},so={class:"overflow-y-auto max-h-[50px] w-full"},no=U({__name:"Card",setup(b){const t=ce(),{query:s}=be();return Q(()=>t.customData[s.type]),(d,p)=>{var x,f,$,w,a,h,c,i,r,_,v,y,C;return n(),o("div",Rn,[e("div",{class:"bg-white rounded-md relative z-10 px-14 pb-14 pt-20",style:J({boxShadow:"0px 4px 20px 0px rgba(27, 139, 140, 0.20)"})},[e("div",Sn,[e("span",En,l(((x=g(t).curData)==null?void 0:x.level)||"A"),1)]),e("div",Fn,[e("div",{class:Z(["summary-wrap",(f=g(t).curData)==null?void 0:f.layout])},[($=g(t).curData)!=null&&$.subtitle?(n(),o("h5",In,l((w=g(t).curData)==null?void 0:w.subtitle),1)):L("",!0),e("div",On,[e("h2",jn,l((a=g(t).curData)==null?void 0:a.name),1),e("p",Hn,[e("span",Ln,l((h=g(t).curData)==null?void 0:h.mockScore),1),e("span",zn," / "+l((c=g(t).curData)==null?void 0:c.mockScoreTotal),1)])]),e("ul",Yn,[(n(!0),o(B,null,E((i=g(t).curData)==null?void 0:i.list,(m,T)=>(n(),o("li",{key:T,class:"list-none flex items-center justify-center flex-col"},[m.children?(n(),o(B,{key:0},[e("h2",Xn,l(m.title),1),e("ul",Pn,[(n(!0),o(B,null,E(m.children,(R,M)=>(n(),o("li",{key:M,class:"flex flex-col items-center px-2"},[e("h4",Qn,l(R.title)+" "+l(d.$t("错题")),1),e("p",Vn,[e("span",Nn,l(R.count),1),e("span",Wn," / "+l(R.total),1)])]))),128))])],64)):(n(),o(B,{key:1},[e("h2",Kn,l(m.title),1),m.isComputed?(n(),o("p",Un,[e("span",Zn,l(m.count),1),e("span",Gn," / "+l(m.total),1)])):(n(),o("p",Jn,[e("span",eo,l(d.$t("正在打分中...")),1)]))],64))]))),128))])],2),(_=(r=g(t).curData)==null?void 0:r.tags)!=null&&_.length?(n(),o("div",to,[(n(!0),o(B,null,E((v=g(t).curData)==null?void 0:v.tags,(m,T)=>(n(),o("span",{key:T,class:"px-4 py-1.5 rounded-full text-gray-600 bg-[#E7EAEE] text-[16px] mx-2 mt-4"},l(m.name)+": "+l(m.sum)+"/"+l(m.count),1))),128))])):L("",!0),(y=g(t).curData)!=null&&y.aiComment?(n(),o("div",{key:1,style:J({background:"rgba(208, 240, 230, 0.50)"}),class:"rounded-md p-5 pt-6 mt-12 ai-comment relative text-gray-500 text-[16px] leading-6"},[e("div",so,l((C=g(t).curData)==null?void 0:C.aiComment),1)],4)):L("",!0)])],4)])}}}),oo=ue(no,[["__scopeId","data-v-9b589645"]]),ao={class:"flex"},lo={class:"flex-1 bg-green-2"},ro={class:"flex items-center justify-center pt-28"},io={class:"flex items-center justify-center mt-10 gap-6"},yo=U({__name:"index",setup(b){const t=ce(),s=be(),d=Pe();ve(async()=>{await t.getExamResult(s.params.sheetId)});const p=()=>{d.push("/"+s.query.type)},x=()=>{d.replace("/")},f=()=>{t.setShowAnswerHistoryDialog()},$=w=>{t.resultData.footerActiveIndex=w};return(w,a)=>{const h=H("a-spin"),c=H("a-button"),i=H("b-header"),r=H("a-layout");return g(t).resultData.loading?(n(),P(h,{key:0,size:"large",tip:w.$t("成绩计算中")+"...",class:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50"},null,8,["tip"])):(n(),o(B,{key:1},[g(t).showAnswerHistoryDialog?(n(),P(An,{key:0})):L("",!0),D(r,{class:"w-full h-full flex flex-col relative z-40"},{default:F(()=>[D(i,{title:g(t).resultData.title,onClickBack:p},{right:F(()=>[e("div",ao,[D(c,{type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center bg-[#B2DAC8] text-[#1B8B8C]",onClick:x},{default:F(()=>[e("span",null,[D(g(at)),O(l(w.$t("返回主页")),1)])]),_:1}),g(t).footerData[g(t).resultData.footerActiveIndex].id!=="MixedAll"?(n(),P(c,{key:0,type:"primary",class:"px-4 text-[16px] mx-1.5 py-[18px] flex items-center justify-center",onClick:f},{default:F(()=>[e("span",null,[O(l(w.$t("回顾答案"))+" ",1),D(g(Qe))])]),_:1})):L("",!0)])]),_:1},8,["title"]),e("div",lo,[e("div",ro,[D(oo)]),e("footer",io,[(n(!0),o(B,null,E(g(t).footerData,(_,v)=>(n(),P(c,{onClick:y=>$(v),key:_.id,class:Z(["h-10 min-w-[130px] text-[#A6AAB3] border-[#EAECF0]",{"!border-[#1B8B8C] shadow-lg !text-[#1B8B8C]":v===g(t).resultData.footerActiveIndex}])},{default:F(()=>[O(l(_.title),1)]),_:2},1032,["onClick","class"]))),128))])])]),_:1})],64))}}});export{yo as default};
