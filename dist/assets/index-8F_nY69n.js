import{i as t,H as K,d as ee,q as te,r as h,J as j,s as ae,c as _,e as g,f as s,j as a,F as se,K as le,b,h as oe,u as c,l as U,M as re,N as ne,C as ie,t as o,p as k,x as de,G as pe}from"./index-pJH6OLf6.js";import{a as ue}from"./avatat-TZWmZvAa.js";import{e as ce}from"./erweima-54vTubhK.js";import{u as fe}from"./file-x298ecki.js";import{u as me}from"./user-qE07j65H.js";import{u as be}from"./useGetCode-b0iOCeul.js";var he={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};const ve=he;function E(m){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?Object(arguments[i]):{},d=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(n).filter(function(v){return Object.getOwnPropertyDescriptor(n,v).enumerable}))),d.forEach(function(v){xe(m,v,n[v])})}return m}function xe(m,i,n){return i in m?Object.defineProperty(m,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):m[i]=n,m}var S=function(i,n){var d=E({},i,n.attrs);return t(K,E({},d,{icon:ve}),null)};S.displayName="CameraOutlined";S.inheritAttrs=!1;const _e=S,ye="/assets/about-E5fWg_cm.svg",ge={class:"flex w-full h-full overflow-y-auto"},we={class:"bg-white w-[200px] flex shrink-0 h-[fit-content] flex-col items-center justify-center border border-border-1 border-solid rounded-md ml-[100px] pb-4"},$e={class:"w-[100px] h-[100px] relative rounded-full overflow-hidden my-4"},ke={key:0,class:"updateAvatar"},Ce=["src"],Ie=["src"],Oe={key:1,class:"w-full flex flex-col justify-center items-center mb-[-10px]"},je={class:"bg-white w-[740px] h-full flex flex-col border border-border-1 border-solid rounded-md p-[80px] ml-[50px]",style:{width:"50%"}},Ue={class:"text-[26px]"},Se=s("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),ze={class:"text-[26px]"},Ae={class:"bg-white w-[740px] h-[818px] flex border border-border-1 border-solid rounded-md flex-col p-[80px]",style:{width:"50%"}},Be={class:"flex flex-col w-full items-center justify-center"},Ve=["src"],Fe=s("span",{class:"text-[20px] pt-3"},"Version 1.0.0",-1),He={class:"text-[26px] flex w-1/2 items-start justify-start pt-10"},Ne={class:"text-[26px] flex w-1/2 items-start justify-start pt-10"},Pe={class:"flex items-center h-full justify-between"},qe={class:"flex flex-col mt-2",style:{width:"30%"}},Ee=["src"],Re={class:"w-[127px] flex justify-center items-center text-[16px] text-[#475467]"},De={class:"text-[16px] mr-10"},Ge={class:"text-[#475467]"},Me={herf:"mailto:frank_fan@parrotbot.cn",class:"text-green-1 pl-2"},Te={class:"text-[26px] py-[30px] text-black-1"},Le=s("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),We={class:"text-[26px] py-[30px] text-black-1"},Je={class:"pb-[15px]"},Qe=s("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),Xe={class:"pb-[15px]"},Ye={class:"text px-2 cursor-pointer text-green-1"},Ze={class:"pb-[15px]"},ot=ee({__name:"index",setup(m){const i=me(),n=te(),d=h(""),v=h(!1),z=h(!1),w=h(!1),C=h(!1),x=h(!0),I=h(!1),A=h(),{getCodeBtnText:R,getCode:D,resetCode:G}=be(),y=j({name:"",password:"",mobile:""}),f=j({mobile:"",password:"",code:""}),O=j({mobile:[{required:!0,message:"请输入你的手机号！"},{pattern:le,message:"请输入正确的手机号！",trigger:"blur"}],code:[{required:!0,message:"请输入验证码！"}],password:[{required:!0,message:"请输入密码！"}]});ae(()=>{var e;return(e=n.userInfo)==null?void 0:e.name},()=>{y.name=n.userInfo.name},{immediate:!0});const M=async()=>{try{I.value=!0,await i.api_findPassword(f),w.value=!1}catch(e){console.log(e)}finally{I.value=!1}},T=()=>{V({name:y.name})},L=()=>{A.value.validateFields("mobile").then(()=>{D(f.mobile,()=>{i.api_sms(f.mobile,G)})})},B=()=>{window.open("https://yingwuzhixue.com/legal.html","__blank")},W=async e=>{if(e.target.files[0]){const l=await fe(e.target.files[0]);d.value=l.url}},V=async e=>{const{userId:l}=de("userinfo");pe.success("更新成功！"),await i.api_setUserInfo(l,e),await n.requestUserInfo(l),x.value=!0,d.value=""},J=()=>{V({avatar:d.value})},Q=()=>{w.value=!0},X=()=>{C.value=!0},F=()=>{x.value=!x.value};return(e,l)=>{const Y=b("a-avatar"),$=b("a-button"),p=b("a-input"),u=b("a-form-item"),H=b("a-switch"),N=b("a-form"),P=b("a-tab-pane"),Z=b("a-tabs"),q=b("a-modal");return _(),g(se,null,[s("div",ge,[t(Z,{class:"w-full h-full page-tab-setting"},{default:a(()=>[t(P,{key:"1",tab:"个人账号",class:"flex"},{default:a(()=>[s("div",we,[s("div",$e,[x.value?U("",!0):(_(),g("div",ke,[d.value?U("",!0):(_(),oe(c(_e),{key:0})),d.value?(_(),g("img",{key:1,src:d.value,class:"max-w-full max-h-full"},null,8,Ce)):U("",!0),s("input",{type:"file",class:"opacity-0 absolute left-0 top-0 w-full h-full",accept:".jpg,.png,.gif,.jpeg,.svg",onChange:W},null,32)])),re(t(Y,{class:ie(["bg-green-1 overflow-hidden shadow-lg border border-border-1 border-solid",{avatarEdit:!x.value}]),style:{"font-size":"40px"},size:100,src:c(n).userInfo.avatar,alt:c(n).userInfo.name},{default:a(()=>[s("img",{src:c(ue),width:"70%",class:"mt-[26px]"},null,8,Ie)]),_:1},8,["class","src","alt"]),[[ne,!d.value]])]),x.value?(_(),g("div",{key:0,class:"text-green-1 cursor-pointer decoration-solid decoration-green-1 underline",onClick:F},o(e.$t("编辑头像")),1)):(_(),g("div",Oe,[t($,{type:"primary","html-type":"submit",class:"shadow-none w-2/3 px-4 py-1.5 h-auto",onClick:J},{default:a(()=>[k(o(e.$t("更新")),1)]),_:1}),s("div",{class:"text-green-1 py-1 cursor-pointer",onClick:F},o(e.$t("删除")),1)]))]),s("div",je,[s("h1",Ue,o(e.$t("账户信息")),1),t(N,{ref_key:"formRef",ref:A,layout:"vertical",name:"login",autocomplete:"off",class:"mt-8",model:y,onFinish:T},{default:a(()=>[t(u,{label:e.$t("用户名"),name:"name"},{default:a(()=>[t(p,{class:"px-3.5 py-2.5",value:y.name,"onUpdate:value":l[0]||(l[0]=r=>y.name=r)},null,8,["value"])]),_:1},8,["label"]),t(u,{label:e.$t("密码"),name:"password"},{default:a(()=>[t(p,{class:"px-3.5 py-0",placeholder:e.$t("输入密码"),value:"password",type:"password"},{suffix:a(()=>[s("span",{class:"text h-full py-2.5 px-2 cursor-pointer text-green-1",onClick:l[1]||(l[1]=r=>Q())},o(e.$t("修改密码")),1)]),_:1},8,["placeholder"])]),_:1},8,["label"]),t(u,{label:e.$t("手机号"),name:"mobile"},{default:a(()=>[t(p,{type:"tel",class:"py-2.5 px-3.5",placeholder:e.$t("您的手机号"),value:c(n).userInfo.mobile,"onUpdate:value":l[3]||(l[3]=r=>c(n).userInfo.mobile=r),disabled:"true"},{prefix:a(()=>[Se]),suffix:a(()=>[s("span",{class:"text px-2 cursor-pointer text-green-1",onClick:l[2]||(l[2]=r=>X())},o(e.$t("修改手机号")),1)]),_:1},8,["placeholder","value"])]),_:1},8,["label"]),s("h1",ze,o(e.$t("通知提醒管理")),1),t(u,{name:"code"},{default:a(()=>[t(p,{class:"mt-8 setting-item",placeholder:e.$t("打开网站提醒"),disabled:""},{addonAfter:a(()=>[t(H,{checked:v.value,"onUpdate:checked":l[4]||(l[4]=r=>v.value=r)},null,8,["checked"])]),_:1},8,["placeholder"]),t(p,{class:"mt-8 setting-item",placeholder:e.$t("打开短信提醒"),disabled:""},{addonAfter:a(()=>[t(H,{checked:z.value,"onUpdate:checked":l[5]||(l[5]=r=>z.value=r)},null,8,["checked"])]),_:1},8,["placeholder"])]),_:1}),t(u,{class:"mb-0"},{default:a(()=>[t($,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto"},{default:a(()=>[k(o(e.$t("更新账户信息")),1)]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),t(P,{key:"2",tab:"关于鹦鹉智学",class:"w-full h-full flex items-center justify-center"},{default:a(()=>[s("div",Ae,[s("div",Be,[s("img",{src:c(ye),alt:"about"},null,8,Ve),Fe]),s("h1",He,o(e.$t("隐私条款")),1),t(u,{name:"code"},{default:a(()=>[t(p,{class:"px-3.5 py-2.5 mt-8",placeholder:e.$t("《鹦鹉智学协议》"),disabled:"true"},{suffix:a(()=>[s("span",{class:"text px-2 cursor-pointer font-bold text-green-1",onClick:B},o(e.$t("查看")),1)]),_:1},8,["placeholder"]),t(p,{class:"px-3.5 py-2.5 mt-8",placeholder:e.$t("《隐私保护指引》"),disabled:"true"},{suffix:a(()=>[s("span",{class:"text px-2 cursor-pointer font-bold text-green-1",onClick:B},o(e.$t("查看")),1)]),_:1},8,["placeholder"]),s("h1",Ne,o(e.$t("反馈意见")),1),s("div",Pe,[s("div",qe,[s("img",{src:c(ce),style:{width:"127px"}},null,8,Ee),s("div",Re,o(e.$t("添加企业微信")),1)]),s("div",De,[s("span",Ge,o(e.$t("客服邮箱")),1),s("a",Me,o(e.$t("frank_fan@parrotbot.cn")),1)])])]),_:1})])]),_:1})]),_:1})]),t(q,{open:w.value,"onUpdate:open":l[9]||(l[9]=r=>w.value=r),closable:"false",footer:"",class:"mt-[100px] my-modal"},{default:a(()=>[s("div",Te,o(e.$t("修改密码")),1),t(N,{ref:"formRef1",model:f,layout:"vertical",name:"login",autocomplete:"off",onFinish:M},{default:a(()=>[t(u,{label:"手机号",name:"mobile",rules:O.mobile},{default:a(()=>[t(p,{value:f.mobile,"onUpdate:value":l[6]||(l[6]=r=>f.mobile=r),type:"tel",class:"py-2.5 px-3.5",placeholder:"输入您的手机号"},{prefix:a(()=>[Le]),_:1},8,["value"])]),_:1},8,["rules"]),t(u,{label:"验证码",name:"code",rules:O.code},{default:a(()=>[t(p,{value:f.code,"onUpdate:value":l[7]||(l[7]=r=>f.code=r),class:"px-3.5 py-0",placeholder:"输入验证码"},{suffix:a(()=>[s("span",{onClick:L,class:"text h-full py-2.5 px-2 cursor-pointer text-green-1"},o(c(R)),1)]),_:1},8,["value"])]),_:1},8,["rules"]),t(u,{label:"设置新密码",name:"password",rules:O.password},{default:a(()=>[t(p,{value:f.password,"onUpdate:value":l[8]||(l[8]=r=>f.password=r),class:"py-2.5 px-3.5",placeholder:"输入新密码"},null,8,["value"])]),_:1},8,["rules"]),t(u,{class:"mb-0"},{default:a(()=>[t($,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto",loading:I.value},{default:a(()=>[k(o(e.$t("确认")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),t(q,{open:C.value,"onUpdate:open":l[11]||(l[11]=r=>C.value=r),closable:"false",class:"w-[250px] mt-[100px] my-modal",footer:""},{default:a(()=>[s("div",We,o(e.$t("修改手机号")),1),t(u,{name:"mobile"},{default:a(()=>[s("div",Je,o(e.$t("原手机号")),1),t(p,{type:"tel",class:"py-2 px-3.5",placeholder:e.$t("您的手机号"),value:c(n).userInfo.mobile,"onUpdate:value":l[10]||(l[10]=r=>c(n).userInfo.mobile=r),disabled:"true"},{prefix:a(()=>[Qe]),_:1},8,["placeholder","value"])]),_:1}),t(u,{name:"mobile"},{default:a(()=>[s("div",Xe,o(e.$t("验证码")),1),t(p,{type:"tel",class:"py-2 px-3.5",placeholder:e.$t("请输入验证码")},{suffix:a(()=>[s("span",Ye,o(e.$t("获取验证码")),1)]),_:1},8,["placeholder"])]),_:1}),t(u,{name:"mobile"},{default:a(()=>[s("div",Ze,o(e.$t("设置新手机号")),1),t(p,{type:"tel",class:"py-2 px-3.5",placeholder:e.$t("请输入新手机号")},null,8,["placeholder"])]),_:1}),t($,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto"},{default:a(()=>[k(o(e.$t("确认")),1)]),_:1})]),_:1},8,["open"])],64)}}});export{ot as default};
