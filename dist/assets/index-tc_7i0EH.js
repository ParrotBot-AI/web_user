import{u as Q}from"./exam-k0KXsE1s.js";import{d as P,r as L,H as te,N as se,v as w,b,c as e,e as o,f as c,u as v,k as $,t as s,i as E,j as f,l as m,O as N,P as Z,z as F,h as B,F as C,g as D,n as T,ae,al as oe,C as ne,A as le,B as re,o as ie,m as ce}from"./index-PocizONO.js";import{h as K}from"./hint-osXcIIjs.js";import{_ as U}from"./_plugin-vue_export-helper-x3n3nnut.js";const ue="data:image/svg+xml,%3csvg%20width='17'%20height='17'%20viewBox='0%200%2017%2017'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11.3958%203.00652L13.1599%204.77069M12.5299%201.45236L7.75742%206.22486C7.51083%206.4711%207.34265%206.78484%207.27409%207.12652L6.83325%209.33319L9.03992%208.89152C9.38159%208.82319%209.69492%208.65569%209.94159%208.40902L14.7141%203.63652C14.8575%203.49311%2014.9713%203.32285%2015.0489%203.13547C15.1265%202.94809%2015.1664%202.74726%2015.1664%202.54444C15.1664%202.34162%2015.1265%202.14079%2015.0489%201.95341C14.9713%201.76603%2014.8575%201.59577%2014.7141%201.45236C14.5707%201.30894%2014.4004%201.19518%2014.213%201.11756C14.0257%201.03995%2013.8248%201%2013.622%201C13.4192%201%2013.2184%201.03995%2013.031%201.11756C12.8436%201.19518%2012.6733%201.30894%2012.5299%201.45236Z'%20stroke='%231B8B8C'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M13.5%2010.9998V13.4998C13.5%2013.9419%2013.3244%2014.3658%2013.0118%2014.6783C12.6993%2014.9909%2012.2754%2015.1665%2011.8333%2015.1665H2.66667C2.22464%2015.1665%201.80072%2014.9909%201.48816%2014.6783C1.17559%2014.3658%201%2013.9419%201%2013.4998V4.33317C1%203.89114%201.17559%203.46722%201.48816%203.15466C1.80072%202.8421%202.22464%202.6665%202.66667%202.6665H5.16667'%20stroke='%231B8B8C'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",de="data:image/svg+xml,%3csvg%20width='21'%20height='22'%20viewBox='0%200%2021%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M5.21053%203.10547H3.10526C2.54691%203.10547%202.01143%203.32727%201.61662%203.72209C1.2218%204.1169%201%204.65238%201%205.21073V17.8423C1%2018.4007%201.2218%2018.9361%201.61662%2019.331C2.01143%2019.7258%202.54691%2019.9476%203.10526%2019.9476H9.10211M15.7368%2012.5792V16.7897H19.9474M15.7368%209.42126V5.21073C15.7368%204.65238%2015.515%204.1169%2015.1202%203.72209C14.7254%203.32727%2014.1899%203.10547%2013.6316%203.10547H11.5263'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M5.21045%209.42105H9.42098M5.21045%2013.6316H8.36834M5.21045%203.10526C5.21045%202.54691%205.43225%202.01143%205.82707%201.61662C6.22188%201.2218%206.75736%201%207.31571%201H9.42098C9.97933%201%2010.5148%201.2218%2010.9096%201.61662C11.3044%202.01143%2011.5262%202.54691%2011.5262%203.10526C11.5262%203.66361%2011.3044%204.1991%2010.9096%204.59391C10.5148%204.98872%209.97933%205.21053%209.42098%205.21053H7.31571C6.75736%205.21053%206.22188%204.98872%205.82707%204.59391C5.43225%204.1991%205.21045%203.66361%205.21045%203.10526ZM11.5262%2016.7895C11.5262%2017.9062%2011.9698%2018.9771%2012.7595%2019.7668C13.5491%2020.5564%2014.6201%2021%2015.7368%2021C16.8535%2021%2017.9244%2020.5564%2018.7141%2019.7668C19.5037%2018.9771%2019.9473%2017.9062%2019.9473%2016.7895C19.9473%2015.6728%2019.5037%2014.6018%2018.7141%2013.8122C17.9244%2013.0226%2016.8535%2012.5789%2015.7368%2012.5789C14.6201%2012.5789%2013.5491%2013.0226%2012.7595%2013.8122C11.9698%2014.6018%2011.5262%2015.6728%2011.5262%2016.7895Z'%20stroke='white'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",me="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='17'%20height='17'%20viewBox='0%200%2017%2017'%20fill='none'%3e%3cpath%20d='M11.7279%203.50652L13.4921%205.27069M12.8621%201.95236L8.08957%206.72486C7.84298%206.9711%207.6748%207.28484%207.60624%207.62652L7.16541%209.83319L9.37207%209.39152C9.71374%209.32319%2010.0271%209.15569%2010.2737%208.90902L15.0462%204.13652C15.1897%203.99311%2015.3034%203.82285%2015.381%203.63547C15.4586%203.44809%2015.4986%203.24726%2015.4986%203.04444C15.4986%202.84162%2015.4586%202.64079%2015.381%202.45341C15.3034%202.26603%2015.1897%202.09577%2015.0462%201.95236C14.9028%201.80894%2014.7326%201.69518%2014.5452%201.61756C14.3578%201.53995%2014.157%201.5%2013.9542%201.5C13.7513%201.5%2013.5505%201.53995%2013.3631%201.61756C13.1757%201.69518%2013.0055%201.80894%2012.8621%201.95236Z'%20stroke='%23475467'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20/%3e%3cpath%20d='M13.832%2011.4998V13.9998C13.832%2014.4419%2013.6564%2014.8658%2013.3439%2015.1783C13.0313%2015.4909%2012.6074%2015.6665%2012.1654%2015.6665H2.9987C2.55667%2015.6665%202.13275%2015.4909%201.82019%2015.1783C1.50763%2014.8658%201.33203%2014.4419%201.33203%2013.9998V4.83317C1.33203%204.39114%201.50763%203.96722%201.82019%203.65466C2.13275%203.3421%202.55667%203.1665%202.9987%203.1665H5.4987'%20stroke='%23475467'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20/%3e%3c/svg%3e",pe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='16'%20height='19'%20viewBox='0%200%2016%2019'%20fill='none'%3e%3cpath%20d='M13.8322%204.83333L12.713%205.9525M12.713%205.9525C11.4628%204.70223%209.76702%203.99983%207.99887%203.99983C6.23071%203.99983%204.53498%204.70223%203.2847%205.9525C2.03443%207.20277%201.33203%208.89851%201.33203%2010.6667C1.33203%2012.4348%202.03443%2014.1306%203.2847%2015.3808C4.53498%2016.6311%206.23071%2017.3335%207.99887%2017.3335C9.76702%2017.3335%2011.4628%2016.6311%2012.713%2015.3808C13.9633%2014.1306%2014.6657%2012.4348%2014.6657%2010.6667C14.6657%208.89851%2013.9633%207.20277%2012.713%205.9525ZM7.99887%207.33333V10.6667M5.49887%201.5H10.4989'%20stroke='%23475467'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20/%3e%3c/svg%3e",xe=M=>(le("data-v-c1847848"),M=M(),re(),M),_e={class:"flex px-3 pb-5 xl:w-1/3 w-1/2"},he={class:"left relative overflow-hidden h-full flex flex-col items-start text-white text-center"},fe=["src"],ve={class:"text-[30px] pl-6 flex-1 flex items-center w-full"},ke={key:1,class:"flex justify-around items-center w-full gap-3 px-3 mb-5"},Ce=["src"],ge=["src"],ye={class:"pb-2"},we=["src"],be={class:"pb-6"},qe={key:0,class:"flex flex-col flex-1 overflow-hidden"},Se={key:0,class:"text-gray-500 break-word w-24 font-semibold text-base"},$e=xe(()=>c("span",null,[m("小啾预测题是AI自动生成的写作题目，"),c("br"),m("帮您更好地迎战新的写作考核模式")],-1)),Ee={class:"!font-normal text-[#B2DAC8] text-xs flex items-center"},Me=["src"],Le=["onClick"],Be=["src","onClick"],je={key:1,class:"flex flex-col flex-1 overflow-hidden py-2.5 justify-between"},He={key:0,class:"pt-2 pb-1 text-[#333] text-base font-medium"},Ae={key:0,class:"text-gray-500 break-word w-24 font-bold text-base"},Ve={key:1,class:"font-bold pl-2 text-gray-500"},Re={class:"flex justify-end"},De=P({__name:"QuestionCard",props:{resource_id:{},id:{},resource_name:{},section:{},children:{}},setup(M){const h=L(!0),r=M,p=Q(),g=te(),n=se(),k=L("mock_exam"),I=w(()=>r.section.slice(n.name!=="hearing"?0:4)),x=L([]),j=L(!1),u=w(()=>n.name==="hearing"),q=w(()=>r.section||r.children),H=w(()=>n.name==="mock"?!1:q.value.some(t=>{if(t.section_id)return t.questions[0].sheet_id&&t.questions[0].last_record!==null})),A=w(()=>n.name==="mock"),a=w(()=>p.customData[n.name]),S=w(()=>t=>{var l,i,y;return(l=t.questions[0])!=null&&l.last_record?{color:"#F7A705",text:`${(i=t.questions[0])==null?void 0:i.last_record} / ${(y=t.questions[0])==null?void 0:y.total}`}:t.xxx?{color:"#1B8B8C",text:"继续考试"}:{color:"rgba(107, 114, 128, 0.60)",text:"未完成"}}),z=async t=>{if(n.name==="mock"){const l=await p.startMixedExam(k.value);ae(`mixedExam-${l.sheet_id}`,{id:r.id,father_sheet:l.sheet_id,resource_name:r.resource_name,curStep:"read",curIndex:0,quesid:r.children.map(i=>i.questions)}),await p.startExam(k.value,oe(r.children[0].questions,2),l.sheet_id),await g.push({name:"readExam",query:{type:"mixedExam",mid:l.sheet_id,name:r.resource_name,id:p.examing_data.sheet_id}});return}a.value.maxSelectCount===a.value.minSelectCount&&r.section.length===a.value.maxSelectCount||u.value&&r.section.length===5?(x.value=r.section.map(l=>l.questions[0].question_id),k.value=t,await p.startExam(k.value,x.value),await g.push({name:`${n.name}Exam`,query:{id:p.examing_data.sheet_id,name:r.resource_name.split("-")[0]}})):(h.value=!h.value,k.value=t)},O=async()=>{if(x.value.length!==0)try{j.value=!0,await p.startExam(k.value,u.value?[...r.section.slice(0,4).map(t=>t.questions[0].question_id),...x.value]:x.value),g.push({name:`${n.name}Exam`,query:{id:p.examing_data.sheet_id,name:r.resource_name.split("-")[0]}})}finally{j.value=!1}else ne.info("请选择Passage")},W=async t=>{await p.startExam("practice",[t.questions[0].question_id]),g.push({name:`${n.name}Exam`,query:{id:p.examing_data.sheet_id,name:r.resource_name.split("-")[0]}})},G=w(()=>(x.value.length>a.value.maxSelectCount&&x.value.shift(),x.value)),J=()=>{h.value=!h.value,x.value=[]},X=()=>{var l;if(n.name==="mock"){console.log("综合模考暂不支持此功能");return}const t=q.value.find(i=>{var y,V,R;return((y=i==null?void 0:i.questions[0])==null?void 0:y.sheet_id)!==void 0&&((V=i==null?void 0:i.questions[0])==null?void 0:V.sheet_id)!==null&&((R=i==null?void 0:i.questions[0])==null?void 0:R.last_record)!==null});g.push(`/result/${(l=t==null?void 0:t.questions[0])==null?void 0:l.sheet_id}?type=${n==null?void 0:n.name}`)},Y=t=>{var l;if(n.name==="mock"){console.log("综合模考暂不支持此功能");return}g.push(`/result/${(l=t.questions[0])==null?void 0:l.sheet_id}?type=${n==null?void 0:n.name}`)};return(t,l)=>{const i=b("a-button"),y=b("a-tooltip"),V=b("a-checkbox"),R=b("a-checkbox-group");return e(),o("div",_e,[c("div",{class:"flex bg-white exam-card w-full",style:T({height:a.value.height+"px"||"auto"})},[c("div",he,[H.value?(e(),o("img",{key:0,class:"absolute top-4 right-4 cursor-pointer",src:v(de),alt:"examEdit",onClick:X},null,8,fe)):$("",!0),c("span",ve,s(t.$t(r.resource_name.split("-")[0])),1),h.value?(e(),o("div",ke,[E(i,{onClick:l[0]||(l[0]=d=>z("mock_exam")),class:"flex w-1/2 justify-between items-center h-8 overflow-hidden"},{default:f(()=>[c("img",{src:v(pe),alt:"time"},null,8,Ce),m(" "+s(t.$t("模考")),1)]),_:1}),N(E(i,{onClick:l[1]||(l[1]=d=>z("practice")),class:"flex w-1/2 justify-between items-center h-8 overflow-hidden"},{default:f(()=>[c("img",{src:v(me),alt:"practice"},null,8,ge),m(" "+s(t.$t("练习")),1)]),_:1},512),[[Z,v(n).name!=="mock"]])])):(e(),o("div",{key:2,class:F(["h-10 mb-1 -translate-y-8 flex flex-col items-start pl-3.5",{"mb-1":!u.value,"mb-4":u.value}])},[c("span",ye,[m(s(t.$t("请选择此次"+(k.value==="mock_exam"?"模考":"练习")+"文章"))+" ",1),a.value.promptText?(e(),B(y,{key:0,placement:"bottomLeft",color:"#D0F0E6",overlayInnerStyle:{color:"#0A3F64",fontSize:"12px",borderRadius:"15px",borderTopLeftRadius:"0",border:"1px solid #0A3F64",marginTop:"-20px",marginLeft:"3px",padding:"10px"}},{title:f(()=>[c("span",null,s(a.value.promptText),1)]),default:f(()=>[c("img",{src:v(K),alt:"hint"},null,8,we)]),_:1})):$("",!0)]),c("span",be,s(G.value.length)+"/"+s(a.value.maxSelectCount),1)],2))]),h.value?(e(),o("div",qe,[(e(!0),o(C,null,D(q.value,(d,_)=>(e(),o(C,{key:d.section_id},[u.value&&_%3===0?(e(),o("h2",{key:0,class:"pl-2 pt-2 text-[#333] text-base font-medium",style:T({borderTop:_===3?"1px solid #D0D5DD":"1px solid transparent"})},"Section "+s(_===0?1:2),5)):$("",!0),c("div",{class:F(["flex justify-between items-center flex-1 px-3",{separator:!u.value}])},[Array.isArray(a.value.remark)?(e(),o("span",Se,[m(s(a.value.remark[_])+" ",1),_===q.value.length-1&&v(n).name!=="mock"?(e(),B(y,{key:0,placement:"bottomLeft",color:"#D0F0E6",overlayInnerStyle:{color:"#0A3F64",fontSize:"12px",borderRadius:"15px",borderTopLeftRadius:"0",border:"1px solid #0A3F64",marginTop:"-20px",marginLeft:"3px",padding:"10px"}},{title:f(()=>[$e]),default:f(()=>[c("span",Ee,[c("img",{src:v(K),alt:"hint",class:"mr-1"},null,8,Me),m("小啾预测题")])]),_:1})):$("",!0)])):(e(),o("span",{key:1,class:F(["text-gray-500 text-base",{"w-[110px]":u.value}])},[u.value?u.value&&_===4?(e(),o(C,{key:1},[m(s(a.value.remark)+s(" ")+"3",1)],64)):u.value&&_===5?(e(),o(C,{key:2},[m(s(a.value.remark)+s(" ")+"4",1)],64)):u.value&&_%3!==0?(e(),o(C,{key:3},[m(s(a.value.remark)+s(" ")+s(d.questions[0].order-1),1)],64)):u.value&&_%3===0?(e(),o(C,{key:4},[m("Conversation"+s(" ")+"1")],64)):$("",!0):(e(),o(C,{key:0},[m(s(a.value.remark)+s(" ")+s(d.questions[0].order),1)],64))],2)),c("span",{class:"flex flex-col justify-center text-xs min-w-[50px] cursor-pointer",style:T({color:S.value(d).color}),onClick:ee=>Y(d)},[N(c("span",null,s(t.$t("完成得分")),513),[[Z,S.value(d).color==="#F7A705"]]),m(" "+s(t.$t(S.value(d).text)),1)],12,Le),A.value?$("",!0):(e(),o("img",{key:2,src:v(ue),alt:"edit",onClick:ee=>W(d),class:"cursor-pointer"},null,8,Be))],2)],64))),128))])):(e(),o("div",je,[E(R,{value:x.value,"onUpdate:value":l[2]||(l[2]=d=>x.value=d),class:"w-full pl-2 flex flex-col"},{default:f(()=>[u.value?(e(),o("h2",He,"Section "+s(2))):$("",!0),(e(!0),o(C,null,D(I.value,(d,_)=>(e(),o("p",{key:d.section_id,class:"py-1.5"},[E(V,{class:"radius",value:d.questions[0].question_id},{default:f(()=>[Array.isArray(a.value.remark)?(e(),o("span",Ae,s(a.value.remark[_]),1)):(e(),o("span",Ve,s(a.value.remark)+s(" ")+s(u.value?_+3:_+1),1))]),_:2},1032,["value"])]))),128))]),_:1},8,["value"]),c("div",Re,[E(i,{class:"mr-4 text-green-1 border-green-1",onClick:J},{default:f(()=>[m(s(t.$t("取消")),1)]),_:1}),E(i,{type:"primary",class:"mr-4",onClick:O,loading:j.value},{default:f(()=>[m(s(t.$t("确定")),1)]),_:1},8,["loading"])])]))],4)])}}}),Ie=U(De,[["__scopeId","data-v-c1847848"]]),Fe={class:"bg-green-2 pt-4 flex flex-col"},Te={class:"flex content-start flex-wrap flex-1 overflow-y-auto py-5 px-3 bg-green-2"},ze={key:0},Ne=P({__name:"index",setup(M){const h=Q(),r=L(0),p=L(!1),g=async n=>{await h.getExamResource(n)};return ie(async()=>{try{p.value=!0,await h.getExamResource(r.value,!0)}finally{p.value=!1}}),(n,k)=>{const I=b("a-spin"),x=b("a-tab-pane"),j=b("a-tabs"),u=b("a-layout");return p.value?(e(),B(I,{key:0,size:"large",tip:"题库加载中...",class:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 ml-[100px]"})):(e(),B(u,{key:1,class:"w-full h-full overflow-hidden"},{default:f(()=>{var q,H,A;return[c("header",Fe,[E(j,{activeKey:r.value,"onUpdate:activeKey":k[0]||(k[0]=a=>r.value=a),onChange:g,class:"page-tab"},{default:f(()=>{var a;return[(e(!0),o(C,null,D((a=v(h).exam_data)==null?void 0:a.pageArr,S=>(e(),B(x,{tab:`${S.start}-${S.end}`,key:S.id},null,8,["tab"]))),128))]}),_:1},8,["activeKey"])]),c("div",Te,[(H=(q=v(h).exam_data)==null?void 0:q.list)!=null&&H.length?(e(!0),o(C,{key:1},D((A=v(h).exam_data)==null?void 0:A.list,a=>(e(),B(Ie,ce({key:a.resource_id},a),null,16))),128)):(e(),o("div",ze," 暂无数据 "))])]}),_:1}))}}}),Ue=U(Ne,[["__scopeId","data-v-6c6c1546"]]);export{Ue as Q};
