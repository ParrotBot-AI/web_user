import{_ as z}from"./index.vue_vue_type_script_setup_true_lang-ku5ITesA.js";import{_ as H}from"./Timer.vue_vue_type_script_setup_true_lang-3VTG7N1i.js";import{u as b}from"./exam-qYq8T4Ld.js";import{d as q,r as k,M as D,b as m,c,e as _,f as p,t as x,i as y,j as g,F as f,l as P,h,g as v,q as T,C as E,v as Q,z as F,A as U,u as B,_ as M,m as $,W as G,k as O,o as W,N as X}from"./index-xyv-xine.js";import{_ as C}from"./_plugin-vue_export-helper-x3n3nnut.js";import{_ as Y,D as K}from"./DragBox-_V2ObLxf.js";import{H as R,_ as J}from"./HeaderBtn-wTpJex19.js";import"./result-4UtMTjQs.js";import"./index-rDK3RPXD.js";import"./help-Nq3yPxnO.js";const V={class:"px-32"},Z={class:"pt-16 pb-14 text-[#475467] text-xl"},ee=q({__name:"Sc",props:{question_title:{},detail:{},question_id:{},options_label:{},question_content:{}},setup(d){const u=b(),e=k(-1),t=d;return D(()=>t.question_id,()=>{const i=u.examing_data.answerData.find(l=>l.question_id===t.question_id);if(i.is_answer){const l=(i==null?void 0:i.answer.findIndex(n=>n===1))??-1;e.value=l}else e.value=-1},{immediate:!0}),D(()=>e.value,()=>{var n;const i=t.options_label.map((s,a)=>a===e.value?1:0),l=(n=u.examing_data.answerData.find(s=>s.question_id===t.question_id))==null?void 0:n.answer;e.value>-1&&i.toString()!==(l==null?void 0:l.toString())&&u.saveQuestion(t.question_id,i)}),(i,l)=>{const n=m("a-radio"),s=m("a-radio-group");return c(),_("div",V,[p("h2",Z,x(t.question_content),1),y(s,{value:e.value,"onUpdate:value":l[0]||(l[0]=a=>e.value=a)},{default:g(()=>[(c(!0),_(f,null,v(t.detail,(a,o)=>(c(),h(n,{key:o,value:o,class:"flex pb-7 text-gray-500 myraido"},{default:g(()=>[P(x(t.options_label[o])+". "+x(a),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])}}}),te=C(ee,[["__scopeId","data-v-a161a8b5"]]),ne={class:"px-32"},se={class:"pt-16 pb-14 text-[#475467] text-xl"},oe={class:"flex-1 overflow-hidden text-wrap"},ae=q({__name:"Mc",props:{question_title:{},detail:{},question_id:{},options_label:{},question_content:{},restriction:{}},setup(d){const u=b(),e=k([]),t=d;return T(()=>{var l,n,s;const i=(n=(l=u.examing_data)==null?void 0:l.answerData)==null?void 0:n.find(a=>a.question_id===t.question_id);i!=null&&i.is_answer&&(e.value=(s=i==null?void 0:i.answer)==null?void 0:s.reduce((a,o,r)=>(o===1&&a.push(r),a),[]))}),D(()=>e.value,()=>{var n,s,a;e.value.length>t.restriction.rc&&e.value.shift();const i=t.options_label.map((o,r)=>Number(Object.values(e.value).includes(r))),l=(a=(s=(n=u.examing_data)==null?void 0:n.answerData)==null?void 0:s.find(o=>o.question_id===t.question_id))==null?void 0:a.answer;e.value.length===t.restriction.rc&&i.toString()!==(l==null?void 0:l.toString())&&u.saveQuestion(t.question_id,i)}),(i,l)=>{const n=m("a-checkbox"),s=m("a-checkbox-group");return c(),_("div",ne,[p("h2",se,x(t.question_content),1),y(s,{value:e.value,"onUpdate:value":l[0]||(l[0]=a=>e.value=a),class:"flex flex-col"},{default:g(()=>[(c(!0),_(f,null,v(t.detail,(a,o)=>(c(),h(n,{key:o,value:o,class:"flex pb-7 text-gray-500 mycheckbox flex-row"},{default:g(()=>[p("p",oe,x(a),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])])}}}),A=C(ae,[["__scopeId","data-v-24883ee1"]]),ie=d=>(F("data-v-bf696ca0"),d=d(),U(),d),le={class:"px-32"},ce={class:"pt-16 pb-8 text-[#475467] text-xl"},ue=ie(()=>p("p",{class:"bg-[#f0f0f0] text-center py-4 mb-3"},"Click in the correct box for each phrase",-1)),re={class:"w-full my-table"},de={class:"my-thead"},_e=q({__name:"Tf",props:{question_title:{},detail:{},keywords:{},question_id:{},options_label:{},question_content:{}},setup(d){const u=b(),e=E([]),t=Q(()=>{var n,s;return[{title:"",dataIndex:"val"},...(s=(n=i.keywords)==null?void 0:n.h)==null?void 0:s.map((a,o)=>({title:a,dataIndex:o}))]}),i=d;T(()=>{const n=u.examing_data.answerData.find(s=>s.question_id===i.question_id);e.length=0,e.push(...i.detail.map((s,a)=>({val:s,checkVal:n!=null&&n.is_answer?n.answer[a]:-1})))});const l=()=>{e.every(n=>n.checkVal>-1)&&u.saveQuestion(i.question_id,e.map(n=>n.checkVal))};return(n,s)=>{const a=m("a-radio"),o=m("a-radio-group");return c(),_("div",le,[p("h2",ce,x(i.question_content),1),ue,p("div",re,[p("div",de,[(c(!0),_(f,null,v(t.value,r=>(c(),_("span",{key:r.dataIndex},x(r.title),1))),128))]),(c(!0),_(f,null,v(e,(r,w)=>(c(),_("div",{class:"my-trow",key:w},[p("span",null,x(r[t.value[0].dataIndex]),1),y(o,{value:r.checkVal,"onUpdate:value":S=>r.checkVal=S,onChange:l},{default:g(()=>[(c(!0),_(f,null,v(t.value.slice(1),(S,I)=>(c(),h(a,{key:I,value:I+1},null,8,["value"]))),128))]),_:2},1032,["value","onUpdate:value"])]))),128))])])}}}),pe=C(_e,[["__scopeId","data-v-bf696ca0"]]),j=d=>(F("data-v-3bbe930a"),d=d(),U(),d),he={class:"px-32"},me={class:"pt-16 pb-14 text-[#475467] text-xl"},xe=j(()=>p("h2",{class:"text-gray-500 text-[16px] font-bold pb-3 pt-4"},"Answer Choices",-1)),fe={class:"flex flex-wrap w-[calc(100%+20px)] -ml-[10px]"},ve=j(()=>p("div",{class:"py-2 px-4 mt-4 bg-[#F6F6F6] text-[#475467] text-base"},"Directions: Drag your answer choices to the spaces here they belong. To remove an answer choice, click on it. To review the passage, click VIEW TEXT.",-1)),ge=q({__name:"Order",props:{question_title:{},detail:{},question_id:{},options_label:{},question_content:{},answer:{}},setup(d){const u=b(),e=k([]),t=d,i=Q(()=>t.detail.reduce((s,a,o)=>(s[o]=a,s),{}));T(()=>{var o,r;const s=(r=(o=u.examing_data)==null?void 0:o.answerData)==null?void 0:r.find(w=>w.question_id===t.question_id),a=s==null?void 0:s.answer.map(w=>`${w}`);s!=null&&s.is_answer&&(e.value=a)});const l=({type:s,index:a})=>{e.value[a]=s,e.value.length===t.answer.length&&u.saveQuestion(t.question_id,e.value)},n=({index:s})=>{e.value[s]=""};return(s,a)=>(c(),_("div",he,[p("h2",me,x(t.question_content),1),p("div",null,[(c(!0),_(f,null,v(t.answer,(o,r)=>(c(),h(Y,{key:r,checked:e.value,resource:i.value,onDrop:l,onDel:n,accept:["0","1","2"],index:r},null,8,["checked","resource","index"]))),128))]),xe,p("div",fe,[(c(!0),_(f,null,v(t.detail,(o,r)=>(c(),h(K,{key:r,val:o,type:`${r}`,res:e.value},null,8,["val","type","res"]))),128))]),ve]))}}),we=C(ge,[["__scopeId","data-v-3bbe930a"]]),ye={class:"bg-white w-full h-full"},be={class:"flex flex-1 justify-center items-center overflow-hidden bg-white"},qe=q({__name:"QuestionItem",props:{title:{},voice_link:{},question_id:{},order:{},played:{type:Boolean},step:{},voice_content:{},onAuidoEnded:{type:Function},children:{}},setup(d){const u=b(),e={Toefl_Listening_sc:te,Toefl_Listening_mc_2:A,Toefl_Listening_mc_3:A,Toefl_Listening_orde:we,Toefl_Listening_tf:pe},t=d,i=Q(()=>(console.log("curQuestion::",t.children[t.step]),t.children[t.step])),l=()=>{t.onAuidoEnded(t.question_id,t.order)};return(n,s)=>{const a=m("BQuesTitle");return c(),_("div",ye,[y(a,{title:t.title,index:B(u).examing_data.curIndex+1,length:B(u).examing_data.childrenLength},{right:g(()=>[y(H)]),_:1},8,["title","index","length"]),p("div",be,[t.step===-1?(c(),h(z,{key:0,ended:l,title:"Please listen carefully.",class:"mt-20",img:"2",url:t.voice_link},null,8,["url"])):i.value?(c(),h(G(e[i.value.question_type]),M($({key:1},i.value)),null,16)):O("",!0)])])}}}),ke={class:"flex"},Ne=q({__name:"index",setup(d){const u=k(!0),e=b(),{query:t}=X(),i=k(!0),l=E({type:"info",title:"Listening",info_title:"Listening Section Directions",is_show_footer:!0,question_title:["In this section, you will be able to demonstrate your ability to understand conversations and lectures in English. The section is divided into two separately timed parts. You will hear each conversation or lecture only one time.","A clock will indicate how much time remains. The clock will count down only while you are answering questions, not while you are listening. In some questions, you",'will see this icon: <div class="listen-icon"></div> . This means that you will hear, but not see, part of the question.','You must answer each question. After you answer, select <button class="nextbtn">Next</button> . In the actual test, you cannot return to previous questions.']}),n=E({horn:{title:"horn",id:"horn",disabled:!0,isShow:!1},help:{title:"HELP",id:"help",disabled:!1,isShow:!1,onClick:()=>{console.log("help")}},prev:{title:"BACK",disabled:!1,id:"prev",isShow:!1,onClick:()=>{e.changeQuestion(-1);const o=e.examing_data.questions[e.examing_data.curQuestionIndex];o.step===0?e.examing_data.curQuestionIndex>0&&e.examing_data.curQuestionIndex--:o.step-=1}},continue:{title:"CONTINUE",id:"continue",disabled:!1,isShow:!0,onClick:()=>{u.value?u.value=!1:s()}},next:{title:"NEXT",id:"next",disabled:!1,isShow:!1,onClick:()=>{e.changeQuestion(1);const o=e.examing_data.questions[e.examing_data.curQuestionIndex];a.value.played?o.step+=1:o.step=-1}},submit:{title:"SUBMIT",id:"submit",disabled:!1,isShow:!1,onClick:()=>{e.requestSubmitExam(t.id)}}}),s=()=>{const o=e.examing_data.questions[e.examing_data.curQuestionIndex];o.played=!0,o.step=0},a=Q(()=>e.examing_data.questions[e.examing_data.curQuestionIndex]);return T(()=>{var o;u.value||(n.horn.isShow=!0),((o=a.value)==null?void 0:o.step)>=0?(n.next.isShow=!0,n.prev.isShow=!0,n.continue.isShow=!1,n.help.isShow=!0):(n.next.isShow=!1,n.prev.isShow=!1,n.continue.isShow=!0,n.help.isShow=!1),e.examing_data.curIndex===e.examing_data.childrenLength-1&&(n.submit.isShow=!0,n.next.isShow=!1)}),W(async()=>{await e.getExamData(t.id,"hearing"),t.sectionIndex&&t.quesIndex&&(u.value=!1),e.examing_data.questions.map(o=>{o.played=t.quesIndex>-1,o.step=t.quesIndex>-1?Number(t.quesIndex):-1}),i.value=!1}),(o,r)=>{const w=m("a-spin"),S=m("b-header"),I=m("a-layout");return i.value?(c(),h(w,{key:0,size:"large",tip:"试题加载中...",class:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50"})):(c(),h(I,{key:1,class:"w-full h-full flex flex-col"},{default:g(()=>{var L;return[y(S,{title:((L=B(t))==null?void 0:L.name)||"模拟考试"},{right:g(()=>[p("div",ke,[(c(!0),_(f,null,v(Object.keys(n),N=>(c(),h(R,$(n[N],{key:N}),null,16))),128))])]),_:1},8,["title"]),u.value?(c(),h(J,M($({key:0},l)),null,16)):a.value?(c(),h(qe,$({key:1},a.value,{onAuidoEnded:s,title:"Listening"}),null,16)):O("",!0)]}),_:1}))}}});export{Ne as default};
