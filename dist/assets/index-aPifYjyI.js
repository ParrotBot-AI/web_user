import{i as e,E as X,d as Y,q as Z,r as x,G as R,c as h,e as v,j as t,H as K,b as m,f as a,h as ee,u as d,l as I,J as te,K as ae,A as se,p as y,t as w,M as le,D as oe}from"./index-qFNGwHMx.js";import{a as re}from"./avatat-TZWmZvAa.js";import{e as ne}from"./erweima-54vTubhK.js";import{u as ie}from"./file--QXUk0A-.js";import{u as ce}from"./user-VijKKlZE.js";import{u as pe}from"./useGetCode-4T3mfax6.js";var de={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 248H728l-32.4-90.8a32.07 32.07 0 00-30.2-21.2H358.6c-13.5 0-25.6 8.5-30.1 21.2L296 248H160c-44.2 0-80 35.8-80 80v456c0 44.2 35.8 80 80 80h704c44.2 0 80-35.8 80-80V328c0-44.2-35.8-80-80-80zm8 536c0 4.4-3.6 8-8 8H160c-4.4 0-8-3.6-8-8V328c0-4.4 3.6-8 8-8h186.7l17.1-47.8 22.9-64.2h250.5l22.9 64.2 17.1 47.8H864c4.4 0 8 3.6 8 8v456zM512 384c-88.4 0-160 71.6-160 160s71.6 160 160 160 160-71.6 160-160-71.6-160-160-160zm0 256c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96z"}}]},name:"camera",theme:"outlined"};const ue=de;function q(f){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?Object(arguments[n]):{},i=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(r).filter(function(_){return Object.getOwnPropertyDescriptor(r,_).enumerable}))),i.forEach(function(_){fe(f,_,r[_])})}return f}function fe(f,n,r){return n in f?Object.defineProperty(f,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):f[n]=r,f}var U=function(n,r){var i=q({},n,r.attrs);return e(X,q({},i,{icon:ue}),null)};U.displayName="CameraOutlined";U.inheritAttrs=!1;const me=U,xe="/assets/about-kIfRBhJk.svg",_e={class:"flex w-full h-full overflow-y-auto"},be={class:"bg-white w-[200px] flex shrink-0 h-[fit-content] flex-col items-center justify-center border border-border-1 border-solid rounded-md ml-[100px] pb-4"},he={class:"w-[100px] h-[100px] relative rounded-full overflow-hidden my-4"},ve={key:0,class:"updateAvatar"},ye=["src"],ge=["src"],we={key:1,class:"w-full flex flex-col justify-center items-center mb-[-10px]"},ke={class:"bg-white w-[740px] h-full flex flex-col border border-border-1 border-solid rounded-md p-[80px] ml-[50px]",style:{width:"50%"}},Ce=a("h1",{class:"text-[26px]"},"账户信息",-1),$e=a("div",{class:"text-[26px] py-[30px] text-black-1"},"修改密码",-1),Oe=a("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),je=a("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),Ie=a("div",{class:"text-[26px] py-[30px] text-black-1"},"修改手机号",-1),Ue=a("div",{class:"pb-[15px]"},"原手机号",-1),Se=a("span",{class:"text-gray-500 pr-2 relative after:content-[''] after:w-[1px] after:h-5 after:bg-gray-500 after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2"},"+86",-1),ze=a("div",{class:"pb-[15px]"},"验证码",-1),Ae=a("span",{class:"text px-2 cursor-pointer text-green-1"}," 获取验证码 ",-1),Be=a("div",{class:"pb-[15px]"},"设置新手机号",-1),Ve=a("h1",{class:"text-[26px]"},"通知提醒管理",-1),He={class:"bg-white w-[740px] h-[818px] flex border border-border-1 border-solid rounded-md flex-col p-[80px]",style:{width:"50%"}},Pe={class:"flex flex-col w-full items-center justify-center"},Re=["src"],qe=a("span",{class:"text-[20px] pt-3"},"Version 1.0.0",-1),Ee=a("h1",{class:"text-[26px] flex w-1/2 items-start justify-start pt-10"},"隐私条款",-1),Ne=a("h1",{class:"text-[26px] flex w-1/2 items-start justify-start pt-10"},"反馈意见",-1),De={class:"flex items-center h-full justify-between"},Fe={class:"flex flex-col mt-2",style:{width:"30%"}},Ge=["src"],Me=a("div",{class:"w-[127px] flex justify-center items-center text-[16px] text-[#475467]"},"添加企业微信",-1),Te=a("div",{class:"text-[16px] mr-10"},[a("span",{class:"text-[#475467]"},"客服邮箱"),a("a",{herf:"mailto:frank_fan@parrotbot.cn",class:"text-green-1 pl-2"},"frank_fan@parrotbot.cn")],-1),Ze=Y({__name:"index",setup(f){const n=ce(),r=Z(),i=x(""),_=x(!1),S=x(!1),k=x(!1),C=x(!1),b=x(!0),$=x(!1),O=x(),{getCodeBtnText:E,getCode:N,resetCode:D}=pe(),u=R({mobile:"",code:"",password:""}),j=R({mobile:[{required:!0,message:"请输入你的手机号！"},{pattern:K,message:"请输入正确的手机号！",trigger:"blur"}],code:[{required:!0,message:"请输入验证码！"}],password:[{required:!0,message:"请输入密码！"}]}),F=async()=>{try{$.value=!0,await n.api_findPassword(u)}catch(l){console.log(l)}finally{$.value=!1}},G=()=>{O.value.validateFields("mobile").then(()=>{N(u.mobile,()=>{n.api_sms(u.mobile,D)})})},z=()=>{window.open("https://yingwuzhixue.com/legal.html","__blank")},M=async l=>{if(l.target.files[0]){const s=await ie(l.target.files[0]);i.value=s.url}},T=async()=>{const{userId:l}=le("userinfo");oe.success("更新成功！"),await n.api_setUserInfo(l,{avatar:i.value}),await r.requestUserInfo(l),b.value=!0,i.value=""},J=()=>{k.value=!0},L=()=>{C.value=!0},A=()=>{b.value=!b.value};return(l,s)=>{const W=m("a-avatar"),g=m("a-button"),c=m("a-input"),p=m("a-form-item"),B=m("a-form"),V=m("a-modal"),H=m("a-switch"),P=m("a-tab-pane"),Q=m("a-tabs");return h(),v("div",_e,[e(Q,{class:"w-full h-full page-tab-setting"},{default:t(()=>[e(P,{key:"1",tab:"个人账号",class:"flex"},{default:t(()=>[a("div",be,[a("div",he,[b.value?I("",!0):(h(),v("div",ve,[i.value?I("",!0):(h(),ee(d(me),{key:0})),i.value?(h(),v("img",{key:1,src:i.value,class:"max-w-full max-h-full"},null,8,ye)):I("",!0),a("input",{type:"file",class:"opacity-0 absolute left-0 top-0 w-full h-full",accept:".jpg,.png,.gif,.jpeg,.svg",onChange:M},null,32)])),te(e(W,{class:se(["bg-green-1 overflow-hidden shadow-lg border border-border-1 border-solid",{avatarEdit:!b.value}]),style:{"font-size":"40px"},size:100,src:d(r).userInfo.avatar,alt:d(r).userInfo.name},{default:t(()=>[a("img",{src:d(re),width:"70%",class:"mt-[26px]"},null,8,ge)]),_:1},8,["class","src","alt"]),[[ae,!i.value]])]),b.value?(h(),v("div",{key:0,class:"text-green-1 cursor-pointer decoration-solid decoration-green-1 underline",onClick:A},"编辑头像")):(h(),v("div",we,[e(g,{type:"primary","html-type":"submit",class:"shadow-none w-2/3 px-4 py-1.5 h-auto",onClick:T},{default:t(()=>[y(w(l.$t("更新")),1)]),_:1}),a("div",{class:"text-green-1 py-1 cursor-pointer",onClick:A},"删除")]))]),a("div",ke,[Ce,e(B,{ref_key:"formRef",ref:O,layout:"vertical",name:"login",autocomplete:"off",class:"mt-8"},{default:t(()=>[e(p,{label:l.$t("用户名"),name:"code"},{default:t(()=>[e(c,{class:"px-3.5 py-2.5",value:d(r).userInfo.name,"onUpdate:value":s[0]||(s[0]=o=>d(r).userInfo.name=o),disabled:"true"},null,8,["value"])]),_:1},8,["label"]),e(p,{label:l.$t("密码"),name:"code"},{default:t(()=>[e(c,{class:"px-3.5 py-0",placeholder:l.$t("输入密码")},{suffix:t(()=>[a("span",{class:"text h-full py-2.5 px-2 cursor-pointer text-green-1",onClick:s[1]||(s[1]=o=>J())}," 修改密码 "),e(V,{open:k.value,"onUpdate:open":s[5]||(s[5]=o=>k.value=o),closable:"false",footer:"",class:"mt-[100px] my-modal"},{default:t(()=>[$e,e(B,{ref_key:"formRef",ref:O,model:u,layout:"vertical",name:"login",autocomplete:"off",onFinish:F},{default:t(()=>[e(p,{label:"手机号",name:"mobile",rules:j.mobile},{default:t(()=>[e(c,{value:u.mobile,"onUpdate:value":s[2]||(s[2]=o=>u.mobile=o),type:"tel",class:"py-2.5 px-3.5",placeholder:"输入您的手机号"},{prefix:t(()=>[Oe]),_:1},8,["value"])]),_:1},8,["rules"]),e(p,{label:"验证码",name:"code",rules:j.code},{default:t(()=>[e(c,{value:u.code,"onUpdate:value":s[3]||(s[3]=o=>u.code=o),class:"px-3.5 py-0",placeholder:"输入验证码"},{suffix:t(()=>[a("span",{onClick:G,class:"text h-full py-2.5 px-2 cursor-pointer text-green-1"},w(d(E)),1)]),_:1},8,["value"])]),_:1},8,["rules"]),e(p,{label:"设置新密码",name:"password",rules:j.password},{default:t(()=>[e(c,{value:u.password,"onUpdate:value":s[4]||(s[4]=o=>u.password=o),class:"py-2.5 px-3.5",placeholder:"输入新密码"},null,8,["value"])]),_:1},8,["rules"]),e(p,{class:"mb-0"},{default:t(()=>[e(g,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto",loading:$.value},{default:t(()=>[y("确认")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])]),_:1},8,["placeholder"])]),_:1},8,["label"]),e(p,{label:l.$t("手机号"),name:"mobile"},{default:t(()=>[e(c,{type:"tel",class:"py-2.5 px-3.5",placeholder:l.$t("您的手机号"),value:d(r).userInfo.mobile,"onUpdate:value":s[9]||(s[9]=o=>d(r).userInfo.mobile=o),disabled:"true"},{prefix:t(()=>[je]),suffix:t(()=>[a("span",{class:"text px-2 cursor-pointer text-green-1",onClick:s[8]||(s[8]=o=>L())},[y(" 修改手机号 "),e(V,{open:C.value,"onUpdate:open":s[7]||(s[7]=o=>C.value=o),closable:"false",class:"w-[250px] mt-[100px] my-modal",footer:""},{default:t(()=>[Ie,e(p,{name:"mobile"},{default:t(()=>[Ue,e(c,{type:"tel",class:"py-2 px-3.5",placeholder:l.$t("您的手机号"),value:d(r).userInfo.mobile,"onUpdate:value":s[6]||(s[6]=o=>d(r).userInfo.mobile=o),disabled:"true"},{prefix:t(()=>[Se]),_:1},8,["placeholder","value"])]),_:1}),e(p,{name:"mobile"},{default:t(()=>[ze,e(c,{type:"tel",class:"py-2 px-3.5",placeholder:l.$t("请输入验证码")},{suffix:t(()=>[Ae]),_:1},8,["placeholder"])]),_:1}),e(p,{name:"mobile"},{default:t(()=>[Be,e(c,{type:"tel",class:"py-2 px-3.5",placeholder:l.$t("请输入新手机号")},null,8,["placeholder"])]),_:1}),e(g,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto"},{default:t(()=>[y(w(l.$t("确认")),1)]),_:1})]),_:1},8,["open"])])]),_:1},8,["placeholder","value"])]),_:1},8,["label"]),Ve,e(p,{name:"code"},{default:t(()=>[e(c,{class:"px-3.5 py-2.5 mt-8",placeholder:l.$t("打开网站提醒")},{addonAfter:t(()=>[e(H,{checked:_.value,"onUpdate:checked":s[10]||(s[10]=o=>_.value=o)},null,8,["checked"])]),_:1},8,["placeholder"]),e(c,{class:"px-3.5 py-2.5 mt-8 ant-input-wrapper",placeholder:l.$t("打开短信提醒")},{addonAfter:t(()=>[e(H,{checked:S.value,"onUpdate:checked":s[11]||(s[11]=o=>S.value=o)},null,8,["checked"])]),_:1},8,["placeholder"])]),_:1})]),_:1},512),e(p,{class:"mb-0"},{default:t(()=>[e(g,{type:"primary","html-type":"submit",class:"shadow-none w-full px-4 py-2.5 h-auto"},{default:t(()=>[y(w(l.$t("更新账户信息")),1)]),_:1})]),_:1})])]),_:1}),e(P,{key:"2",tab:"关于鹦鹉智学",class:"w-full h-full flex items-center justify-center"},{default:t(()=>[a("div",He,[a("div",Pe,[a("img",{src:d(xe),alt:"about"},null,8,Re),qe]),Ee,e(p,{name:"code"},{default:t(()=>[e(c,{class:"px-3.5 py-2.5 mt-8",placeholder:l.$t("《鹦鹉智学协议》"),disabled:"true"},{suffix:t(()=>[a("span",{class:"text px-2 cursor-pointer font-bold text-green-1",onClick:z}," 查看 ")]),_:1},8,["placeholder"]),e(c,{class:"px-3.5 py-2.5 mt-8",placeholder:l.$t("《隐私保护指引》"),disabled:"true"},{suffix:t(()=>[a("span",{class:"text px-2 cursor-pointer font-bold text-green-1",onClick:z}," 查看 ")]),_:1},8,["placeholder"]),Ne,a("div",De,[a("div",Fe,[a("img",{src:d(ne),style:{width:"127px"}},null,8,Ge),Me]),Te])]),_:1})])]),_:1})]),_:1})])}}});export{Ze as default};
